var j_=Object.defineProperty;var R_=(t,e,n)=>e in t?j_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ea=(t,e,n)=>R_(t,typeof e!="symbol"?e+"":e,n);function k_(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function P_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hg={exports:{}},Rl={},Wg={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Po=Symbol.for("react.element"),D_=Symbol.for("react.portal"),V_=Symbol.for("react.fragment"),L_=Symbol.for("react.strict_mode"),M_=Symbol.for("react.profiler"),O_=Symbol.for("react.provider"),F_=Symbol.for("react.context"),U_=Symbol.for("react.forward_ref"),B_=Symbol.for("react.suspense"),z_=Symbol.for("react.memo"),$_=Symbol.for("react.lazy"),fp=Symbol.iterator;function q_(t){return t===null||typeof t!="object"?null:(t=fp&&t[fp]||t["@@iterator"],typeof t=="function"?t:null)}var Gg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qg=Object.assign,Kg={};function Js(t,e,n){this.props=t,this.context=e,this.refs=Kg,this.updater=n||Gg}Js.prototype.isReactComponent={};Js.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Js.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Xg(){}Xg.prototype=Js.prototype;function Od(t,e,n){this.props=t,this.context=e,this.refs=Kg,this.updater=n||Gg}var Fd=Od.prototype=new Xg;Fd.constructor=Od;Qg(Fd,Js.prototype);Fd.isPureReactComponent=!0;var pp=Array.isArray,Yg=Object.prototype.hasOwnProperty,Ud={current:null},Jg={key:!0,ref:!0,__self:!0,__source:!0};function Zg(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Yg.call(e,r)&&!Jg.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:Po,type:t,key:i,ref:o,props:s,_owner:Ud.current}}function H_(t,e){return{$$typeof:Po,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Bd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Po}function W_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var mp=/\/+/g;function Pu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?W_(""+t.key):e.toString(36)}function Ca(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Po:case D_:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Pu(o,0):r,pp(s)?(n="",t!=null&&(n=t.replace(mp,"$&/")+"/"),Ca(s,e,n,"",function(d){return d})):s!=null&&(Bd(s)&&(s=H_(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(mp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",pp(t))for(var u=0;u<t.length;u++){i=t[u];var c=r+Pu(i,u);o+=Ca(i,e,n,c,s)}else if(c=q_(t),typeof c=="function")for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=r+Pu(i,u++),o+=Ca(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ta(t,e,n){if(t==null)return t;var r=[],s=0;return Ca(t,r,"","",function(i){return e.call(n,i,s++)}),r}function G_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ct={current:null},Ia={transition:null},Q_={ReactCurrentDispatcher:Ct,ReactCurrentBatchConfig:Ia,ReactCurrentOwner:Ud};function ey(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:ta,forEach:function(t,e,n){ta(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ta(t,function(){e++}),e},toArray:function(t){return ta(t,function(e){return e})||[]},only:function(t){if(!Bd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ae.Component=Js;ae.Fragment=V_;ae.Profiler=M_;ae.PureComponent=Od;ae.StrictMode=L_;ae.Suspense=B_;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q_;ae.act=ey;ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Qg({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Ud.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)Yg.call(e,c)&&!Jg.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];r.children=u}return{$$typeof:Po,type:t.type,key:s,ref:i,props:r,_owner:o}};ae.createContext=function(t){return t={$$typeof:F_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:O_,_context:t},t.Consumer=t};ae.createElement=Zg;ae.createFactory=function(t){var e=Zg.bind(null,t);return e.type=t,e};ae.createRef=function(){return{current:null}};ae.forwardRef=function(t){return{$$typeof:U_,render:t}};ae.isValidElement=Bd;ae.lazy=function(t){return{$$typeof:$_,_payload:{_status:-1,_result:t},_init:G_}};ae.memo=function(t,e){return{$$typeof:z_,type:t,compare:e===void 0?null:e}};ae.startTransition=function(t){var e=Ia.transition;Ia.transition={};try{t()}finally{Ia.transition=e}};ae.unstable_act=ey;ae.useCallback=function(t,e){return Ct.current.useCallback(t,e)};ae.useContext=function(t){return Ct.current.useContext(t)};ae.useDebugValue=function(){};ae.useDeferredValue=function(t){return Ct.current.useDeferredValue(t)};ae.useEffect=function(t,e){return Ct.current.useEffect(t,e)};ae.useId=function(){return Ct.current.useId()};ae.useImperativeHandle=function(t,e,n){return Ct.current.useImperativeHandle(t,e,n)};ae.useInsertionEffect=function(t,e){return Ct.current.useInsertionEffect(t,e)};ae.useLayoutEffect=function(t,e){return Ct.current.useLayoutEffect(t,e)};ae.useMemo=function(t,e){return Ct.current.useMemo(t,e)};ae.useReducer=function(t,e,n){return Ct.current.useReducer(t,e,n)};ae.useRef=function(t){return Ct.current.useRef(t)};ae.useState=function(t){return Ct.current.useState(t)};ae.useSyncExternalStore=function(t,e,n){return Ct.current.useSyncExternalStore(t,e,n)};ae.useTransition=function(){return Ct.current.useTransition()};ae.version="18.3.1";Wg.exports=ae;var L=Wg.exports;const ty=P_(L),K_=k_({__proto__:null,default:ty},[L]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X_=L,Y_=Symbol.for("react.element"),J_=Symbol.for("react.fragment"),Z_=Object.prototype.hasOwnProperty,ew=X_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tw={key:!0,ref:!0,__self:!0,__source:!0};function ny(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Z_.call(e,r)&&!tw.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Y_,type:t,key:i,ref:o,props:s,_owner:ew.current}}Rl.Fragment=J_;Rl.jsx=ny;Rl.jsxs=ny;Hg.exports=Rl;var l=Hg.exports,yc={},ry={exports:{}},qt={},sy={exports:{}},iy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,J){var te=H.length;H.push(J);e:for(;0<te;){var B=te-1>>>1,ee=H[B];if(0<s(ee,J))H[B]=J,H[te]=ee,te=B;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var J=H[0],te=H.pop();if(te!==J){H[0]=te;e:for(var B=0,ee=H.length,Lt=ee>>>1;B<Lt;){var ht=2*(B+1)-1,tn=H[ht],wt=ht+1,Gt=H[wt];if(0>s(tn,te))wt<ee&&0>s(Gt,tn)?(H[B]=Gt,H[wt]=te,B=wt):(H[B]=tn,H[ht]=te,B=ht);else if(wt<ee&&0>s(Gt,te))H[B]=Gt,H[wt]=te,B=wt;else break e}}return J}function s(H,J){var te=H.sortIndex-J.sortIndex;return te!==0?te:H.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var c=[],d=[],f=1,m=null,g=3,w=!1,_=!1,b=!1,j=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(H){for(var J=n(d);J!==null;){if(J.callback===null)r(d);else if(J.startTime<=H)r(d),J.sortIndex=J.expirationTime,e(c,J);else break;J=n(d)}}function P(H){if(b=!1,N(H),!_)if(n(c)!==null)_=!0,we(O);else{var J=n(d);J!==null&&Vt(P,J.startTime-H)}}function O(H,J){_=!1,b&&(b=!1,C(v),v=-1),w=!0;var te=g;try{for(N(J),m=n(c);m!==null&&(!(m.expirationTime>J)||H&&!I());){var B=m.callback;if(typeof B=="function"){m.callback=null,g=m.priorityLevel;var ee=B(m.expirationTime<=J);J=t.unstable_now(),typeof ee=="function"?m.callback=ee:m===n(c)&&r(c),N(J)}else r(c);m=n(c)}if(m!==null)var Lt=!0;else{var ht=n(d);ht!==null&&Vt(P,ht.startTime-J),Lt=!1}return Lt}finally{m=null,g=te,w=!1}}var k=!1,y=null,v=-1,T=5,A=-1;function I(){return!(t.unstable_now()-A<T)}function R(){if(y!==null){var H=t.unstable_now();A=H;var J=!0;try{J=y(!0,H)}finally{J?S():(k=!1,y=null)}}else k=!1}var S;if(typeof E=="function")S=function(){E(R)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,oe=Y.port2;Y.port1.onmessage=R,S=function(){oe.postMessage(null)}}else S=function(){j(R,0)};function we(H){y=H,k||(k=!0,S())}function Vt(H,J){v=j(function(){H(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){_||w||(_=!0,we(O))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(H){switch(g){case 1:case 2:case 3:var J=3;break;default:J=g}var te=g;g=J;try{return H()}finally{g=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,J){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var te=g;g=H;try{return J()}finally{g=te}},t.unstable_scheduleCallback=function(H,J,te){var B=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?B+te:B):te=B,H){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=te+ee,H={id:f++,callback:J,priorityLevel:H,startTime:te,expirationTime:ee,sortIndex:-1},te>B?(H.sortIndex=te,e(d,H),n(c)===null&&H===n(d)&&(b?(C(v),v=-1):b=!0,Vt(P,te-B))):(H.sortIndex=ee,e(c,H),_||w||(_=!0,we(O))),H},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(H){var J=g;return function(){var te=g;g=J;try{return H.apply(this,arguments)}finally{g=te}}}})(iy);sy.exports=iy;var nw=sy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rw=L,$t=nw;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var oy=new Set,io={};function rs(t,e){Fs(t,e),Fs(t+"Capture",e)}function Fs(t,e){for(io[t]=e,t=0;t<e.length;t++)oy.add(e[t])}var Vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vc=Object.prototype.hasOwnProperty,sw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gp={},yp={};function iw(t){return vc.call(yp,t)?!0:vc.call(gp,t)?!1:sw.test(t)?yp[t]=!0:(gp[t]=!0,!1)}function ow(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function aw(t,e,n,r){if(e===null||typeof e>"u"||ow(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function It(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new It(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new It(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new It(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new It(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new It(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new It(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new It(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new It(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new It(t,5,!1,t.toLowerCase(),null,!1,!1)});var zd=/[\-:]([a-z])/g;function $d(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(zd,$d);ct[e]=new It(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(zd,$d);ct[e]=new It(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(zd,$d);ct[e]=new It(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new It(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new It("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new It(t,1,!1,t.toLowerCase(),null,!0,!0)});function qd(t,e,n,r){var s=ct.hasOwnProperty(e)?ct[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(aw(e,n,s,r)&&(n=null),r||s===null?iw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var zn=rw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,na=Symbol.for("react.element"),vs=Symbol.for("react.portal"),xs=Symbol.for("react.fragment"),Hd=Symbol.for("react.strict_mode"),xc=Symbol.for("react.profiler"),ay=Symbol.for("react.provider"),ly=Symbol.for("react.context"),Wd=Symbol.for("react.forward_ref"),_c=Symbol.for("react.suspense"),wc=Symbol.for("react.suspense_list"),Gd=Symbol.for("react.memo"),Yn=Symbol.for("react.lazy"),uy=Symbol.for("react.offscreen"),vp=Symbol.iterator;function Ai(t){return t===null||typeof t!="object"?null:(t=vp&&t[vp]||t["@@iterator"],typeof t=="function"?t:null)}var Pe=Object.assign,Du;function Li(t){if(Du===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Du=e&&e[1]||""}return`
`+Du+t}var Vu=!1;function Lu(t,e){if(!t||Vu)return"";Vu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,u=i.length-1;1<=o&&0<=u&&s[o]!==i[u];)u--;for(;1<=o&&0<=u;o--,u--)if(s[o]!==i[u]){if(o!==1||u!==1)do if(o--,u--,0>u||s[o]!==i[u]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=u);break}}}finally{Vu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Li(t):""}function lw(t){switch(t.tag){case 5:return Li(t.type);case 16:return Li("Lazy");case 13:return Li("Suspense");case 19:return Li("SuspenseList");case 0:case 2:case 15:return t=Lu(t.type,!1),t;case 11:return t=Lu(t.type.render,!1),t;case 1:return t=Lu(t.type,!0),t;default:return""}}function Ec(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xs:return"Fragment";case vs:return"Portal";case xc:return"Profiler";case Hd:return"StrictMode";case _c:return"Suspense";case wc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ly:return(t.displayName||"Context")+".Consumer";case ay:return(t._context.displayName||"Context")+".Provider";case Wd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Gd:return e=t.displayName||null,e!==null?e:Ec(t.type)||"Memo";case Yn:e=t._payload,t=t._init;try{return Ec(t(e))}catch{}}return null}function uw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ec(e);case 8:return e===Hd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cw(t){var e=cy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ra(t){t._valueTracker||(t._valueTracker=cw(t))}function dy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=cy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function $a(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Tc(t,e){var n=e.checked;return Pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function xp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=xr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function hy(t,e){e=e.checked,e!=null&&qd(t,"checked",e,!1)}function Sc(t,e){hy(t,e);var n=xr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Cc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Cc(t,e.type,xr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function _p(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Cc(t,e,n){(e!=="number"||$a(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Mi=Array.isArray;function js(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+xr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ic(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function wp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Mi(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:xr(n)}}function fy(t,e){var n=xr(e.value),r=xr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ep(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function py(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?py(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var sa,my=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(sa=sa||document.createElement("div"),sa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=sa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function oo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Hi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dw=["Webkit","ms","Moz","O"];Object.keys(Hi).forEach(function(t){dw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Hi[e]=Hi[t]})});function gy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Hi.hasOwnProperty(t)&&Hi[t]?(""+e).trim():e+"px"}function yy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=gy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var hw=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ac(t,e){if(e){if(hw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function bc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jc=null;function Qd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Rc=null,Rs=null,ks=null;function Tp(t){if(t=Lo(t)){if(typeof Rc!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Ll(e),Rc(t.stateNode,t.type,e))}}function vy(t){Rs?ks?ks.push(t):ks=[t]:Rs=t}function xy(){if(Rs){var t=Rs,e=ks;if(ks=Rs=null,Tp(t),e)for(t=0;t<e.length;t++)Tp(e[t])}}function _y(t,e){return t(e)}function wy(){}var Mu=!1;function Ey(t,e,n){if(Mu)return t(e,n);Mu=!0;try{return _y(t,e,n)}finally{Mu=!1,(Rs!==null||ks!==null)&&(wy(),xy())}}function ao(t,e){var n=t.stateNode;if(n===null)return null;var r=Ll(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var kc=!1;if(Vn)try{var bi={};Object.defineProperty(bi,"passive",{get:function(){kc=!0}}),window.addEventListener("test",bi,bi),window.removeEventListener("test",bi,bi)}catch{kc=!1}function fw(t,e,n,r,s,i,o,u,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Wi=!1,qa=null,Ha=!1,Pc=null,pw={onError:function(t){Wi=!0,qa=t}};function mw(t,e,n,r,s,i,o,u,c){Wi=!1,qa=null,fw.apply(pw,arguments)}function gw(t,e,n,r,s,i,o,u,c){if(mw.apply(this,arguments),Wi){if(Wi){var d=qa;Wi=!1,qa=null}else throw Error(z(198));Ha||(Ha=!0,Pc=d)}}function ss(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ty(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sp(t){if(ss(t)!==t)throw Error(z(188))}function yw(t){var e=t.alternate;if(!e){if(e=ss(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Sp(s),t;if(i===r)return Sp(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o){for(u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function Sy(t){return t=yw(t),t!==null?Cy(t):null}function Cy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Cy(t);if(e!==null)return e;t=t.sibling}return null}var Iy=$t.unstable_scheduleCallback,Cp=$t.unstable_cancelCallback,vw=$t.unstable_shouldYield,xw=$t.unstable_requestPaint,Be=$t.unstable_now,_w=$t.unstable_getCurrentPriorityLevel,Kd=$t.unstable_ImmediatePriority,Ny=$t.unstable_UserBlockingPriority,Wa=$t.unstable_NormalPriority,ww=$t.unstable_LowPriority,Ay=$t.unstable_IdlePriority,kl=null,xn=null;function Ew(t){if(xn&&typeof xn.onCommitFiberRoot=="function")try{xn.onCommitFiberRoot(kl,t,void 0,(t.current.flags&128)===128)}catch{}}var an=Math.clz32?Math.clz32:Cw,Tw=Math.log,Sw=Math.LN2;function Cw(t){return t>>>=0,t===0?32:31-(Tw(t)/Sw|0)|0}var ia=64,oa=4194304;function Oi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ga(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~s;u!==0?r=Oi(u):(i&=o,i!==0&&(r=Oi(i)))}else o=n&~s,o!==0?r=Oi(o):i!==0&&(r=Oi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-an(e),s=1<<n,r|=t[n],e&=~s;return r}function Iw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-an(i),u=1<<o,c=s[o];c===-1?(!(u&n)||u&r)&&(s[o]=Iw(u,e)):c<=e&&(t.expiredLanes|=u),i&=~u}}function Dc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function by(){var t=ia;return ia<<=1,!(ia&4194240)&&(ia=64),t}function Ou(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Do(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-an(e),t[e]=n}function Aw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-an(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Xd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-an(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ve=0;function jy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ry,Yd,ky,Py,Dy,Vc=!1,aa=[],ir=null,or=null,ar=null,lo=new Map,uo=new Map,Zn=[],bw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ip(t,e){switch(t){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":or=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":lo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":uo.delete(e.pointerId)}}function ji(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Lo(e),e!==null&&Yd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function jw(t,e,n,r,s){switch(e){case"focusin":return ir=ji(ir,t,e,n,r,s),!0;case"dragenter":return or=ji(or,t,e,n,r,s),!0;case"mouseover":return ar=ji(ar,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return lo.set(i,ji(lo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,uo.set(i,ji(uo.get(i)||null,t,e,n,r,s)),!0}return!1}function Vy(t){var e=zr(t.target);if(e!==null){var n=ss(e);if(n!==null){if(e=n.tag,e===13){if(e=Ty(n),e!==null){t.blockedOn=e,Dy(t.priority,function(){ky(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Na(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Lc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);jc=r,n.target.dispatchEvent(r),jc=null}else return e=Lo(n),e!==null&&Yd(e),t.blockedOn=n,!1;e.shift()}return!0}function Np(t,e,n){Na(t)&&n.delete(e)}function Rw(){Vc=!1,ir!==null&&Na(ir)&&(ir=null),or!==null&&Na(or)&&(or=null),ar!==null&&Na(ar)&&(ar=null),lo.forEach(Np),uo.forEach(Np)}function Ri(t,e){t.blockedOn===e&&(t.blockedOn=null,Vc||(Vc=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,Rw)))}function co(t){function e(s){return Ri(s,t)}if(0<aa.length){Ri(aa[0],t);for(var n=1;n<aa.length;n++){var r=aa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ir!==null&&Ri(ir,t),or!==null&&Ri(or,t),ar!==null&&Ri(ar,t),lo.forEach(e),uo.forEach(e),n=0;n<Zn.length;n++)r=Zn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Zn.length&&(n=Zn[0],n.blockedOn===null);)Vy(n),n.blockedOn===null&&Zn.shift()}var Ps=zn.ReactCurrentBatchConfig,Qa=!0;function kw(t,e,n,r){var s=ve,i=Ps.transition;Ps.transition=null;try{ve=1,Jd(t,e,n,r)}finally{ve=s,Ps.transition=i}}function Pw(t,e,n,r){var s=ve,i=Ps.transition;Ps.transition=null;try{ve=4,Jd(t,e,n,r)}finally{ve=s,Ps.transition=i}}function Jd(t,e,n,r){if(Qa){var s=Lc(t,e,n,r);if(s===null)Qu(t,e,r,Ka,n),Ip(t,r);else if(jw(s,t,e,n,r))r.stopPropagation();else if(Ip(t,r),e&4&&-1<bw.indexOf(t)){for(;s!==null;){var i=Lo(s);if(i!==null&&Ry(i),i=Lc(t,e,n,r),i===null&&Qu(t,e,r,Ka,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Qu(t,e,r,null,n)}}var Ka=null;function Lc(t,e,n,r){if(Ka=null,t=Qd(r),t=zr(t),t!==null)if(e=ss(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ty(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ka=t,null}function Ly(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_w()){case Kd:return 1;case Ny:return 4;case Wa:case ww:return 16;case Ay:return 536870912;default:return 16}default:return 16}}var tr=null,Zd=null,Aa=null;function My(){if(Aa)return Aa;var t,e=Zd,n=e.length,r,s="value"in tr?tr.value:tr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Aa=s.slice(t,1<r?1-r:void 0)}function ba(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function la(){return!0}function Ap(){return!1}function Ht(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?la:Ap,this.isPropagationStopped=Ap,this}return Pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=la)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=la)},persist:function(){},isPersistent:la}),e}var Zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eh=Ht(Zs),Vo=Pe({},Zs,{view:0,detail:0}),Dw=Ht(Vo),Fu,Uu,ki,Pl=Pe({},Vo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:th,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ki&&(ki&&t.type==="mousemove"?(Fu=t.screenX-ki.screenX,Uu=t.screenY-ki.screenY):Uu=Fu=0,ki=t),Fu)},movementY:function(t){return"movementY"in t?t.movementY:Uu}}),bp=Ht(Pl),Vw=Pe({},Pl,{dataTransfer:0}),Lw=Ht(Vw),Mw=Pe({},Vo,{relatedTarget:0}),Bu=Ht(Mw),Ow=Pe({},Zs,{animationName:0,elapsedTime:0,pseudoElement:0}),Fw=Ht(Ow),Uw=Pe({},Zs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Bw=Ht(Uw),zw=Pe({},Zs,{data:0}),jp=Ht(zw),$w={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ww(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Hw[t])?!!e[t]:!1}function th(){return Ww}var Gw=Pe({},Vo,{key:function(t){if(t.key){var e=$w[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ba(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:th,charCode:function(t){return t.type==="keypress"?ba(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ba(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Qw=Ht(Gw),Kw=Pe({},Pl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rp=Ht(Kw),Xw=Pe({},Vo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:th}),Yw=Ht(Xw),Jw=Pe({},Zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zw=Ht(Jw),e1=Pe({},Pl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),t1=Ht(e1),n1=[9,13,27,32],nh=Vn&&"CompositionEvent"in window,Gi=null;Vn&&"documentMode"in document&&(Gi=document.documentMode);var r1=Vn&&"TextEvent"in window&&!Gi,Oy=Vn&&(!nh||Gi&&8<Gi&&11>=Gi),kp=" ",Pp=!1;function Fy(t,e){switch(t){case"keyup":return n1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _s=!1;function s1(t,e){switch(t){case"compositionend":return Uy(e);case"keypress":return e.which!==32?null:(Pp=!0,kp);case"textInput":return t=e.data,t===kp&&Pp?null:t;default:return null}}function i1(t,e){if(_s)return t==="compositionend"||!nh&&Fy(t,e)?(t=My(),Aa=Zd=tr=null,_s=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Oy&&e.locale!=="ko"?null:e.data;default:return null}}var o1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!o1[t.type]:e==="textarea"}function By(t,e,n,r){vy(r),e=Xa(e,"onChange"),0<e.length&&(n=new eh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Qi=null,ho=null;function a1(t){Jy(t,0)}function Dl(t){var e=Ts(t);if(dy(e))return t}function l1(t,e){if(t==="change")return e}var zy=!1;if(Vn){var zu;if(Vn){var $u="oninput"in document;if(!$u){var Vp=document.createElement("div");Vp.setAttribute("oninput","return;"),$u=typeof Vp.oninput=="function"}zu=$u}else zu=!1;zy=zu&&(!document.documentMode||9<document.documentMode)}function Lp(){Qi&&(Qi.detachEvent("onpropertychange",$y),ho=Qi=null)}function $y(t){if(t.propertyName==="value"&&Dl(ho)){var e=[];By(e,ho,t,Qd(t)),Ey(a1,e)}}function u1(t,e,n){t==="focusin"?(Lp(),Qi=e,ho=n,Qi.attachEvent("onpropertychange",$y)):t==="focusout"&&Lp()}function c1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Dl(ho)}function d1(t,e){if(t==="click")return Dl(e)}function h1(t,e){if(t==="input"||t==="change")return Dl(e)}function f1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var un=typeof Object.is=="function"?Object.is:f1;function fo(t,e){if(un(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!vc.call(e,s)||!un(t[s],e[s]))return!1}return!0}function Mp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Op(t,e){var n=Mp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Mp(n)}}function qy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Hy(){for(var t=window,e=$a();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=$a(t.document)}return e}function rh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function p1(t){var e=Hy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&qy(n.ownerDocument.documentElement,n)){if(r!==null&&rh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Op(n,i);var o=Op(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var m1=Vn&&"documentMode"in document&&11>=document.documentMode,ws=null,Mc=null,Ki=null,Oc=!1;function Fp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Oc||ws==null||ws!==$a(r)||(r=ws,"selectionStart"in r&&rh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ki&&fo(Ki,r)||(Ki=r,r=Xa(Mc,"onSelect"),0<r.length&&(e=new eh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ws)))}function ua(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Es={animationend:ua("Animation","AnimationEnd"),animationiteration:ua("Animation","AnimationIteration"),animationstart:ua("Animation","AnimationStart"),transitionend:ua("Transition","TransitionEnd")},qu={},Wy={};Vn&&(Wy=document.createElement("div").style,"AnimationEvent"in window||(delete Es.animationend.animation,delete Es.animationiteration.animation,delete Es.animationstart.animation),"TransitionEvent"in window||delete Es.transitionend.transition);function Vl(t){if(qu[t])return qu[t];if(!Es[t])return t;var e=Es[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Wy)return qu[t]=e[n];return t}var Gy=Vl("animationend"),Qy=Vl("animationiteration"),Ky=Vl("animationstart"),Xy=Vl("transitionend"),Yy=new Map,Up="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(t,e){Yy.set(t,e),rs(e,[t])}for(var Hu=0;Hu<Up.length;Hu++){var Wu=Up[Hu],g1=Wu.toLowerCase(),y1=Wu[0].toUpperCase()+Wu.slice(1);Nr(g1,"on"+y1)}Nr(Gy,"onAnimationEnd");Nr(Qy,"onAnimationIteration");Nr(Ky,"onAnimationStart");Nr("dblclick","onDoubleClick");Nr("focusin","onFocus");Nr("focusout","onBlur");Nr(Xy,"onTransitionEnd");Fs("onMouseEnter",["mouseout","mouseover"]);Fs("onMouseLeave",["mouseout","mouseover"]);Fs("onPointerEnter",["pointerout","pointerover"]);Fs("onPointerLeave",["pointerout","pointerover"]);rs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rs("onBeforeInput",["compositionend","keypress","textInput","paste"]);rs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),v1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fi));function Bp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,gw(r,e,void 0,t),t.currentTarget=null}function Jy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==i&&s.isPropagationStopped())break e;Bp(s,u,d),i=c}else for(o=0;o<r.length;o++){if(u=r[o],c=u.instance,d=u.currentTarget,u=u.listener,c!==i&&s.isPropagationStopped())break e;Bp(s,u,d),i=c}}}if(Ha)throw t=Pc,Ha=!1,Pc=null,t}function Se(t,e){var n=e[$c];n===void 0&&(n=e[$c]=new Set);var r=t+"__bubble";n.has(r)||(Zy(e,t,2,!1),n.add(r))}function Gu(t,e,n){var r=0;e&&(r|=4),Zy(n,t,r,e)}var ca="_reactListening"+Math.random().toString(36).slice(2);function po(t){if(!t[ca]){t[ca]=!0,oy.forEach(function(n){n!=="selectionchange"&&(v1.has(n)||Gu(n,!1,t),Gu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ca]||(e[ca]=!0,Gu("selectionchange",!1,e))}}function Zy(t,e,n,r){switch(Ly(e)){case 1:var s=kw;break;case 4:s=Pw;break;default:s=Jd}n=s.bind(null,e,n,t),s=void 0,!kc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Qu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;u!==null;){if(o=zr(u),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}u=u.parentNode}}r=r.return}Ey(function(){var d=i,f=Qd(n),m=[];e:{var g=Yy.get(t);if(g!==void 0){var w=eh,_=t;switch(t){case"keypress":if(ba(n)===0)break e;case"keydown":case"keyup":w=Qw;break;case"focusin":_="focus",w=Bu;break;case"focusout":_="blur",w=Bu;break;case"beforeblur":case"afterblur":w=Bu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=bp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Lw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=Yw;break;case Gy:case Qy:case Ky:w=Fw;break;case Xy:w=Zw;break;case"scroll":w=Dw;break;case"wheel":w=t1;break;case"copy":case"cut":case"paste":w=Bw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Rp}var b=(e&4)!==0,j=!b&&t==="scroll",C=b?g!==null?g+"Capture":null:g;b=[];for(var E=d,N;E!==null;){N=E;var P=N.stateNode;if(N.tag===5&&P!==null&&(N=P,C!==null&&(P=ao(E,C),P!=null&&b.push(mo(E,P,N)))),j)break;E=E.return}0<b.length&&(g=new w(g,_,null,n,f),m.push({event:g,listeners:b}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",g&&n!==jc&&(_=n.relatedTarget||n.fromElement)&&(zr(_)||_[Ln]))break e;if((w||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,w?(_=n.relatedTarget||n.toElement,w=d,_=_?zr(_):null,_!==null&&(j=ss(_),_!==j||_.tag!==5&&_.tag!==6)&&(_=null)):(w=null,_=d),w!==_)){if(b=bp,P="onMouseLeave",C="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(b=Rp,P="onPointerLeave",C="onPointerEnter",E="pointer"),j=w==null?g:Ts(w),N=_==null?g:Ts(_),g=new b(P,E+"leave",w,n,f),g.target=j,g.relatedTarget=N,P=null,zr(f)===d&&(b=new b(C,E+"enter",_,n,f),b.target=N,b.relatedTarget=j,P=b),j=P,w&&_)t:{for(b=w,C=_,E=0,N=b;N;N=hs(N))E++;for(N=0,P=C;P;P=hs(P))N++;for(;0<E-N;)b=hs(b),E--;for(;0<N-E;)C=hs(C),N--;for(;E--;){if(b===C||C!==null&&b===C.alternate)break t;b=hs(b),C=hs(C)}b=null}else b=null;w!==null&&zp(m,g,w,b,!1),_!==null&&j!==null&&zp(m,j,_,b,!0)}}e:{if(g=d?Ts(d):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var O=l1;else if(Dp(g))if(zy)O=h1;else{O=c1;var k=u1}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(O=d1);if(O&&(O=O(t,d))){By(m,O,n,f);break e}k&&k(t,g,d),t==="focusout"&&(k=g._wrapperState)&&k.controlled&&g.type==="number"&&Cc(g,"number",g.value)}switch(k=d?Ts(d):window,t){case"focusin":(Dp(k)||k.contentEditable==="true")&&(ws=k,Mc=d,Ki=null);break;case"focusout":Ki=Mc=ws=null;break;case"mousedown":Oc=!0;break;case"contextmenu":case"mouseup":case"dragend":Oc=!1,Fp(m,n,f);break;case"selectionchange":if(m1)break;case"keydown":case"keyup":Fp(m,n,f)}var y;if(nh)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else _s?Fy(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(Oy&&n.locale!=="ko"&&(_s||v!=="onCompositionStart"?v==="onCompositionEnd"&&_s&&(y=My()):(tr=f,Zd="value"in tr?tr.value:tr.textContent,_s=!0)),k=Xa(d,v),0<k.length&&(v=new jp(v,t,null,n,f),m.push({event:v,listeners:k}),y?v.data=y:(y=Uy(n),y!==null&&(v.data=y)))),(y=r1?s1(t,n):i1(t,n))&&(d=Xa(d,"onBeforeInput"),0<d.length&&(f=new jp("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=y))}Jy(m,e)})}function mo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xa(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ao(t,n),i!=null&&r.unshift(mo(t,i,s)),i=ao(t,e),i!=null&&r.push(mo(t,i,s))),t=t.return}return r}function hs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function zp(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&d!==null&&(u=d,s?(c=ao(n,i),c!=null&&o.unshift(mo(n,c,u))):s||(c=ao(n,i),c!=null&&o.push(mo(n,c,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var x1=/\r\n?/g,_1=/\u0000|\uFFFD/g;function $p(t){return(typeof t=="string"?t:""+t).replace(x1,`
`).replace(_1,"")}function da(t,e,n){if(e=$p(e),$p(t)!==e&&n)throw Error(z(425))}function Ya(){}var Fc=null,Uc=null;function Bc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zc=typeof setTimeout=="function"?setTimeout:void 0,w1=typeof clearTimeout=="function"?clearTimeout:void 0,qp=typeof Promise=="function"?Promise:void 0,E1=typeof queueMicrotask=="function"?queueMicrotask:typeof qp<"u"?function(t){return qp.resolve(null).then(t).catch(T1)}:zc;function T1(t){setTimeout(function(){throw t})}function Ku(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),co(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);co(e)}function lr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Hp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ei=Math.random().toString(36).slice(2),yn="__reactFiber$"+ei,go="__reactProps$"+ei,Ln="__reactContainer$"+ei,$c="__reactEvents$"+ei,S1="__reactListeners$"+ei,C1="__reactHandles$"+ei;function zr(t){var e=t[yn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ln]||n[yn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Hp(t);t!==null;){if(n=t[yn])return n;t=Hp(t)}return e}t=n,n=t.parentNode}return null}function Lo(t){return t=t[yn]||t[Ln],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ts(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Ll(t){return t[go]||null}var qc=[],Ss=-1;function Ar(t){return{current:t}}function Ne(t){0>Ss||(t.current=qc[Ss],qc[Ss]=null,Ss--)}function Ee(t,e){Ss++,qc[Ss]=t.current,t.current=e}var _r={},_t=Ar(_r),kt=Ar(!1),Kr=_r;function Us(t,e){var n=t.type.contextTypes;if(!n)return _r;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Pt(t){return t=t.childContextTypes,t!=null}function Ja(){Ne(kt),Ne(_t)}function Wp(t,e,n){if(_t.current!==_r)throw Error(z(168));Ee(_t,e),Ee(kt,n)}function e0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,uw(t)||"Unknown",s));return Pe({},n,r)}function Za(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_r,Kr=_t.current,Ee(_t,t),Ee(kt,kt.current),!0}function Gp(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=e0(t,e,Kr),r.__reactInternalMemoizedMergedChildContext=t,Ne(kt),Ne(_t),Ee(_t,t)):Ne(kt),Ee(kt,n)}var jn=null,Ml=!1,Xu=!1;function t0(t){jn===null?jn=[t]:jn.push(t)}function I1(t){Ml=!0,t0(t)}function br(){if(!Xu&&jn!==null){Xu=!0;var t=0,e=ve;try{var n=jn;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}jn=null,Ml=!1}catch(s){throw jn!==null&&(jn=jn.slice(t+1)),Iy(Kd,br),s}finally{ve=e,Xu=!1}}return null}var Cs=[],Is=0,el=null,tl=0,Qt=[],Kt=0,Xr=null,Rn=1,kn="";function Fr(t,e){Cs[Is++]=tl,Cs[Is++]=el,el=t,tl=e}function n0(t,e,n){Qt[Kt++]=Rn,Qt[Kt++]=kn,Qt[Kt++]=Xr,Xr=t;var r=Rn;t=kn;var s=32-an(r)-1;r&=~(1<<s),n+=1;var i=32-an(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Rn=1<<32-an(e)+s|n<<s|r,kn=i+t}else Rn=1<<i|n<<s|r,kn=t}function sh(t){t.return!==null&&(Fr(t,1),n0(t,1,0))}function ih(t){for(;t===el;)el=Cs[--Is],Cs[Is]=null,tl=Cs[--Is],Cs[Is]=null;for(;t===Xr;)Xr=Qt[--Kt],Qt[Kt]=null,kn=Qt[--Kt],Qt[Kt]=null,Rn=Qt[--Kt],Qt[Kt]=null}var Bt=null,Ft=null,be=!1,on=null;function r0(t,e){var n=Yt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Qp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Bt=t,Ft=lr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Bt=t,Ft=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Xr!==null?{id:Rn,overflow:kn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Bt=t,Ft=null,!0):!1;default:return!1}}function Hc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Wc(t){if(be){var e=Ft;if(e){var n=e;if(!Qp(t,e)){if(Hc(t))throw Error(z(418));e=lr(n.nextSibling);var r=Bt;e&&Qp(t,e)?r0(r,n):(t.flags=t.flags&-4097|2,be=!1,Bt=t)}}else{if(Hc(t))throw Error(z(418));t.flags=t.flags&-4097|2,be=!1,Bt=t}}}function Kp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Bt=t}function ha(t){if(t!==Bt)return!1;if(!be)return Kp(t),be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Bc(t.type,t.memoizedProps)),e&&(e=Ft)){if(Hc(t))throw s0(),Error(z(418));for(;e;)r0(t,e),e=lr(e.nextSibling)}if(Kp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ft=lr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ft=null}}else Ft=Bt?lr(t.stateNode.nextSibling):null;return!0}function s0(){for(var t=Ft;t;)t=lr(t.nextSibling)}function Bs(){Ft=Bt=null,be=!1}function oh(t){on===null?on=[t]:on.push(t)}var N1=zn.ReactCurrentBatchConfig;function Pi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var u=s.refs;o===null?delete u[i]:u[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function fa(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Xp(t){var e=t._init;return e(t._payload)}function i0(t){function e(C,E){if(t){var N=C.deletions;N===null?(C.deletions=[E],C.flags|=16):N.push(E)}}function n(C,E){if(!t)return null;for(;E!==null;)e(C,E),E=E.sibling;return null}function r(C,E){for(C=new Map;E!==null;)E.key!==null?C.set(E.key,E):C.set(E.index,E),E=E.sibling;return C}function s(C,E){return C=hr(C,E),C.index=0,C.sibling=null,C}function i(C,E,N){return C.index=N,t?(N=C.alternate,N!==null?(N=N.index,N<E?(C.flags|=2,E):N):(C.flags|=2,E)):(C.flags|=1048576,E)}function o(C){return t&&C.alternate===null&&(C.flags|=2),C}function u(C,E,N,P){return E===null||E.tag!==6?(E=rc(N,C.mode,P),E.return=C,E):(E=s(E,N),E.return=C,E)}function c(C,E,N,P){var O=N.type;return O===xs?f(C,E,N.props.children,P,N.key):E!==null&&(E.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Yn&&Xp(O)===E.type)?(P=s(E,N.props),P.ref=Pi(C,E,N),P.return=C,P):(P=La(N.type,N.key,N.props,null,C.mode,P),P.ref=Pi(C,E,N),P.return=C,P)}function d(C,E,N,P){return E===null||E.tag!==4||E.stateNode.containerInfo!==N.containerInfo||E.stateNode.implementation!==N.implementation?(E=sc(N,C.mode,P),E.return=C,E):(E=s(E,N.children||[]),E.return=C,E)}function f(C,E,N,P,O){return E===null||E.tag!==7?(E=Gr(N,C.mode,P,O),E.return=C,E):(E=s(E,N),E.return=C,E)}function m(C,E,N){if(typeof E=="string"&&E!==""||typeof E=="number")return E=rc(""+E,C.mode,N),E.return=C,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case na:return N=La(E.type,E.key,E.props,null,C.mode,N),N.ref=Pi(C,null,E),N.return=C,N;case vs:return E=sc(E,C.mode,N),E.return=C,E;case Yn:var P=E._init;return m(C,P(E._payload),N)}if(Mi(E)||Ai(E))return E=Gr(E,C.mode,N,null),E.return=C,E;fa(C,E)}return null}function g(C,E,N,P){var O=E!==null?E.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return O!==null?null:u(C,E,""+N,P);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case na:return N.key===O?c(C,E,N,P):null;case vs:return N.key===O?d(C,E,N,P):null;case Yn:return O=N._init,g(C,E,O(N._payload),P)}if(Mi(N)||Ai(N))return O!==null?null:f(C,E,N,P,null);fa(C,N)}return null}function w(C,E,N,P,O){if(typeof P=="string"&&P!==""||typeof P=="number")return C=C.get(N)||null,u(E,C,""+P,O);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case na:return C=C.get(P.key===null?N:P.key)||null,c(E,C,P,O);case vs:return C=C.get(P.key===null?N:P.key)||null,d(E,C,P,O);case Yn:var k=P._init;return w(C,E,N,k(P._payload),O)}if(Mi(P)||Ai(P))return C=C.get(N)||null,f(E,C,P,O,null);fa(E,P)}return null}function _(C,E,N,P){for(var O=null,k=null,y=E,v=E=0,T=null;y!==null&&v<N.length;v++){y.index>v?(T=y,y=null):T=y.sibling;var A=g(C,y,N[v],P);if(A===null){y===null&&(y=T);break}t&&y&&A.alternate===null&&e(C,y),E=i(A,E,v),k===null?O=A:k.sibling=A,k=A,y=T}if(v===N.length)return n(C,y),be&&Fr(C,v),O;if(y===null){for(;v<N.length;v++)y=m(C,N[v],P),y!==null&&(E=i(y,E,v),k===null?O=y:k.sibling=y,k=y);return be&&Fr(C,v),O}for(y=r(C,y);v<N.length;v++)T=w(y,C,v,N[v],P),T!==null&&(t&&T.alternate!==null&&y.delete(T.key===null?v:T.key),E=i(T,E,v),k===null?O=T:k.sibling=T,k=T);return t&&y.forEach(function(I){return e(C,I)}),be&&Fr(C,v),O}function b(C,E,N,P){var O=Ai(N);if(typeof O!="function")throw Error(z(150));if(N=O.call(N),N==null)throw Error(z(151));for(var k=O=null,y=E,v=E=0,T=null,A=N.next();y!==null&&!A.done;v++,A=N.next()){y.index>v?(T=y,y=null):T=y.sibling;var I=g(C,y,A.value,P);if(I===null){y===null&&(y=T);break}t&&y&&I.alternate===null&&e(C,y),E=i(I,E,v),k===null?O=I:k.sibling=I,k=I,y=T}if(A.done)return n(C,y),be&&Fr(C,v),O;if(y===null){for(;!A.done;v++,A=N.next())A=m(C,A.value,P),A!==null&&(E=i(A,E,v),k===null?O=A:k.sibling=A,k=A);return be&&Fr(C,v),O}for(y=r(C,y);!A.done;v++,A=N.next())A=w(y,C,v,A.value,P),A!==null&&(t&&A.alternate!==null&&y.delete(A.key===null?v:A.key),E=i(A,E,v),k===null?O=A:k.sibling=A,k=A);return t&&y.forEach(function(R){return e(C,R)}),be&&Fr(C,v),O}function j(C,E,N,P){if(typeof N=="object"&&N!==null&&N.type===xs&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case na:e:{for(var O=N.key,k=E;k!==null;){if(k.key===O){if(O=N.type,O===xs){if(k.tag===7){n(C,k.sibling),E=s(k,N.props.children),E.return=C,C=E;break e}}else if(k.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Yn&&Xp(O)===k.type){n(C,k.sibling),E=s(k,N.props),E.ref=Pi(C,k,N),E.return=C,C=E;break e}n(C,k);break}else e(C,k);k=k.sibling}N.type===xs?(E=Gr(N.props.children,C.mode,P,N.key),E.return=C,C=E):(P=La(N.type,N.key,N.props,null,C.mode,P),P.ref=Pi(C,E,N),P.return=C,C=P)}return o(C);case vs:e:{for(k=N.key;E!==null;){if(E.key===k)if(E.tag===4&&E.stateNode.containerInfo===N.containerInfo&&E.stateNode.implementation===N.implementation){n(C,E.sibling),E=s(E,N.children||[]),E.return=C,C=E;break e}else{n(C,E);break}else e(C,E);E=E.sibling}E=sc(N,C.mode,P),E.return=C,C=E}return o(C);case Yn:return k=N._init,j(C,E,k(N._payload),P)}if(Mi(N))return _(C,E,N,P);if(Ai(N))return b(C,E,N,P);fa(C,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,E!==null&&E.tag===6?(n(C,E.sibling),E=s(E,N),E.return=C,C=E):(n(C,E),E=rc(N,C.mode,P),E.return=C,C=E),o(C)):n(C,E)}return j}var zs=i0(!0),o0=i0(!1),nl=Ar(null),rl=null,Ns=null,ah=null;function lh(){ah=Ns=rl=null}function uh(t){var e=nl.current;Ne(nl),t._currentValue=e}function Gc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ds(t,e){rl=t,ah=Ns=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rt=!0),t.firstContext=null)}function Zt(t){var e=t._currentValue;if(ah!==t)if(t={context:t,memoizedValue:e,next:null},Ns===null){if(rl===null)throw Error(z(308));Ns=t,rl.dependencies={lanes:0,firstContext:t}}else Ns=Ns.next=t;return e}var $r=null;function ch(t){$r===null?$r=[t]:$r.push(t)}function a0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,ch(e)):(n.next=s.next,s.next=n),e.interleaved=n,Mn(t,r)}function Mn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Jn=!1;function dh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function l0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Dn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ur(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Mn(t,n)}return s=r.interleaved,s===null?(e.next=e,ch(r)):(e.next=s.next,s.next=e),r.interleaved=e,Mn(t,n)}function ja(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xd(t,n)}}function Yp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function sl(t,e,n,r){var s=t.updateQueue;Jn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var c=u,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,u=f.lastBaseUpdate,u!==o&&(u===null?f.firstBaseUpdate=d:u.next=d,f.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;o=0,f=d=c=null,u=i;do{var g=u.lane,w=u.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:w,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var _=t,b=u;switch(g=e,w=n,b.tag){case 1:if(_=b.payload,typeof _=="function"){m=_.call(w,m,g);break e}m=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=b.payload,g=typeof _=="function"?_.call(w,m,g):_,g==null)break e;m=Pe({},m,g);break e;case 2:Jn=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[u]:g.push(u))}else w={eventTime:w,lane:g,tag:u.tag,payload:u.payload,callback:u.callback,next:null},f===null?(d=f=w,c=m):f=f.next=w,o|=g;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;g=u,u=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(c=m),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Jr|=o,t.lanes=o,t.memoizedState=m}}function Jp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var Mo={},_n=Ar(Mo),yo=Ar(Mo),vo=Ar(Mo);function qr(t){if(t===Mo)throw Error(z(174));return t}function hh(t,e){switch(Ee(vo,e),Ee(yo,t),Ee(_n,Mo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Nc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Nc(e,t)}Ne(_n),Ee(_n,e)}function $s(){Ne(_n),Ne(yo),Ne(vo)}function u0(t){qr(vo.current);var e=qr(_n.current),n=Nc(e,t.type);e!==n&&(Ee(yo,t),Ee(_n,n))}function fh(t){yo.current===t&&(Ne(_n),Ne(yo))}var Re=Ar(0);function il(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yu=[];function ph(){for(var t=0;t<Yu.length;t++)Yu[t]._workInProgressVersionPrimary=null;Yu.length=0}var Ra=zn.ReactCurrentDispatcher,Ju=zn.ReactCurrentBatchConfig,Yr=0,ke=null,Ye=null,rt=null,ol=!1,Xi=!1,xo=0,A1=0;function pt(){throw Error(z(321))}function mh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!un(t[n],e[n]))return!1;return!0}function gh(t,e,n,r,s,i){if(Yr=i,ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ra.current=t===null||t.memoizedState===null?k1:P1,t=n(r,s),Xi){i=0;do{if(Xi=!1,xo=0,25<=i)throw Error(z(301));i+=1,rt=Ye=null,e.updateQueue=null,Ra.current=D1,t=n(r,s)}while(Xi)}if(Ra.current=al,e=Ye!==null&&Ye.next!==null,Yr=0,rt=Ye=ke=null,ol=!1,e)throw Error(z(300));return t}function yh(){var t=xo!==0;return xo=0,t}function mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?ke.memoizedState=rt=t:rt=rt.next=t,rt}function en(){if(Ye===null){var t=ke.alternate;t=t!==null?t.memoizedState:null}else t=Ye.next;var e=rt===null?ke.memoizedState:rt.next;if(e!==null)rt=e,Ye=t;else{if(t===null)throw Error(z(310));Ye=t,t={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},rt===null?ke.memoizedState=rt=t:rt=rt.next=t}return rt}function _o(t,e){return typeof e=="function"?e(t):e}function Zu(t){var e=en(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=Ye,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var u=o=null,c=null,d=i;do{var f=d.lane;if((Yr&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=m,o=r):c=c.next=m,ke.lanes|=f,Jr|=f}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=u,un(r,e.memoizedState)||(Rt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ke.lanes|=i,Jr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ec(t){var e=en(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);un(i,e.memoizedState)||(Rt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function c0(){}function d0(t,e){var n=ke,r=en(),s=e(),i=!un(r.memoizedState,s);if(i&&(r.memoizedState=s,Rt=!0),r=r.queue,vh(p0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||rt!==null&&rt.memoizedState.tag&1){if(n.flags|=2048,wo(9,f0.bind(null,n,r,s,e),void 0,null),st===null)throw Error(z(349));Yr&30||h0(n,e,s)}return s}function h0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function f0(t,e,n,r){e.value=n,e.getSnapshot=r,m0(e)&&g0(t)}function p0(t,e,n){return n(function(){m0(e)&&g0(t)})}function m0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!un(t,n)}catch{return!0}}function g0(t){var e=Mn(t,1);e!==null&&ln(e,t,1,-1)}function Zp(t){var e=mn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:t},e.queue=t,t=t.dispatch=R1.bind(null,ke,t),[e.memoizedState,t]}function wo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function y0(){return en().memoizedState}function ka(t,e,n,r){var s=mn();ke.flags|=t,s.memoizedState=wo(1|e,n,void 0,r===void 0?null:r)}function Ol(t,e,n,r){var s=en();r=r===void 0?null:r;var i=void 0;if(Ye!==null){var o=Ye.memoizedState;if(i=o.destroy,r!==null&&mh(r,o.deps)){s.memoizedState=wo(e,n,i,r);return}}ke.flags|=t,s.memoizedState=wo(1|e,n,i,r)}function em(t,e){return ka(8390656,8,t,e)}function vh(t,e){return Ol(2048,8,t,e)}function v0(t,e){return Ol(4,2,t,e)}function x0(t,e){return Ol(4,4,t,e)}function _0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function w0(t,e,n){return n=n!=null?n.concat([t]):null,Ol(4,4,_0.bind(null,e,t),n)}function xh(){}function E0(t,e){var n=en();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function T0(t,e){var n=en();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function S0(t,e,n){return Yr&21?(un(n,e)||(n=by(),ke.lanes|=n,Jr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rt=!0),t.memoizedState=n)}function b1(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=Ju.transition;Ju.transition={};try{t(!1),e()}finally{ve=n,Ju.transition=r}}function C0(){return en().memoizedState}function j1(t,e,n){var r=dr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},I0(t))N0(e,n);else if(n=a0(t,e,n,r),n!==null){var s=St();ln(n,t,r,s),A0(n,e,r)}}function R1(t,e,n){var r=dr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(I0(t))N0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,u=i(o,n);if(s.hasEagerState=!0,s.eagerState=u,un(u,o)){var c=e.interleaved;c===null?(s.next=s,ch(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=a0(t,e,s,r),n!==null&&(s=St(),ln(n,t,r,s),A0(n,e,r))}}function I0(t){var e=t.alternate;return t===ke||e!==null&&e===ke}function N0(t,e){Xi=ol=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function A0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xd(t,n)}}var al={readContext:Zt,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},k1={readContext:Zt,useCallback:function(t,e){return mn().memoizedState=[t,e===void 0?null:e],t},useContext:Zt,useEffect:em,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ka(4194308,4,_0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ka(4194308,4,t,e)},useInsertionEffect:function(t,e){return ka(4,2,t,e)},useMemo:function(t,e){var n=mn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=mn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=j1.bind(null,ke,t),[r.memoizedState,t]},useRef:function(t){var e=mn();return t={current:t},e.memoizedState=t},useState:Zp,useDebugValue:xh,useDeferredValue:function(t){return mn().memoizedState=t},useTransition:function(){var t=Zp(!1),e=t[0];return t=b1.bind(null,t[1]),mn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ke,s=mn();if(be){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),st===null)throw Error(z(349));Yr&30||h0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,em(p0.bind(null,r,i,t),[t]),r.flags|=2048,wo(9,f0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=mn(),e=st.identifierPrefix;if(be){var n=kn,r=Rn;n=(r&~(1<<32-an(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=A1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},P1={readContext:Zt,useCallback:E0,useContext:Zt,useEffect:vh,useImperativeHandle:w0,useInsertionEffect:v0,useLayoutEffect:x0,useMemo:T0,useReducer:Zu,useRef:y0,useState:function(){return Zu(_o)},useDebugValue:xh,useDeferredValue:function(t){var e=en();return S0(e,Ye.memoizedState,t)},useTransition:function(){var t=Zu(_o)[0],e=en().memoizedState;return[t,e]},useMutableSource:c0,useSyncExternalStore:d0,useId:C0,unstable_isNewReconciler:!1},D1={readContext:Zt,useCallback:E0,useContext:Zt,useEffect:vh,useImperativeHandle:w0,useInsertionEffect:v0,useLayoutEffect:x0,useMemo:T0,useReducer:ec,useRef:y0,useState:function(){return ec(_o)},useDebugValue:xh,useDeferredValue:function(t){var e=en();return Ye===null?e.memoizedState=t:S0(e,Ye.memoizedState,t)},useTransition:function(){var t=ec(_o)[0],e=en().memoizedState;return[t,e]},useMutableSource:c0,useSyncExternalStore:d0,useId:C0,unstable_isNewReconciler:!1};function rn(t,e){if(t&&t.defaultProps){e=Pe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Qc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Fl={isMounted:function(t){return(t=t._reactInternals)?ss(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=St(),s=dr(t),i=Dn(r,s);i.payload=e,n!=null&&(i.callback=n),e=ur(t,i,s),e!==null&&(ln(e,t,s,r),ja(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=St(),s=dr(t),i=Dn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ur(t,i,s),e!==null&&(ln(e,t,s,r),ja(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=St(),r=dr(t),s=Dn(n,r);s.tag=2,e!=null&&(s.callback=e),e=ur(t,s,r),e!==null&&(ln(e,t,r,n),ja(e,t,r))}};function tm(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!fo(n,r)||!fo(s,i):!0}function b0(t,e,n){var r=!1,s=_r,i=e.contextType;return typeof i=="object"&&i!==null?i=Zt(i):(s=Pt(e)?Kr:_t.current,r=e.contextTypes,i=(r=r!=null)?Us(t,s):_r),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Fl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function nm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Fl.enqueueReplaceState(e,e.state,null)}function Kc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},dh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Zt(i):(i=Pt(e)?Kr:_t.current,s.context=Us(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Qc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Fl.enqueueReplaceState(s,s.state,null),sl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function qs(t,e){try{var n="",r=e;do n+=lw(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function tc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Xc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var V1=typeof WeakMap=="function"?WeakMap:Map;function j0(t,e,n){n=Dn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ul||(ul=!0,od=r),Xc(t,e)},n}function R0(t,e,n){n=Dn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Xc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Xc(t,e),typeof r!="function"&&(cr===null?cr=new Set([this]):cr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function rm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new V1;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=K1.bind(null,t,e,n),e.then(t,t))}function sm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function im(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Dn(-1,1),e.tag=2,ur(n,e,1))),n.lanes|=1),t)}var L1=zn.ReactCurrentOwner,Rt=!1;function Tt(t,e,n,r){e.child=t===null?o0(e,null,n,r):zs(e,t.child,n,r)}function om(t,e,n,r,s){n=n.render;var i=e.ref;return Ds(e,s),r=gh(t,e,n,r,i,s),n=yh(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,On(t,e,s)):(be&&n&&sh(e),e.flags|=1,Tt(t,e,r,s),e.child)}function am(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Nh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,k0(t,e,i,r,s)):(t=La(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:fo,n(o,r)&&t.ref===e.ref)return On(t,e,s)}return e.flags|=1,t=hr(i,r),t.ref=e.ref,t.return=e,e.child=t}function k0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(fo(i,r)&&t.ref===e.ref)if(Rt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Rt=!0);else return e.lanes=t.lanes,On(t,e,s)}return Yc(t,e,n,r,s)}function P0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(bs,Ot),Ot|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ee(bs,Ot),Ot|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ee(bs,Ot),Ot|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ee(bs,Ot),Ot|=r;return Tt(t,e,s,n),e.child}function D0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Yc(t,e,n,r,s){var i=Pt(n)?Kr:_t.current;return i=Us(e,i),Ds(e,s),n=gh(t,e,n,r,i,s),r=yh(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,On(t,e,s)):(be&&r&&sh(e),e.flags|=1,Tt(t,e,n,s),e.child)}function lm(t,e,n,r,s){if(Pt(n)){var i=!0;Za(e)}else i=!1;if(Ds(e,s),e.stateNode===null)Pa(t,e),b0(e,n,r),Kc(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Zt(d):(d=Pt(n)?Kr:_t.current,d=Us(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||c!==d)&&nm(e,o,r,d),Jn=!1;var g=e.memoizedState;o.state=g,sl(e,r,o,s),c=e.memoizedState,u!==r||g!==c||kt.current||Jn?(typeof f=="function"&&(Qc(e,n,f,r),c=e.memoizedState),(u=Jn||tm(e,n,u,r,g,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,l0(t,e),u=e.memoizedProps,d=e.type===e.elementType?u:rn(e.type,u),o.props=d,m=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Zt(c):(c=Pt(n)?Kr:_t.current,c=Us(e,c));var w=n.getDerivedStateFromProps;(f=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==m||g!==c)&&nm(e,o,r,c),Jn=!1,g=e.memoizedState,o.state=g,sl(e,r,o,s);var _=e.memoizedState;u!==m||g!==_||kt.current||Jn?(typeof w=="function"&&(Qc(e,n,w,r),_=e.memoizedState),(d=Jn||tm(e,n,d,r,g,_,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Jc(t,e,n,r,i,s)}function Jc(t,e,n,r,s,i){D0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Gp(e,n,!1),On(t,e,i);r=e.stateNode,L1.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=zs(e,t.child,null,i),e.child=zs(e,null,u,i)):Tt(t,e,u,i),e.memoizedState=r.state,s&&Gp(e,n,!0),e.child}function V0(t){var e=t.stateNode;e.pendingContext?Wp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Wp(t,e.context,!1),hh(t,e.containerInfo)}function um(t,e,n,r,s){return Bs(),oh(s),e.flags|=256,Tt(t,e,n,r),e.child}var Zc={dehydrated:null,treeContext:null,retryLane:0};function ed(t){return{baseLanes:t,cachePool:null,transitions:null}}function L0(t,e,n){var r=e.pendingProps,s=Re.current,i=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ee(Re,s&1),t===null)return Wc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=zl(o,r,0,null),t=Gr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ed(n),e.memoizedState=Zc,t):_h(e,o));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return M1(t,e,o,r,u,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,u=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=hr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=hr(u,i):(i=Gr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?ed(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Zc,r}return i=t.child,t=i.sibling,r=hr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function _h(t,e){return e=zl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pa(t,e,n,r){return r!==null&&oh(r),zs(e,t.child,null,n),t=_h(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function M1(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=tc(Error(z(422))),pa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=zl({mode:"visible",children:r.children},s,0,null),i=Gr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&zs(e,t.child,null,o),e.child.memoizedState=ed(o),e.memoizedState=Zc,i);if(!(e.mode&1))return pa(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error(z(419)),r=tc(i,r,void 0),pa(t,e,o,r)}if(u=(o&t.childLanes)!==0,Rt||u){if(r=st,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Mn(t,s),ln(r,t,s,-1))}return Ih(),r=tc(Error(z(421))),pa(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=X1.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ft=lr(s.nextSibling),Bt=e,be=!0,on=null,t!==null&&(Qt[Kt++]=Rn,Qt[Kt++]=kn,Qt[Kt++]=Xr,Rn=t.id,kn=t.overflow,Xr=e),e=_h(e,r.children),e.flags|=4096,e)}function cm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Gc(t.return,e,n)}function nc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function M0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Tt(t,e,r.children,n),r=Re.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&cm(t,n,e);else if(t.tag===19)cm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ee(Re,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&il(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),nc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&il(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}nc(e,!0,n,null,i);break;case"together":nc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Pa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function On(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Jr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=hr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=hr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function O1(t,e,n){switch(e.tag){case 3:V0(e),Bs();break;case 5:u0(e);break;case 1:Pt(e.type)&&Za(e);break;case 4:hh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ee(nl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ee(Re,Re.current&1),e.flags|=128,null):n&e.child.childLanes?L0(t,e,n):(Ee(Re,Re.current&1),t=On(t,e,n),t!==null?t.sibling:null);Ee(Re,Re.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return M0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ee(Re,Re.current),r)break;return null;case 22:case 23:return e.lanes=0,P0(t,e,n)}return On(t,e,n)}var O0,td,F0,U0;O0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};td=function(){};F0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,qr(_n.current);var i=null;switch(n){case"input":s=Tc(t,s),r=Tc(t,r),i=[];break;case"select":s=Pe({},s,{value:void 0}),r=Pe({},r,{value:void 0}),i=[];break;case"textarea":s=Ic(t,s),r=Ic(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ya)}Ac(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var u=s[d];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(io.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(u=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(io.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Se("scroll",t),i||u===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};U0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Di(t,e){if(!be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function F1(t,e,n){var r=e.pendingProps;switch(ih(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(e),null;case 1:return Pt(e.type)&&Ja(),mt(e),null;case 3:return r=e.stateNode,$s(),Ne(kt),Ne(_t),ph(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ha(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,on!==null&&(ud(on),on=null))),td(t,e),mt(e),null;case 5:fh(e);var s=qr(vo.current);if(n=e.type,t!==null&&e.stateNode!=null)F0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return mt(e),null}if(t=qr(_n.current),ha(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[yn]=e,r[go]=i,t=(e.mode&1)!==0,n){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(s=0;s<Fi.length;s++)Se(Fi[s],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":xp(r,i),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Se("invalid",r);break;case"textarea":wp(r,i),Se("invalid",r)}Ac(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var u=i[o];o==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&da(r.textContent,u,t),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&da(r.textContent,u,t),s=["children",""+u]):io.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&Se("scroll",r)}switch(n){case"input":ra(r),_p(r,i,!0);break;case"textarea":ra(r),Ep(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ya)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=py(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[yn]=e,t[go]=r,O0(t,e,!1,!1),e.stateNode=t;e:{switch(o=bc(n,r),n){case"dialog":Se("cancel",t),Se("close",t),s=r;break;case"iframe":case"object":case"embed":Se("load",t),s=r;break;case"video":case"audio":for(s=0;s<Fi.length;s++)Se(Fi[s],t);s=r;break;case"source":Se("error",t),s=r;break;case"img":case"image":case"link":Se("error",t),Se("load",t),s=r;break;case"details":Se("toggle",t),s=r;break;case"input":xp(t,r),s=Tc(t,r),Se("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Pe({},r,{value:void 0}),Se("invalid",t);break;case"textarea":wp(t,r),s=Ic(t,r),Se("invalid",t);break;default:s=r}Ac(n,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?yy(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&my(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&oo(t,c):typeof c=="number"&&oo(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(io.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Se("scroll",t):c!=null&&qd(t,i,c,o))}switch(n){case"input":ra(t),_p(t,r,!1);break;case"textarea":ra(t),Ep(t);break;case"option":r.value!=null&&t.setAttribute("value",""+xr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?js(t,!!r.multiple,i,!1):r.defaultValue!=null&&js(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ya)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mt(e),null;case 6:if(t&&e.stateNode!=null)U0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=qr(vo.current),qr(_n.current),ha(e)){if(r=e.stateNode,n=e.memoizedProps,r[yn]=e,(i=r.nodeValue!==n)&&(t=Bt,t!==null))switch(t.tag){case 3:da(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&da(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yn]=e,e.stateNode=r}return mt(e),null;case 13:if(Ne(Re),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(be&&Ft!==null&&e.mode&1&&!(e.flags&128))s0(),Bs(),e.flags|=98560,i=!1;else if(i=ha(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[yn]=e}else Bs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mt(e),i=!1}else on!==null&&(ud(on),on=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Re.current&1?Ze===0&&(Ze=3):Ih())),e.updateQueue!==null&&(e.flags|=4),mt(e),null);case 4:return $s(),td(t,e),t===null&&po(e.stateNode.containerInfo),mt(e),null;case 10:return uh(e.type._context),mt(e),null;case 17:return Pt(e.type)&&Ja(),mt(e),null;case 19:if(Ne(Re),i=e.memoizedState,i===null)return mt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Di(i,!1);else{if(Ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=il(t),o!==null){for(e.flags|=128,Di(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ee(Re,Re.current&1|2),e.child}t=t.sibling}i.tail!==null&&Be()>Hs&&(e.flags|=128,r=!0,Di(i,!1),e.lanes=4194304)}else{if(!r)if(t=il(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Di(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!be)return mt(e),null}else 2*Be()-i.renderingStartTime>Hs&&n!==1073741824&&(e.flags|=128,r=!0,Di(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Be(),e.sibling=null,n=Re.current,Ee(Re,r?n&1|2:n&1),e):(mt(e),null);case 22:case 23:return Ch(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ot&1073741824&&(mt(e),e.subtreeFlags&6&&(e.flags|=8192)):mt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function U1(t,e){switch(ih(e),e.tag){case 1:return Pt(e.type)&&Ja(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return $s(),Ne(kt),Ne(_t),ph(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return fh(e),null;case 13:if(Ne(Re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Bs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ne(Re),null;case 4:return $s(),null;case 10:return uh(e.type._context),null;case 22:case 23:return Ch(),null;case 24:return null;default:return null}}var ma=!1,vt=!1,B1=typeof WeakSet=="function"?WeakSet:Set,Q=null;function As(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Oe(t,e,r)}else n.current=null}function nd(t,e,n){try{n()}catch(r){Oe(t,e,r)}}var dm=!1;function z1(t,e){if(Fc=Qa,t=Hy(),rh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,u=-1,c=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var w;m!==n||s!==0&&m.nodeType!==3||(u=o+s),m!==i||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(w=m.firstChild)!==null;)g=m,m=w;for(;;){if(m===t)break t;if(g===n&&++d===s&&(u=o),g===i&&++f===r&&(c=o),(w=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=w}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Uc={focusedElem:t,selectionRange:n},Qa=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var b=_.memoizedProps,j=_.memoizedState,C=e.stateNode,E=C.getSnapshotBeforeUpdate(e.elementType===e.type?b:rn(e.type,b),j);C.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(P){Oe(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return _=dm,dm=!1,_}function Yi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&nd(e,n,i)}s=s.next}while(s!==r)}}function Ul(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function rd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function B0(t){var e=t.alternate;e!==null&&(t.alternate=null,B0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yn],delete e[go],delete e[$c],delete e[S1],delete e[C1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function z0(t){return t.tag===5||t.tag===3||t.tag===4}function hm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||z0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ya));else if(r!==4&&(t=t.child,t!==null))for(sd(t,e,n),t=t.sibling;t!==null;)sd(t,e,n),t=t.sibling}function id(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(id(t,e,n),t=t.sibling;t!==null;)id(t,e,n),t=t.sibling}var it=null,sn=!1;function Xn(t,e,n){for(n=n.child;n!==null;)$0(t,e,n),n=n.sibling}function $0(t,e,n){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(kl,n)}catch{}switch(n.tag){case 5:vt||As(n,e);case 6:var r=it,s=sn;it=null,Xn(t,e,n),it=r,sn=s,it!==null&&(sn?(t=it,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):it.removeChild(n.stateNode));break;case 18:it!==null&&(sn?(t=it,n=n.stateNode,t.nodeType===8?Ku(t.parentNode,n):t.nodeType===1&&Ku(t,n),co(t)):Ku(it,n.stateNode));break;case 4:r=it,s=sn,it=n.stateNode.containerInfo,sn=!0,Xn(t,e,n),it=r,sn=s;break;case 0:case 11:case 14:case 15:if(!vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&nd(n,e,o),s=s.next}while(s!==r)}Xn(t,e,n);break;case 1:if(!vt&&(As(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Oe(n,e,u)}Xn(t,e,n);break;case 21:Xn(t,e,n);break;case 22:n.mode&1?(vt=(r=vt)||n.memoizedState!==null,Xn(t,e,n),vt=r):Xn(t,e,n);break;default:Xn(t,e,n)}}function fm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new B1),e.forEach(function(r){var s=Y1.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function nn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:it=u.stateNode,sn=!1;break e;case 3:it=u.stateNode.containerInfo,sn=!0;break e;case 4:it=u.stateNode.containerInfo,sn=!0;break e}u=u.return}if(it===null)throw Error(z(160));$0(i,o,s),it=null,sn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Oe(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)q0(e,t),e=e.sibling}function q0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nn(e,t),fn(t),r&4){try{Yi(3,t,t.return),Ul(3,t)}catch(b){Oe(t,t.return,b)}try{Yi(5,t,t.return)}catch(b){Oe(t,t.return,b)}}break;case 1:nn(e,t),fn(t),r&512&&n!==null&&As(n,n.return);break;case 5:if(nn(e,t),fn(t),r&512&&n!==null&&As(n,n.return),t.flags&32){var s=t.stateNode;try{oo(s,"")}catch(b){Oe(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&hy(s,i),bc(u,o);var d=bc(u,i);for(o=0;o<c.length;o+=2){var f=c[o],m=c[o+1];f==="style"?yy(s,m):f==="dangerouslySetInnerHTML"?my(s,m):f==="children"?oo(s,m):qd(s,f,m,d)}switch(u){case"input":Sc(s,i);break;case"textarea":fy(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?js(s,!!i.multiple,w,!1):g!==!!i.multiple&&(i.defaultValue!=null?js(s,!!i.multiple,i.defaultValue,!0):js(s,!!i.multiple,i.multiple?[]:"",!1))}s[go]=i}catch(b){Oe(t,t.return,b)}}break;case 6:if(nn(e,t),fn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(b){Oe(t,t.return,b)}}break;case 3:if(nn(e,t),fn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{co(e.containerInfo)}catch(b){Oe(t,t.return,b)}break;case 4:nn(e,t),fn(t);break;case 13:nn(e,t),fn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Th=Be())),r&4&&fm(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(vt=(d=vt)||f,nn(e,t),vt=d):nn(e,t),fn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(Q=t,f=t.child;f!==null;){for(m=Q=f;Q!==null;){switch(g=Q,w=g.child,g.tag){case 0:case 11:case 14:case 15:Yi(4,g,g.return);break;case 1:As(g,g.return);var _=g.stateNode;if(typeof _.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(b){Oe(r,n,b)}}break;case 5:As(g,g.return);break;case 22:if(g.memoizedState!==null){mm(m);continue}}w!==null?(w.return=g,Q=w):mm(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=gy("display",o))}catch(b){Oe(t,t.return,b)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(b){Oe(t,t.return,b)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:nn(e,t),fn(t),r&4&&fm(t);break;case 21:break;default:nn(e,t),fn(t)}}function fn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(z0(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(oo(s,""),r.flags&=-33);var i=hm(t);id(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,u=hm(t);sd(t,u,o);break;default:throw Error(z(161))}}catch(c){Oe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $1(t,e,n){Q=t,H0(t)}function H0(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var s=Q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ma;if(!o){var u=s.alternate,c=u!==null&&u.memoizedState!==null||vt;u=ma;var d=vt;if(ma=o,(vt=c)&&!d)for(Q=s;Q!==null;)o=Q,c=o.child,o.tag===22&&o.memoizedState!==null?gm(s):c!==null?(c.return=o,Q=c):gm(s);for(;i!==null;)Q=i,H0(i),i=i.sibling;Q=s,ma=u,vt=d}pm(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Q=i):pm(t)}}function pm(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vt||Ul(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:rn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Jp(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Jp(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&co(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}vt||e.flags&512&&rd(e)}catch(g){Oe(e,e.return,g)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function mm(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function gm(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ul(4,e)}catch(c){Oe(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Oe(e,s,c)}}var i=e.return;try{rd(e)}catch(c){Oe(e,i,c)}break;case 5:var o=e.return;try{rd(e)}catch(c){Oe(e,o,c)}}}catch(c){Oe(e,e.return,c)}if(e===t){Q=null;break}var u=e.sibling;if(u!==null){u.return=e.return,Q=u;break}Q=e.return}}var q1=Math.ceil,ll=zn.ReactCurrentDispatcher,wh=zn.ReactCurrentOwner,Jt=zn.ReactCurrentBatchConfig,pe=0,st=null,qe=null,ut=0,Ot=0,bs=Ar(0),Ze=0,Eo=null,Jr=0,Bl=0,Eh=0,Ji=null,bt=null,Th=0,Hs=1/0,bn=null,ul=!1,od=null,cr=null,ga=!1,nr=null,cl=0,Zi=0,ad=null,Da=-1,Va=0;function St(){return pe&6?Be():Da!==-1?Da:Da=Be()}function dr(t){return t.mode&1?pe&2&&ut!==0?ut&-ut:N1.transition!==null?(Va===0&&(Va=by()),Va):(t=ve,t!==0||(t=window.event,t=t===void 0?16:Ly(t.type)),t):1}function ln(t,e,n,r){if(50<Zi)throw Zi=0,ad=null,Error(z(185));Do(t,n,r),(!(pe&2)||t!==st)&&(t===st&&(!(pe&2)&&(Bl|=n),Ze===4&&er(t,ut)),Dt(t,r),n===1&&pe===0&&!(e.mode&1)&&(Hs=Be()+500,Ml&&br()))}function Dt(t,e){var n=t.callbackNode;Nw(t,e);var r=Ga(t,t===st?ut:0);if(r===0)n!==null&&Cp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Cp(n),e===1)t.tag===0?I1(ym.bind(null,t)):t0(ym.bind(null,t)),E1(function(){!(pe&6)&&br()}),n=null;else{switch(jy(r)){case 1:n=Kd;break;case 4:n=Ny;break;case 16:n=Wa;break;case 536870912:n=Ay;break;default:n=Wa}n=Z0(n,W0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function W0(t,e){if(Da=-1,Va=0,pe&6)throw Error(z(327));var n=t.callbackNode;if(Vs()&&t.callbackNode!==n)return null;var r=Ga(t,t===st?ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=dl(t,r);else{e=r;var s=pe;pe|=2;var i=Q0();(st!==t||ut!==e)&&(bn=null,Hs=Be()+500,Wr(t,e));do try{G1();break}catch(u){G0(t,u)}while(!0);lh(),ll.current=i,pe=s,qe!==null?e=0:(st=null,ut=0,e=Ze)}if(e!==0){if(e===2&&(s=Dc(t),s!==0&&(r=s,e=ld(t,s))),e===1)throw n=Eo,Wr(t,0),er(t,r),Dt(t,Be()),n;if(e===6)er(t,r);else{if(s=t.current.alternate,!(r&30)&&!H1(s)&&(e=dl(t,r),e===2&&(i=Dc(t),i!==0&&(r=i,e=ld(t,i))),e===1))throw n=Eo,Wr(t,0),er(t,r),Dt(t,Be()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:Ur(t,bt,bn);break;case 3:if(er(t,r),(r&130023424)===r&&(e=Th+500-Be(),10<e)){if(Ga(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){St(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=zc(Ur.bind(null,t,bt,bn),e);break}Ur(t,bt,bn);break;case 4:if(er(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-an(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*q1(r/1960))-r,10<r){t.timeoutHandle=zc(Ur.bind(null,t,bt,bn),r);break}Ur(t,bt,bn);break;case 5:Ur(t,bt,bn);break;default:throw Error(z(329))}}}return Dt(t,Be()),t.callbackNode===n?W0.bind(null,t):null}function ld(t,e){var n=Ji;return t.current.memoizedState.isDehydrated&&(Wr(t,e).flags|=256),t=dl(t,e),t!==2&&(e=bt,bt=n,e!==null&&ud(e)),t}function ud(t){bt===null?bt=t:bt.push.apply(bt,t)}function H1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!un(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function er(t,e){for(e&=~Eh,e&=~Bl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-an(e),r=1<<n;t[n]=-1,e&=~r}}function ym(t){if(pe&6)throw Error(z(327));Vs();var e=Ga(t,0);if(!(e&1))return Dt(t,Be()),null;var n=dl(t,e);if(t.tag!==0&&n===2){var r=Dc(t);r!==0&&(e=r,n=ld(t,r))}if(n===1)throw n=Eo,Wr(t,0),er(t,e),Dt(t,Be()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ur(t,bt,bn),Dt(t,Be()),null}function Sh(t,e){var n=pe;pe|=1;try{return t(e)}finally{pe=n,pe===0&&(Hs=Be()+500,Ml&&br())}}function Zr(t){nr!==null&&nr.tag===0&&!(pe&6)&&Vs();var e=pe;pe|=1;var n=Jt.transition,r=ve;try{if(Jt.transition=null,ve=1,t)return t()}finally{ve=r,Jt.transition=n,pe=e,!(pe&6)&&br()}}function Ch(){Ot=bs.current,Ne(bs)}function Wr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,w1(n)),qe!==null)for(n=qe.return;n!==null;){var r=n;switch(ih(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ja();break;case 3:$s(),Ne(kt),Ne(_t),ph();break;case 5:fh(r);break;case 4:$s();break;case 13:Ne(Re);break;case 19:Ne(Re);break;case 10:uh(r.type._context);break;case 22:case 23:Ch()}n=n.return}if(st=t,qe=t=hr(t.current,null),ut=Ot=e,Ze=0,Eo=null,Eh=Bl=Jr=0,bt=Ji=null,$r!==null){for(e=0;e<$r.length;e++)if(n=$r[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}$r=null}return t}function G0(t,e){do{var n=qe;try{if(lh(),Ra.current=al,ol){for(var r=ke.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ol=!1}if(Yr=0,rt=Ye=ke=null,Xi=!1,xo=0,wh.current=null,n===null||n.return===null){Ze=1,Eo=e,qe=null;break}e:{var i=t,o=n.return,u=n,c=e;if(e=ut,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=u,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=sm(o);if(w!==null){w.flags&=-257,im(w,o,u,i,e),w.mode&1&&rm(i,d,e),e=w,c=d;var _=e.updateQueue;if(_===null){var b=new Set;b.add(c),e.updateQueue=b}else _.add(c);break e}else{if(!(e&1)){rm(i,d,e),Ih();break e}c=Error(z(426))}}else if(be&&u.mode&1){var j=sm(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),im(j,o,u,i,e),oh(qs(c,u));break e}}i=c=qs(c,u),Ze!==4&&(Ze=2),Ji===null?Ji=[i]:Ji.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var C=j0(i,c,e);Yp(i,C);break e;case 1:u=c;var E=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(cr===null||!cr.has(N)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=R0(i,u,e);Yp(i,P);break e}}i=i.return}while(i!==null)}X0(n)}catch(O){e=O,qe===n&&n!==null&&(qe=n=n.return);continue}break}while(!0)}function Q0(){var t=ll.current;return ll.current=al,t===null?al:t}function Ih(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),st===null||!(Jr&268435455)&&!(Bl&268435455)||er(st,ut)}function dl(t,e){var n=pe;pe|=2;var r=Q0();(st!==t||ut!==e)&&(bn=null,Wr(t,e));do try{W1();break}catch(s){G0(t,s)}while(!0);if(lh(),pe=n,ll.current=r,qe!==null)throw Error(z(261));return st=null,ut=0,Ze}function W1(){for(;qe!==null;)K0(qe)}function G1(){for(;qe!==null&&!vw();)K0(qe)}function K0(t){var e=J0(t.alternate,t,Ot);t.memoizedProps=t.pendingProps,e===null?X0(t):qe=e,wh.current=null}function X0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=U1(n,e),n!==null){n.flags&=32767,qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ze=6,qe=null;return}}else if(n=F1(n,e,Ot),n!==null){qe=n;return}if(e=e.sibling,e!==null){qe=e;return}qe=e=t}while(e!==null);Ze===0&&(Ze=5)}function Ur(t,e,n){var r=ve,s=Jt.transition;try{Jt.transition=null,ve=1,Q1(t,e,n,r)}finally{Jt.transition=s,ve=r}return null}function Q1(t,e,n,r){do Vs();while(nr!==null);if(pe&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Aw(t,i),t===st&&(qe=st=null,ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ga||(ga=!0,Z0(Wa,function(){return Vs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Jt.transition,Jt.transition=null;var o=ve;ve=1;var u=pe;pe|=4,wh.current=null,z1(t,n),q0(n,t),p1(Uc),Qa=!!Fc,Uc=Fc=null,t.current=n,$1(n),xw(),pe=u,ve=o,Jt.transition=i}else t.current=n;if(ga&&(ga=!1,nr=t,cl=s),i=t.pendingLanes,i===0&&(cr=null),Ew(n.stateNode),Dt(t,Be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ul)throw ul=!1,t=od,od=null,t;return cl&1&&t.tag!==0&&Vs(),i=t.pendingLanes,i&1?t===ad?Zi++:(Zi=0,ad=t):Zi=0,br(),null}function Vs(){if(nr!==null){var t=jy(cl),e=Jt.transition,n=ve;try{if(Jt.transition=null,ve=16>t?16:t,nr===null)var r=!1;else{if(t=nr,nr=null,cl=0,pe&6)throw Error(z(331));var s=pe;for(pe|=4,Q=t.current;Q!==null;){var i=Q,o=i.child;if(Q.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(Q=d;Q!==null;){var f=Q;switch(f.tag){case 0:case 11:case 15:Yi(8,f,i)}var m=f.child;if(m!==null)m.return=f,Q=m;else for(;Q!==null;){f=Q;var g=f.sibling,w=f.return;if(B0(f),f===d){Q=null;break}if(g!==null){g.return=w,Q=g;break}Q=w}}}var _=i.alternate;if(_!==null){var b=_.child;if(b!==null){_.child=null;do{var j=b.sibling;b.sibling=null,b=j}while(b!==null)}}Q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Q=o;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Yi(9,i,i.return)}var C=i.sibling;if(C!==null){C.return=i.return,Q=C;break e}Q=i.return}}var E=t.current;for(Q=E;Q!==null;){o=Q;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,Q=N;else e:for(o=E;Q!==null;){if(u=Q,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Ul(9,u)}}catch(O){Oe(u,u.return,O)}if(u===o){Q=null;break e}var P=u.sibling;if(P!==null){P.return=u.return,Q=P;break e}Q=u.return}}if(pe=s,br(),xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(kl,t)}catch{}r=!0}return r}finally{ve=n,Jt.transition=e}}return!1}function vm(t,e,n){e=qs(n,e),e=j0(t,e,1),t=ur(t,e,1),e=St(),t!==null&&(Do(t,1,e),Dt(t,e))}function Oe(t,e,n){if(t.tag===3)vm(t,t,n);else for(;e!==null;){if(e.tag===3){vm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(cr===null||!cr.has(r))){t=qs(n,t),t=R0(e,t,1),e=ur(e,t,1),t=St(),e!==null&&(Do(e,1,t),Dt(e,t));break}}e=e.return}}function K1(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=St(),t.pingedLanes|=t.suspendedLanes&n,st===t&&(ut&n)===n&&(Ze===4||Ze===3&&(ut&130023424)===ut&&500>Be()-Th?Wr(t,0):Eh|=n),Dt(t,e)}function Y0(t,e){e===0&&(t.mode&1?(e=oa,oa<<=1,!(oa&130023424)&&(oa=4194304)):e=1);var n=St();t=Mn(t,e),t!==null&&(Do(t,e,n),Dt(t,n))}function X1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Y0(t,n)}function Y1(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),Y0(t,n)}var J0;J0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||kt.current)Rt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Rt=!1,O1(t,e,n);Rt=!!(t.flags&131072)}else Rt=!1,be&&e.flags&1048576&&n0(e,tl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Pa(t,e),t=e.pendingProps;var s=Us(e,_t.current);Ds(e,n),s=gh(null,e,r,t,s,n);var i=yh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pt(r)?(i=!0,Za(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,dh(e),s.updater=Fl,e.stateNode=s,s._reactInternals=e,Kc(e,r,t,n),e=Jc(null,e,r,!0,i,n)):(e.tag=0,be&&i&&sh(e),Tt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Pa(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Z1(r),t=rn(r,t),s){case 0:e=Yc(null,e,r,t,n);break e;case 1:e=lm(null,e,r,t,n);break e;case 11:e=om(null,e,r,t,n);break e;case 14:e=am(null,e,r,rn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rn(r,s),Yc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rn(r,s),lm(t,e,r,s,n);case 3:e:{if(V0(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,l0(t,e),sl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=qs(Error(z(423)),e),e=um(t,e,r,n,s);break e}else if(r!==s){s=qs(Error(z(424)),e),e=um(t,e,r,n,s);break e}else for(Ft=lr(e.stateNode.containerInfo.firstChild),Bt=e,be=!0,on=null,n=o0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Bs(),r===s){e=On(t,e,n);break e}Tt(t,e,r,n)}e=e.child}return e;case 5:return u0(e),t===null&&Wc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Bc(r,s)?o=null:i!==null&&Bc(r,i)&&(e.flags|=32),D0(t,e),Tt(t,e,o,n),e.child;case 6:return t===null&&Wc(e),null;case 13:return L0(t,e,n);case 4:return hh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=zs(e,null,r,n):Tt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rn(r,s),om(t,e,r,s,n);case 7:return Tt(t,e,e.pendingProps,n),e.child;case 8:return Tt(t,e,e.pendingProps.children,n),e.child;case 12:return Tt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ee(nl,r._currentValue),r._currentValue=o,i!==null)if(un(i.value,o)){if(i.children===s.children&&!kt.current){e=On(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){o=i.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Dn(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Gc(i.return,n,e),u.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Gc(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Tt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ds(e,n),s=Zt(s),r=r(s),e.flags|=1,Tt(t,e,r,n),e.child;case 14:return r=e.type,s=rn(r,e.pendingProps),s=rn(r.type,s),am(t,e,r,s,n);case 15:return k0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rn(r,s),Pa(t,e),e.tag=1,Pt(r)?(t=!0,Za(e)):t=!1,Ds(e,n),b0(e,r,s),Kc(e,r,s,n),Jc(null,e,r,!0,t,n);case 19:return M0(t,e,n);case 22:return P0(t,e,n)}throw Error(z(156,e.tag))};function Z0(t,e){return Iy(t,e)}function J1(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(t,e,n,r){return new J1(t,e,n,r)}function Nh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Z1(t){if(typeof t=="function")return Nh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Wd)return 11;if(t===Gd)return 14}return 2}function hr(t,e){var n=t.alternate;return n===null?(n=Yt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function La(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Nh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case xs:return Gr(n.children,s,i,e);case Hd:o=8,s|=8;break;case xc:return t=Yt(12,n,e,s|2),t.elementType=xc,t.lanes=i,t;case _c:return t=Yt(13,n,e,s),t.elementType=_c,t.lanes=i,t;case wc:return t=Yt(19,n,e,s),t.elementType=wc,t.lanes=i,t;case uy:return zl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ay:o=10;break e;case ly:o=9;break e;case Wd:o=11;break e;case Gd:o=14;break e;case Yn:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Yt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Gr(t,e,n,r){return t=Yt(7,t,r,e),t.lanes=n,t}function zl(t,e,n,r){return t=Yt(22,t,r,e),t.elementType=uy,t.lanes=n,t.stateNode={isHidden:!1},t}function rc(t,e,n){return t=Yt(6,t,null,e),t.lanes=n,t}function sc(t,e,n){return e=Yt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function eE(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ou(0),this.expirationTimes=Ou(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ou(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ah(t,e,n,r,s,i,o,u,c){return t=new eE(t,e,n,u,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Yt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},dh(i),t}function tE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ev(t){if(!t)return _r;t=t._reactInternals;e:{if(ss(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Pt(n))return e0(t,n,e)}return e}function tv(t,e,n,r,s,i,o,u,c){return t=Ah(n,r,!0,t,s,i,o,u,c),t.context=ev(null),n=t.current,r=St(),s=dr(n),i=Dn(r,s),i.callback=e??null,ur(n,i,s),t.current.lanes=s,Do(t,s,r),Dt(t,r),t}function $l(t,e,n,r){var s=e.current,i=St(),o=dr(s);return n=ev(n),e.context===null?e.context=n:e.pendingContext=n,e=Dn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ur(s,e,o),t!==null&&(ln(t,s,o,i),ja(t,s,o)),o}function hl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function xm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function bh(t,e){xm(t,e),(t=t.alternate)&&xm(t,e)}function nE(){return null}var nv=typeof reportError=="function"?reportError:function(t){console.error(t)};function jh(t){this._internalRoot=t}ql.prototype.render=jh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));$l(t,e,null,null)};ql.prototype.unmount=jh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zr(function(){$l(null,t,null,null)}),e[Ln]=null}};function ql(t){this._internalRoot=t}ql.prototype.unstable_scheduleHydration=function(t){if(t){var e=Py();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zn.length&&e!==0&&e<Zn[n].priority;n++);Zn.splice(n,0,t),n===0&&Vy(t)}};function Rh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Hl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function _m(){}function rE(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=hl(o);i.call(d)}}var o=tv(e,r,t,0,null,!1,!1,"",_m);return t._reactRootContainer=o,t[Ln]=o.current,po(t.nodeType===8?t.parentNode:t),Zr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var d=hl(c);u.call(d)}}var c=Ah(t,0,!1,null,null,!1,!1,"",_m);return t._reactRootContainer=c,t[Ln]=c.current,po(t.nodeType===8?t.parentNode:t),Zr(function(){$l(e,c,n,r)}),c}function Wl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var u=s;s=function(){var c=hl(o);u.call(c)}}$l(e,o,t,s)}else o=rE(n,e,t,s,r);return hl(o)}Ry=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Oi(e.pendingLanes);n!==0&&(Xd(e,n|1),Dt(e,Be()),!(pe&6)&&(Hs=Be()+500,br()))}break;case 13:Zr(function(){var r=Mn(t,1);if(r!==null){var s=St();ln(r,t,1,s)}}),bh(t,1)}};Yd=function(t){if(t.tag===13){var e=Mn(t,134217728);if(e!==null){var n=St();ln(e,t,134217728,n)}bh(t,134217728)}};ky=function(t){if(t.tag===13){var e=dr(t),n=Mn(t,e);if(n!==null){var r=St();ln(n,t,e,r)}bh(t,e)}};Py=function(){return ve};Dy=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};Rc=function(t,e,n){switch(e){case"input":if(Sc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ll(r);if(!s)throw Error(z(90));dy(r),Sc(r,s)}}}break;case"textarea":fy(t,n);break;case"select":e=n.value,e!=null&&js(t,!!n.multiple,e,!1)}};_y=Sh;wy=Zr;var sE={usingClientEntryPoint:!1,Events:[Lo,Ts,Ll,vy,xy,Sh]},Vi={findFiberByHostInstance:zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iE={bundleType:Vi.bundleType,version:Vi.version,rendererPackageName:Vi.rendererPackageName,rendererConfig:Vi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Sy(t),t===null?null:t.stateNode},findFiberByHostInstance:Vi.findFiberByHostInstance||nE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ya=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ya.isDisabled&&ya.supportsFiber)try{kl=ya.inject(iE),xn=ya}catch{}}qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sE;qt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rh(e))throw Error(z(200));return tE(t,e,null,n)};qt.createRoot=function(t,e){if(!Rh(t))throw Error(z(299));var n=!1,r="",s=nv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Ah(t,1,!1,null,null,n,!1,r,s),t[Ln]=e.current,po(t.nodeType===8?t.parentNode:t),new jh(e)};qt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Sy(e),t=t===null?null:t.stateNode,t};qt.flushSync=function(t){return Zr(t)};qt.hydrate=function(t,e,n){if(!Hl(e))throw Error(z(200));return Wl(null,t,e,!0,n)};qt.hydrateRoot=function(t,e,n){if(!Rh(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=nv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=tv(e,null,t,1,n??null,s,!1,i,o),t[Ln]=e.current,po(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ql(e)};qt.render=function(t,e,n){if(!Hl(e))throw Error(z(200));return Wl(null,t,e,!1,n)};qt.unmountComponentAtNode=function(t){if(!Hl(t))throw Error(z(40));return t._reactRootContainer?(Zr(function(){Wl(null,null,t,!1,function(){t._reactRootContainer=null,t[Ln]=null})}),!0):!1};qt.unstable_batchedUpdates=Sh;qt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Hl(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Wl(t,e,n,!1,r)};qt.version="18.3.1-next-f1338f8080-20240426";function rv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rv)}catch(t){console.error(t)}}rv(),ry.exports=qt;var oE=ry.exports,wm=oE;yc.createRoot=wm.createRoot,yc.hydrateRoot=wm.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function To(){return To=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},To.apply(this,arguments)}var rr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(rr||(rr={}));const Em="popstate";function aE(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:u="",hash:c=""}=is(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),cd("",{pathname:o,search:u,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),u="";if(o&&o.getAttribute("href")){let c=s.location.href,d=c.indexOf("#");u=d===-1?c:c.slice(0,d)}return u+"#"+(typeof i=="string"?i:fl(i))}function r(s,i){Gl(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return uE(e,n,r,t)}function ze(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Gl(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function lE(){return Math.random().toString(36).substr(2,8)}function Tm(t,e){return{usr:t.state,key:t.key,idx:e}}function cd(t,e,n,r){return n===void 0&&(n=null),To({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?is(e):e,{state:n,key:e&&e.key||r||lE()})}function fl(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function is(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function uE(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,u=rr.Pop,c=null,d=f();d==null&&(d=0,o.replaceState(To({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function m(){u=rr.Pop;let j=f(),C=j==null?null:j-d;d=j,c&&c({action:u,location:b.location,delta:C})}function g(j,C){u=rr.Push;let E=cd(b.location,j,C);n&&n(E,j),d=f()+1;let N=Tm(E,d),P=b.createHref(E);try{o.pushState(N,"",P)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(P)}i&&c&&c({action:u,location:b.location,delta:1})}function w(j,C){u=rr.Replace;let E=cd(b.location,j,C);n&&n(E,j),d=f();let N=Tm(E,d),P=b.createHref(E);o.replaceState(N,"",P),i&&c&&c({action:u,location:b.location,delta:0})}function _(j){let C=s.location.origin!=="null"?s.location.origin:s.location.href,E=typeof j=="string"?j:fl(j);return E=E.replace(/ $/,"%20"),ze(C,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,C)}let b={get action(){return u},get location(){return t(s,o)},listen(j){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Em,m),c=j,()=>{s.removeEventListener(Em,m),c=null}},createHref(j){return e(s,j)},createURL:_,encodeLocation(j){let C=_(j);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:g,replace:w,go(j){return o.go(j)}};return b}var Sm;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Sm||(Sm={}));function cE(t,e,n){return n===void 0&&(n="/"),dE(t,e,n)}function dE(t,e,n,r){let s=typeof e=="string"?is(e):e,i=kh(s.pathname||"/",n);if(i==null)return null;let o=sv(t);hE(o);let u=null;for(let c=0;u==null&&c<o.length;++c){let d=SE(i);u=wE(o[c],d)}return u}function sv(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,u)=>{let c={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(ze(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=fr([r,c.relativePath]),f=n.concat(c);i.children&&i.children.length>0&&(ze(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),sv(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:xE(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var u;if(i.path===""||!((u=i.path)!=null&&u.includes("?")))s(i,o);else for(let c of iv(i.path))s(i,o,c)}),e}function iv(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=iv(r.join("/")),u=[];return u.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&u.push(...o),u.map(c=>t.startsWith("/")&&c===""?"/":c)}function hE(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:_E(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const fE=/^:[\w-]+$/,pE=3,mE=2,gE=1,yE=10,vE=-2,Cm=t=>t==="*";function xE(t,e){let n=t.split("/"),r=n.length;return n.some(Cm)&&(r+=vE),e&&(r+=mE),n.filter(s=>!Cm(s)).reduce((s,i)=>s+(fE.test(i)?pE:i===""?gE:yE),r)}function _E(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function wE(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let u=0;u<r.length;++u){let c=r[u],d=u===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",m=EE({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),g=c.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:fr([i,m.pathname]),pathnameBase:bE(fr([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=fr([i,m.pathnameBase]))}return o}function EE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=TE(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((d,f,m)=>{let{paramName:g,isOptional:w}=f;if(g==="*"){let b=u[m]||"";o=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const _=u[m];return w&&!_?d[g]=void 0:d[g]=(_||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function TE(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Gl(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function SE(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Gl(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function kh(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const CE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,IE=t=>CE.test(t);function NE(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?is(t):t,i;if(n)if(IE(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Gl(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=Im(n.substring(1),"/"):i=Im(n,e)}else i=e;return{pathname:i,search:jE(r),hash:RE(s)}}function Im(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function ic(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function AE(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Ph(t,e){let n=AE(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Dh(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=is(t):(s=To({},t),ze(!s.pathname||!s.pathname.includes("?"),ic("?","pathname","search",s)),ze(!s.pathname||!s.pathname.includes("#"),ic("#","pathname","hash",s)),ze(!s.search||!s.search.includes("#"),ic("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,u;if(o==null)u=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}u=m>=0?e[m]:"/"}let c=NE(s,u),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const fr=t=>t.join("/").replace(/\/\/+/g,"/"),bE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),jE=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,RE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function kE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ov=["post","put","patch","delete"];new Set(ov);const PE=["get",...ov];new Set(PE);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function So(){return So=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},So.apply(this,arguments)}const Vh=L.createContext(null),DE=L.createContext(null),jr=L.createContext(null),Ql=L.createContext(null),$n=L.createContext({outlet:null,matches:[],isDataRoute:!1}),av=L.createContext(null);function VE(t,e){let{relative:n}=e===void 0?{}:e;ti()||ze(!1);let{basename:r,navigator:s}=L.useContext(jr),{hash:i,pathname:o,search:u}=uv(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:fr([r,o])),s.createHref({pathname:c,search:u,hash:i})}function ti(){return L.useContext(Ql)!=null}function ni(){return ti()||ze(!1),L.useContext(Ql).location}function lv(t){L.useContext(jr).static||L.useLayoutEffect(t)}function Wt(){let{isDataRoute:t}=L.useContext($n);return t?QE():LE()}function LE(){ti()||ze(!1);let t=L.useContext(Vh),{basename:e,future:n,navigator:r}=L.useContext(jr),{matches:s}=L.useContext($n),{pathname:i}=ni(),o=JSON.stringify(Ph(s,n.v7_relativeSplatPath)),u=L.useRef(!1);return lv(()=>{u.current=!0}),L.useCallback(function(d,f){if(f===void 0&&(f={}),!u.current)return;if(typeof d=="number"){r.go(d);return}let m=Dh(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:fr([e,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[e,r,o,i,t])}function ri(){let{matches:t}=L.useContext($n),e=t[t.length-1];return e?e.params:{}}function uv(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=L.useContext(jr),{matches:s}=L.useContext($n),{pathname:i}=ni(),o=JSON.stringify(Ph(s,r.v7_relativeSplatPath));return L.useMemo(()=>Dh(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function ME(t,e){return OE(t,e)}function OE(t,e,n,r){ti()||ze(!1);let{navigator:s}=L.useContext(jr),{matches:i}=L.useContext($n),o=i[i.length-1],u=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=ni(),f;if(e){var m;let j=typeof e=="string"?is(e):e;c==="/"||(m=j.pathname)!=null&&m.startsWith(c)||ze(!1),f=j}else f=d;let g=f.pathname||"/",w=g;if(c!=="/"){let j=c.replace(/^\//,"").split("/");w="/"+g.replace(/^\//,"").split("/").slice(j.length).join("/")}let _=cE(t,{pathname:w}),b=$E(_&&_.map(j=>Object.assign({},j,{params:Object.assign({},u,j.params),pathname:fr([c,s.encodeLocation?s.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?c:fr([c,s.encodeLocation?s.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),i,n,r);return e&&b?L.createElement(Ql.Provider,{value:{location:So({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:rr.Pop}},b):b}function FE(){let t=GE(),e=kE(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:s},n):null,null)}const UE=L.createElement(FE,null);class BE extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?L.createElement($n.Provider,{value:this.props.routeContext},L.createElement(av.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zE(t){let{routeContext:e,match:n,children:r}=t,s=L.useContext(Vh);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),L.createElement($n.Provider,{value:e},r)}function $E(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,u=(s=n)==null?void 0:s.errors;if(u!=null){let f=o.findIndex(m=>m.route.id&&(u==null?void 0:u[m.route.id])!==void 0);f>=0||ze(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:w}=n,_=m.route.loader&&g[m.route.id]===void 0&&(!w||w[m.route.id]===void 0);if(m.route.lazy||_){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,m,g)=>{let w,_=!1,b=null,j=null;n&&(w=u&&m.route.id?u[m.route.id]:void 0,b=m.route.errorElement||UE,c&&(d<0&&g===0?(KE("route-fallback"),_=!0,j=null):d===g&&(_=!0,j=m.route.hydrateFallbackElement||null)));let C=e.concat(o.slice(0,g+1)),E=()=>{let N;return w?N=b:_?N=j:m.route.Component?N=L.createElement(m.route.Component,null):m.route.element?N=m.route.element:N=f,L.createElement(zE,{match:m,routeContext:{outlet:f,matches:C,isDataRoute:n!=null},children:N})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?L.createElement(BE,{location:n.location,revalidation:n.revalidation,component:b,error:w,children:E(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):E()},null)}var cv=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(cv||{}),dv=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(dv||{});function qE(t){let e=L.useContext(Vh);return e||ze(!1),e}function HE(t){let e=L.useContext(DE);return e||ze(!1),e}function WE(t){let e=L.useContext($n);return e||ze(!1),e}function hv(t){let e=WE(),n=e.matches[e.matches.length-1];return n.route.id||ze(!1),n.route.id}function GE(){var t;let e=L.useContext(av),n=HE(),r=hv();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function QE(){let{router:t}=qE(cv.UseNavigateStable),e=hv(dv.UseNavigateStable),n=L.useRef(!1);return lv(()=>{n.current=!0}),L.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,So({fromRouteId:e},i)))},[t,e])}const Nm={};function KE(t,e,n){Nm[t]||(Nm[t]=!0)}function XE(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function dd(t){let{to:e,replace:n,state:r,relative:s}=t;ti()||ze(!1);let{future:i,static:o}=L.useContext(jr),{matches:u}=L.useContext($n),{pathname:c}=ni(),d=Wt(),f=Dh(e,Ph(u,i.v7_relativeSplatPath),c,s==="path"),m=JSON.stringify(f);return L.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:s}),[d,m,s,n,r]),null}function Me(t){ze(!1)}function YE(t){let{basename:e="/",children:n=null,location:r,navigationType:s=rr.Pop,navigator:i,static:o=!1,future:u}=t;ti()&&ze(!1);let c=e.replace(/^\/*/,"/"),d=L.useMemo(()=>({basename:c,navigator:i,static:o,future:So({v7_relativeSplatPath:!1},u)}),[c,u,i,o]);typeof r=="string"&&(r=is(r));let{pathname:f="/",search:m="",hash:g="",state:w=null,key:_="default"}=r,b=L.useMemo(()=>{let j=kh(f,c);return j==null?null:{location:{pathname:j,search:m,hash:g,state:w,key:_},navigationType:s}},[c,f,m,g,w,_,s]);return b==null?null:L.createElement(jr.Provider,{value:d},L.createElement(Ql.Provider,{children:n,value:b}))}function JE(t){let{children:e,location:n}=t;return ME(hd(e),n)}new Promise(()=>{});function hd(t,e){e===void 0&&(e=[]);let n=[];return L.Children.forEach(t,(r,s)=>{if(!L.isValidElement(r))return;let i=[...e,s];if(r.type===L.Fragment){n.push.apply(n,hd(r.props.children,i));return}r.type!==Me&&ze(!1),!r.props.index||!r.props.children||ze(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=hd(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fd(){return fd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fd.apply(this,arguments)}function ZE(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function e2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function t2(t,e){return t.button===0&&(!e||e==="_self")&&!e2(t)}const n2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],r2="6";try{window.__reactRouterVersion=r2}catch{}const s2="startTransition",Am=K_[s2];function i2(t){let{basename:e,children:n,future:r,window:s}=t,i=L.useRef();i.current==null&&(i.current=aE({window:s,v5Compat:!0}));let o=i.current,[u,c]=L.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=L.useCallback(m=>{d&&Am?Am(()=>c(m)):c(m)},[c,d]);return L.useLayoutEffect(()=>o.listen(f),[o,f]),L.useEffect(()=>XE(r),[r]),L.createElement(YE,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:o,future:r})}const o2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",a2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pn=L.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:u,target:c,to:d,preventScrollReset:f,viewTransition:m}=e,g=ZE(e,n2),{basename:w}=L.useContext(jr),_,b=!1;if(typeof d=="string"&&a2.test(d)&&(_=d,o2))try{let N=new URL(window.location.href),P=d.startsWith("//")?new URL(N.protocol+d):new URL(d),O=kh(P.pathname,w);P.origin===N.origin&&O!=null?d=O+P.search+P.hash:b=!0}catch{}let j=VE(d,{relative:s}),C=l2(d,{replace:o,state:u,target:c,preventScrollReset:f,relative:s,viewTransition:m});function E(N){r&&r(N),N.defaultPrevented||C(N)}return L.createElement("a",fd({},g,{href:_||j,onClick:b||i?r:E,ref:n,target:c}))});var bm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(bm||(bm={}));var jm;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(jm||(jm={}));function l2(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:u}=e===void 0?{}:e,c=Wt(),d=ni(),f=uv(t,{relative:o});return L.useCallback(m=>{if(t2(m,n)){m.preventDefault();let g=r!==void 0?r:fl(d)===fl(f);c(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:u})}},[d,c,f,r,s,n,t,i,o,u])}var at=(t=>(t.Training="Training",t.ReadyForInterview="Ready for Interview",t.Placed="Placed",t.Discontinued="Discontinued",t))(at||{}),Ae=(t=>(t.Bank="Bank",t.Cash="Cash",t.Debtor="Debtor",t.Creditor="Creditor",t.Expense="Expense",t.Income="Income",t.Equity="Equity",t))(Ae||{}),_e=(t=>(t.Income="Income",t.Expense="Expense",t.Transfer="Transfer",t.Refund="Refund",t))(_e||{});const ue=t=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(t),vn=()=>Math.random().toString(36).substr(2,9),u2=(t,e)=>{const n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)},Lh=(t,e)=>{if(t.length===0)return;const n=Object.keys(t[0]).join(","),r=t.map(c=>Object.values(c).map(d=>`"${d}"`).join(",")).join(`
`),s=`${n}
${r}`,i=new Blob([s],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(i),u=document.createElement("a");u.href=o,u.download=e,document.body.appendChild(u),u.click(),document.body.removeChild(u)},Ui=(t,e,n,r=0)=>{let s=0;return e==="Account"&&(s+=r),n.forEach(i=>{i.toEntityId===t&&i.toEntityType===e&&(s+=i.amount),i.fromEntityId===t&&i.fromEntityType===e&&(s-=i.amount)}),s},c2=()=>{};var Rm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},d2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],u=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},pv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,u=o?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,f=i>>2,m=(i&3)<<4|u>>4;let g=(u&15)<<2|d>>6,w=d&63;c||(w=64,o||(g=64)),r.push(n[f],n[m],n[g],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):d2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||u==null||d==null||m==null)throw new h2;const g=i<<2|u>>4;if(r.push(g),d!==64){const w=u<<4&240|d>>2;if(r.push(w),m!==64){const _=d<<6&192|m;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class h2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const f2=function(t){const e=fv(t);return pv.encodeByteArray(e,!0)},pl=function(t){return f2(t).replace(/\./g,"")},p2=function(t){try{return pv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2=()=>m2().__FIREBASE_DEFAULTS__,y2=()=>{if(typeof process>"u"||typeof Rm>"u")return;const t=Rm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},v2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&p2(t[1]);return e&&JSON.parse(e)},Mh=()=>{try{return c2()||g2()||y2()||v2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},x2=t=>{var e,n;return(n=(e=Mh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},_2=t=>{const e=x2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},mv=()=>{var t;return(t=Mh())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function E2(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[pl(JSON.stringify(n)),pl(JSON.stringify(o)),""].join(".")}const eo={};function S2(){const t={prod:[],emulator:[]};for(const e of Object.keys(eo))eo[e]?t.emulator.push(e):t.prod.push(e);return t}function C2(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let km=!1;function I2(t,e){if(typeof window>"u"||typeof document>"u"||!Oh(window.location.host)||eo[t]===e||eo[t]||km)return;eo[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=S2().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function u(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,w){g.setAttribute("width","24"),g.setAttribute("id",w),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{km=!0,o()},g}function f(g,w){g.setAttribute("id",w),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=C2(r),w=n("text"),_=document.getElementById(w)||document.createElement("span"),b=n("learnmore"),j=document.getElementById(b)||document.createElement("a"),C=n("preprendIcon"),E=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const N=g.element;u(N),f(j,b);const P=d();c(E,C),N.append(E,_,j,P),document.body.appendChild(N)}i?(_.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function A2(){var e;const t=(e=Mh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function b2(){return!A2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function j2(){try{return typeof indexedDB=="object"}catch{return!1}}function R2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2="FirebaseError";class si extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=k2,Object.setPrototypeOf(this,si.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gv.prototype.create)}}class gv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?P2(i,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new si(s,u,r)}}function P2(t,e){return t.replace(D2,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const D2=/\{\$([^}]+)}/g;function ml(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Pm(i)&&Pm(o)){if(!ml(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Pm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(t){return t&&t._delegate?t._delegate:t}class Co{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new w2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(M2(e))try{this.getOrInitializeService({instanceIdentifier:Br})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Br){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Br){return this.instances.has(e)}getOptions(e=Br){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);r===u&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:L2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Br){return this.component?this.component.multipleInstances?e:Br:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function L2(t){return t===Br?void 0:t}function M2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new V2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(fe||(fe={}));const F2={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},U2=fe.INFO,B2={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},z2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=B2[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yv{constructor(e){this.name=e,this._logLevel=U2,this._logHandler=z2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?F2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}}const $2=(t,e)=>e.some(n=>t instanceof n);let Dm,Vm;function q2(){return Dm||(Dm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function H2(){return Vm||(Vm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vv=new WeakMap,pd=new WeakMap,xv=new WeakMap,oc=new WeakMap,Fh=new WeakMap;function W2(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(pr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&vv.set(n,t)}).catch(()=>{}),Fh.set(e,t),e}function G2(t){if(pd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});pd.set(t,e)}let md={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return pd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Q2(t){md=t(md)}function K2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ac(this),e,...n);return xv.set(r,e.sort?e.sort():[e]),pr(r)}:H2().includes(t)?function(...e){return t.apply(ac(this),e),pr(vv.get(this))}:function(...e){return pr(t.apply(ac(this),e))}}function X2(t){return typeof t=="function"?K2(t):(t instanceof IDBTransaction&&G2(t),$2(t,q2())?new Proxy(t,md):t)}function pr(t){if(t instanceof IDBRequest)return W2(t);if(oc.has(t))return oc.get(t);const e=X2(t);return e!==t&&(oc.set(t,e),Fh.set(e,t)),e}const ac=t=>Fh.get(t);function Y2(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),u=pr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(pr(o.result),c.oldVersion,c.newVersion,pr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const J2=["get","getKey","getAll","getAllKeys","count"],Z2=["put","add","delete","clear"],lc=new Map;function Lm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(lc.get(e))return lc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Z2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||J2.includes(n)))return;const i=async function(o,...u){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),s&&c.done]))[0]};return lc.set(e,i),i}Q2(t=>({...t,get:(e,n,r)=>Lm(e,n)||t.get(e,n,r),has:(e,n)=>!!Lm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function tT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gd="@firebase/app",Mm="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn=new yv("@firebase/app"),nT="@firebase/app-compat",rT="@firebase/analytics-compat",sT="@firebase/analytics",iT="@firebase/app-check-compat",oT="@firebase/app-check",aT="@firebase/auth",lT="@firebase/auth-compat",uT="@firebase/database",cT="@firebase/data-connect",dT="@firebase/database-compat",hT="@firebase/functions",fT="@firebase/functions-compat",pT="@firebase/installations",mT="@firebase/installations-compat",gT="@firebase/messaging",yT="@firebase/messaging-compat",vT="@firebase/performance",xT="@firebase/performance-compat",_T="@firebase/remote-config",wT="@firebase/remote-config-compat",ET="@firebase/storage",TT="@firebase/storage-compat",ST="@firebase/firestore",CT="@firebase/ai",IT="@firebase/firestore-compat",NT="firebase",AT="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd="[DEFAULT]",bT={[gd]:"fire-core",[nT]:"fire-core-compat",[sT]:"fire-analytics",[rT]:"fire-analytics-compat",[oT]:"fire-app-check",[iT]:"fire-app-check-compat",[aT]:"fire-auth",[lT]:"fire-auth-compat",[uT]:"fire-rtdb",[cT]:"fire-data-connect",[dT]:"fire-rtdb-compat",[hT]:"fire-fn",[fT]:"fire-fn-compat",[pT]:"fire-iid",[mT]:"fire-iid-compat",[gT]:"fire-fcm",[yT]:"fire-fcm-compat",[vT]:"fire-perf",[xT]:"fire-perf-compat",[_T]:"fire-rc",[wT]:"fire-rc-compat",[ET]:"fire-gcs",[TT]:"fire-gcs-compat",[ST]:"fire-fst",[IT]:"fire-fst-compat",[CT]:"fire-vertex","fire-js":"fire-js",[NT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=new Map,jT=new Map,vd=new Map;function Om(t,e){try{t.container.addComponent(e)}catch(n){Fn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function yl(t){const e=t.name;if(vd.has(e))return Fn.debug(`There were multiple attempts to register component ${e}.`),!1;vd.set(e,t);for(const n of gl.values())Om(n,t);for(const n of jT.values())Om(n,t);return!0}function RT(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function kT(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mr=new gv("app","Firebase",PT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=AT;function xd(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:yd,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw mr.create("bad-app-name",{appName:String(s)});if(n||(n=mv()),!n)throw mr.create("no-options");const i=gl.get(s);if(i){if(ml(n,i.options)&&ml(r,i.config))return i;throw mr.create("duplicate-app",{appName:s})}const o=new O2(s);for(const c of vd.values())o.addComponent(c);const u=new DT(n,r,o);return gl.set(s,u),u}function LT(t=yd){const e=gl.get(t);if(!e&&t===yd&&mv())return xd();if(!e)throw mr.create("no-app",{appName:t});return e}function Ls(t,e,n){let r=bT[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fn.warn(o.join(" "));return}yl(new Co(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="firebase-heartbeat-database",OT=1,Io="firebase-heartbeat-store";let uc=null;function _v(){return uc||(uc=Y2(MT,OT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Io)}catch(n){console.warn(n)}}}}).catch(t=>{throw mr.create("idb-open",{originalErrorMessage:t.message})})),uc}async function FT(t){try{const n=(await _v()).transaction(Io),r=await n.objectStore(Io).get(wv(t));return await n.done,r}catch(e){if(e instanceof si)Fn.warn(e.message);else{const n=mr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fn.warn(n.message)}}}async function Fm(t,e){try{const r=(await _v()).transaction(Io,"readwrite");await r.objectStore(Io).put(e,wv(t)),await r.done}catch(n){if(n instanceof si)Fn.warn(n.message);else{const r=mr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Fn.warn(r.message)}}}function wv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=1024,BT=30;class zT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Um();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>BT){const o=HT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Fn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Um(),{heartbeatsToSend:r,unsentEntries:s}=$T(this._heartbeatsCache.heartbeats),i=pl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Fn.warn(n),""}}}function Um(){return new Date().toISOString().substring(0,10)}function $T(t,e=UT){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Bm(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Bm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class qT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return j2()?R2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await FT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Fm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Fm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Bm(t){return pl(JSON.stringify({version:2,heartbeats:t})).length}function HT(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(t){yl(new Co("platform-logger",e=>new eT(e),"PRIVATE")),yl(new Co("heartbeat",e=>new zT(e),"PRIVATE")),Ls(gd,Mm,t),Ls(gd,Mm,"esm2020"),Ls("fire-js","")}WT("");var GT="firebase",QT="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ls(GT,QT,"app");var zm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gr,Ev;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(y,v){function T(){}T.prototype=v.prototype,y.F=v.prototype,y.prototype=new T,y.prototype.constructor=y,y.D=function(A,I,R){for(var S=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)S[Y-2]=arguments[Y];return v.prototype[I].apply(A,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(y,v,T){T||(T=0);const A=Array(16);if(typeof v=="string")for(var I=0;I<16;++I)A[I]=v.charCodeAt(T++)|v.charCodeAt(T++)<<8|v.charCodeAt(T++)<<16|v.charCodeAt(T++)<<24;else for(I=0;I<16;++I)A[I]=v[T++]|v[T++]<<8|v[T++]<<16|v[T++]<<24;v=y.g[0],T=y.g[1],I=y.g[2];let R=y.g[3],S;S=v+(R^T&(I^R))+A[0]+3614090360&4294967295,v=T+(S<<7&4294967295|S>>>25),S=R+(I^v&(T^I))+A[1]+3905402710&4294967295,R=v+(S<<12&4294967295|S>>>20),S=I+(T^R&(v^T))+A[2]+606105819&4294967295,I=R+(S<<17&4294967295|S>>>15),S=T+(v^I&(R^v))+A[3]+3250441966&4294967295,T=I+(S<<22&4294967295|S>>>10),S=v+(R^T&(I^R))+A[4]+4118548399&4294967295,v=T+(S<<7&4294967295|S>>>25),S=R+(I^v&(T^I))+A[5]+1200080426&4294967295,R=v+(S<<12&4294967295|S>>>20),S=I+(T^R&(v^T))+A[6]+2821735955&4294967295,I=R+(S<<17&4294967295|S>>>15),S=T+(v^I&(R^v))+A[7]+4249261313&4294967295,T=I+(S<<22&4294967295|S>>>10),S=v+(R^T&(I^R))+A[8]+1770035416&4294967295,v=T+(S<<7&4294967295|S>>>25),S=R+(I^v&(T^I))+A[9]+2336552879&4294967295,R=v+(S<<12&4294967295|S>>>20),S=I+(T^R&(v^T))+A[10]+4294925233&4294967295,I=R+(S<<17&4294967295|S>>>15),S=T+(v^I&(R^v))+A[11]+2304563134&4294967295,T=I+(S<<22&4294967295|S>>>10),S=v+(R^T&(I^R))+A[12]+1804603682&4294967295,v=T+(S<<7&4294967295|S>>>25),S=R+(I^v&(T^I))+A[13]+4254626195&4294967295,R=v+(S<<12&4294967295|S>>>20),S=I+(T^R&(v^T))+A[14]+2792965006&4294967295,I=R+(S<<17&4294967295|S>>>15),S=T+(v^I&(R^v))+A[15]+1236535329&4294967295,T=I+(S<<22&4294967295|S>>>10),S=v+(I^R&(T^I))+A[1]+4129170786&4294967295,v=T+(S<<5&4294967295|S>>>27),S=R+(T^I&(v^T))+A[6]+3225465664&4294967295,R=v+(S<<9&4294967295|S>>>23),S=I+(v^T&(R^v))+A[11]+643717713&4294967295,I=R+(S<<14&4294967295|S>>>18),S=T+(R^v&(I^R))+A[0]+3921069994&4294967295,T=I+(S<<20&4294967295|S>>>12),S=v+(I^R&(T^I))+A[5]+3593408605&4294967295,v=T+(S<<5&4294967295|S>>>27),S=R+(T^I&(v^T))+A[10]+38016083&4294967295,R=v+(S<<9&4294967295|S>>>23),S=I+(v^T&(R^v))+A[15]+3634488961&4294967295,I=R+(S<<14&4294967295|S>>>18),S=T+(R^v&(I^R))+A[4]+3889429448&4294967295,T=I+(S<<20&4294967295|S>>>12),S=v+(I^R&(T^I))+A[9]+568446438&4294967295,v=T+(S<<5&4294967295|S>>>27),S=R+(T^I&(v^T))+A[14]+3275163606&4294967295,R=v+(S<<9&4294967295|S>>>23),S=I+(v^T&(R^v))+A[3]+4107603335&4294967295,I=R+(S<<14&4294967295|S>>>18),S=T+(R^v&(I^R))+A[8]+1163531501&4294967295,T=I+(S<<20&4294967295|S>>>12),S=v+(I^R&(T^I))+A[13]+2850285829&4294967295,v=T+(S<<5&4294967295|S>>>27),S=R+(T^I&(v^T))+A[2]+4243563512&4294967295,R=v+(S<<9&4294967295|S>>>23),S=I+(v^T&(R^v))+A[7]+1735328473&4294967295,I=R+(S<<14&4294967295|S>>>18),S=T+(R^v&(I^R))+A[12]+2368359562&4294967295,T=I+(S<<20&4294967295|S>>>12),S=v+(T^I^R)+A[5]+4294588738&4294967295,v=T+(S<<4&4294967295|S>>>28),S=R+(v^T^I)+A[8]+2272392833&4294967295,R=v+(S<<11&4294967295|S>>>21),S=I+(R^v^T)+A[11]+1839030562&4294967295,I=R+(S<<16&4294967295|S>>>16),S=T+(I^R^v)+A[14]+4259657740&4294967295,T=I+(S<<23&4294967295|S>>>9),S=v+(T^I^R)+A[1]+2763975236&4294967295,v=T+(S<<4&4294967295|S>>>28),S=R+(v^T^I)+A[4]+1272893353&4294967295,R=v+(S<<11&4294967295|S>>>21),S=I+(R^v^T)+A[7]+4139469664&4294967295,I=R+(S<<16&4294967295|S>>>16),S=T+(I^R^v)+A[10]+3200236656&4294967295,T=I+(S<<23&4294967295|S>>>9),S=v+(T^I^R)+A[13]+681279174&4294967295,v=T+(S<<4&4294967295|S>>>28),S=R+(v^T^I)+A[0]+3936430074&4294967295,R=v+(S<<11&4294967295|S>>>21),S=I+(R^v^T)+A[3]+3572445317&4294967295,I=R+(S<<16&4294967295|S>>>16),S=T+(I^R^v)+A[6]+76029189&4294967295,T=I+(S<<23&4294967295|S>>>9),S=v+(T^I^R)+A[9]+3654602809&4294967295,v=T+(S<<4&4294967295|S>>>28),S=R+(v^T^I)+A[12]+3873151461&4294967295,R=v+(S<<11&4294967295|S>>>21),S=I+(R^v^T)+A[15]+530742520&4294967295,I=R+(S<<16&4294967295|S>>>16),S=T+(I^R^v)+A[2]+3299628645&4294967295,T=I+(S<<23&4294967295|S>>>9),S=v+(I^(T|~R))+A[0]+4096336452&4294967295,v=T+(S<<6&4294967295|S>>>26),S=R+(T^(v|~I))+A[7]+1126891415&4294967295,R=v+(S<<10&4294967295|S>>>22),S=I+(v^(R|~T))+A[14]+2878612391&4294967295,I=R+(S<<15&4294967295|S>>>17),S=T+(R^(I|~v))+A[5]+4237533241&4294967295,T=I+(S<<21&4294967295|S>>>11),S=v+(I^(T|~R))+A[12]+1700485571&4294967295,v=T+(S<<6&4294967295|S>>>26),S=R+(T^(v|~I))+A[3]+2399980690&4294967295,R=v+(S<<10&4294967295|S>>>22),S=I+(v^(R|~T))+A[10]+4293915773&4294967295,I=R+(S<<15&4294967295|S>>>17),S=T+(R^(I|~v))+A[1]+2240044497&4294967295,T=I+(S<<21&4294967295|S>>>11),S=v+(I^(T|~R))+A[8]+1873313359&4294967295,v=T+(S<<6&4294967295|S>>>26),S=R+(T^(v|~I))+A[15]+4264355552&4294967295,R=v+(S<<10&4294967295|S>>>22),S=I+(v^(R|~T))+A[6]+2734768916&4294967295,I=R+(S<<15&4294967295|S>>>17),S=T+(R^(I|~v))+A[13]+1309151649&4294967295,T=I+(S<<21&4294967295|S>>>11),S=v+(I^(T|~R))+A[4]+4149444226&4294967295,v=T+(S<<6&4294967295|S>>>26),S=R+(T^(v|~I))+A[11]+3174756917&4294967295,R=v+(S<<10&4294967295|S>>>22),S=I+(v^(R|~T))+A[2]+718787259&4294967295,I=R+(S<<15&4294967295|S>>>17),S=T+(R^(I|~v))+A[9]+3951481745&4294967295,y.g[0]=y.g[0]+v&4294967295,y.g[1]=y.g[1]+(I+(S<<21&4294967295|S>>>11))&4294967295,y.g[2]=y.g[2]+I&4294967295,y.g[3]=y.g[3]+R&4294967295}r.prototype.v=function(y,v){v===void 0&&(v=y.length);const T=v-this.blockSize,A=this.C;let I=this.h,R=0;for(;R<v;){if(I==0)for(;R<=T;)s(this,y,R),R+=this.blockSize;if(typeof y=="string"){for(;R<v;)if(A[I++]=y.charCodeAt(R++),I==this.blockSize){s(this,A),I=0;break}}else for(;R<v;)if(A[I++]=y[R++],I==this.blockSize){s(this,A),I=0;break}}this.h=I,this.o+=v},r.prototype.A=function(){var y=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);y[0]=128;for(var v=1;v<y.length-8;++v)y[v]=0;v=this.o*8;for(var T=y.length-8;T<y.length;++T)y[T]=v&255,v/=256;for(this.v(y),y=Array(16),v=0,T=0;T<4;++T)for(let A=0;A<32;A+=8)y[v++]=this.g[T]>>>A&255;return y};function i(y,v){var T=u;return Object.prototype.hasOwnProperty.call(T,y)?T[y]:T[y]=v(y)}function o(y,v){this.h=v;const T=[];let A=!0;for(let I=y.length-1;I>=0;I--){const R=y[I]|0;A&&R==v||(T[I]=R,A=!1)}this.g=T}var u={};function c(y){return-128<=y&&y<128?i(y,function(v){return new o([v|0],v<0?-1:0)}):new o([y|0],y<0?-1:0)}function d(y){if(isNaN(y)||!isFinite(y))return m;if(y<0)return j(d(-y));const v=[];let T=1;for(let A=0;y>=T;A++)v[A]=y/T|0,T*=4294967296;return new o(v,0)}function f(y,v){if(y.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(y.charAt(0)=="-")return j(f(y.substring(1),v));if(y.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=d(Math.pow(v,8));let A=m;for(let R=0;R<y.length;R+=8){var I=Math.min(8,y.length-R);const S=parseInt(y.substring(R,R+I),v);I<8?(I=d(Math.pow(v,I)),A=A.j(I).add(d(S))):(A=A.j(T),A=A.add(d(S)))}return A}var m=c(0),g=c(1),w=c(16777216);t=o.prototype,t.m=function(){if(b(this))return-j(this).m();let y=0,v=1;for(let T=0;T<this.g.length;T++){const A=this.i(T);y+=(A>=0?A:4294967296+A)*v,v*=4294967296}return y},t.toString=function(y){if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(_(this))return"0";if(b(this))return"-"+j(this).toString(y);const v=d(Math.pow(y,6));var T=this;let A="";for(;;){const I=P(T,v).g;T=C(T,I.j(v));let R=((T.g.length>0?T.g[0]:T.h)>>>0).toString(y);if(T=I,_(T))return R+A;for(;R.length<6;)R="0"+R;A=R+A}},t.i=function(y){return y<0?0:y<this.g.length?this.g[y]:this.h};function _(y){if(y.h!=0)return!1;for(let v=0;v<y.g.length;v++)if(y.g[v]!=0)return!1;return!0}function b(y){return y.h==-1}t.l=function(y){return y=C(this,y),b(y)?-1:_(y)?0:1};function j(y){const v=y.g.length,T=[];for(let A=0;A<v;A++)T[A]=~y.g[A];return new o(T,~y.h).add(g)}t.abs=function(){return b(this)?j(this):this},t.add=function(y){const v=Math.max(this.g.length,y.g.length),T=[];let A=0;for(let I=0;I<=v;I++){let R=A+(this.i(I)&65535)+(y.i(I)&65535),S=(R>>>16)+(this.i(I)>>>16)+(y.i(I)>>>16);A=S>>>16,R&=65535,S&=65535,T[I]=S<<16|R}return new o(T,T[T.length-1]&-2147483648?-1:0)};function C(y,v){return y.add(j(v))}t.j=function(y){if(_(this)||_(y))return m;if(b(this))return b(y)?j(this).j(j(y)):j(j(this).j(y));if(b(y))return j(this.j(j(y)));if(this.l(w)<0&&y.l(w)<0)return d(this.m()*y.m());const v=this.g.length+y.g.length,T=[];for(var A=0;A<2*v;A++)T[A]=0;for(A=0;A<this.g.length;A++)for(let I=0;I<y.g.length;I++){const R=this.i(A)>>>16,S=this.i(A)&65535,Y=y.i(I)>>>16,oe=y.i(I)&65535;T[2*A+2*I]+=S*oe,E(T,2*A+2*I),T[2*A+2*I+1]+=R*oe,E(T,2*A+2*I+1),T[2*A+2*I+1]+=S*Y,E(T,2*A+2*I+1),T[2*A+2*I+2]+=R*Y,E(T,2*A+2*I+2)}for(y=0;y<v;y++)T[y]=T[2*y+1]<<16|T[2*y];for(y=v;y<2*v;y++)T[y]=0;return new o(T,0)};function E(y,v){for(;(y[v]&65535)!=y[v];)y[v+1]+=y[v]>>>16,y[v]&=65535,v++}function N(y,v){this.g=y,this.h=v}function P(y,v){if(_(v))throw Error("division by zero");if(_(y))return new N(m,m);if(b(y))return v=P(j(y),v),new N(j(v.g),j(v.h));if(b(v))return v=P(y,j(v)),new N(j(v.g),v.h);if(y.g.length>30){if(b(y)||b(v))throw Error("slowDivide_ only works with positive integers.");for(var T=g,A=v;A.l(y)<=0;)T=O(T),A=O(A);var I=k(T,1),R=k(A,1);for(A=k(A,2),T=k(T,2);!_(A);){var S=R.add(A);S.l(y)<=0&&(I=I.add(T),R=S),A=k(A,1),T=k(T,1)}return v=C(y,I.j(v)),new N(I,v)}for(I=m;y.l(v)>=0;){for(T=Math.max(1,Math.floor(y.m()/v.m())),A=Math.ceil(Math.log(T)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),R=d(T),S=R.j(v);b(S)||S.l(y)>0;)T-=A,R=d(T),S=R.j(v);_(R)&&(R=g),I=I.add(R),y=C(y,S)}return new N(I,y)}t.B=function(y){return P(this,y).h},t.and=function(y){const v=Math.max(this.g.length,y.g.length),T=[];for(let A=0;A<v;A++)T[A]=this.i(A)&y.i(A);return new o(T,this.h&y.h)},t.or=function(y){const v=Math.max(this.g.length,y.g.length),T=[];for(let A=0;A<v;A++)T[A]=this.i(A)|y.i(A);return new o(T,this.h|y.h)},t.xor=function(y){const v=Math.max(this.g.length,y.g.length),T=[];for(let A=0;A<v;A++)T[A]=this.i(A)^y.i(A);return new o(T,this.h^y.h)};function O(y){const v=y.g.length+1,T=[];for(let A=0;A<v;A++)T[A]=y.i(A)<<1|y.i(A-1)>>>31;return new o(T,y.h)}function k(y,v){const T=v>>5;v%=32;const A=y.g.length-T,I=[];for(let R=0;R<A;R++)I[R]=v>0?y.i(R+T)>>>v|y.i(R+T+1)<<32-v:y.i(R+T);return new o(I,y.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Ev=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,gr=o}).apply(typeof zm<"u"?zm:typeof self<"u"?self:typeof window<"u"?window:{});var va=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tv,Bi,Sv,Ma,_d,Cv,Iv,Nv;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof va=="object"&&va];for(var h=0;h<a.length;++h){var p=a[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var p=r;a=a.split(".");for(var x=0;x<a.length-1;x++){var D=a[x];if(!(D in p))break e;p=p[D]}a=a[a.length-1],x=p[a],h=h(x),h!=x&&h!=null&&e(p,a,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(h){var p=[],x;for(x in h)Object.prototype.hasOwnProperty.call(h,x)&&p.push([x,h[x]]);return p}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function u(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function c(a,h,p){return a.call.apply(a.bind,arguments)}function d(a,h,p){return d=c,d.apply(null,arguments)}function f(a,h){var p=Array.prototype.slice.call(arguments,1);return function(){var x=p.slice();return x.push.apply(x,arguments),a.apply(this,x)}}function m(a,h){function p(){}p.prototype=h.prototype,a.Z=h.prototype,a.prototype=new p,a.prototype.constructor=a,a.Ob=function(x,D,M){for(var q=Array(arguments.length-2),se=2;se<arguments.length;se++)q[se-2]=arguments[se];return h.prototype[D].apply(x,q)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function w(a){const h=a.length;if(h>0){const p=Array(h);for(let x=0;x<h;x++)p[x]=a[x];return p}return[]}function _(a,h){for(let x=1;x<arguments.length;x++){const D=arguments[x];var p=typeof D;if(p=p!="object"?p:D?Array.isArray(D)?"array":p:"null",p=="array"||p=="object"&&typeof D.length=="number"){p=a.length||0;const M=D.length||0;a.length=p+M;for(let q=0;q<M;q++)a[p+q]=D[q]}else a.push(D)}}class b{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function j(a){o.setTimeout(()=>{throw a},0)}function C(){var a=y;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class E{constructor(){this.h=this.g=null}add(h,p){const x=N.get();x.set(h,p),this.h?this.h.next=x:this.g=x,this.h=x}}var N=new b(()=>new P,a=>a.reset());class P{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let O,k=!1,y=new E,v=()=>{const a=Promise.resolve(void 0);O=()=>{a.then(T)}};function T(){for(var a;a=C();){try{a.h.call(a.g)}catch(p){j(p)}var h=N;h.j(a),h.h<100&&(h.h++,a.next=h.g,h.g=a)}k=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};o.addEventListener("test",p,h),o.removeEventListener("test",p,h)}catch{}return a}();function S(a){return/^[\s\xa0]*$/.test(a)}function Y(a,h){I.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,h)}m(Y,I),Y.prototype.init=function(a,h){const p=this.type=a.type,x=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget,h||(p=="mouseover"?h=a.fromElement:p=="mouseout"&&(h=a.toElement)),this.relatedTarget=h,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&Y.Z.h.call(this)},Y.prototype.h=function(){Y.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var oe="closure_listenable_"+(Math.random()*1e6|0),we=0;function Vt(a,h,p,x,D){this.listener=a,this.proxy=null,this.src=h,this.type=p,this.capture=!!x,this.ha=D,this.key=++we,this.da=this.fa=!1}function H(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function J(a,h,p){for(const x in a)h.call(p,a[x],x,a)}function te(a,h){for(const p in a)h.call(void 0,a[p],p,a)}function B(a){const h={};for(const p in a)h[p]=a[p];return h}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Lt(a,h){let p,x;for(let D=1;D<arguments.length;D++){x=arguments[D];for(p in x)a[p]=x[p];for(let M=0;M<ee.length;M++)p=ee[M],Object.prototype.hasOwnProperty.call(x,p)&&(a[p]=x[p])}}function ht(a){this.src=a,this.g={},this.h=0}ht.prototype.add=function(a,h,p,x,D){const M=a.toString();a=this.g[M],a||(a=this.g[M]=[],this.h++);const q=wt(a,h,x,D);return q>-1?(h=a[q],p||(h.fa=!1)):(h=new Vt(h,this.src,M,!!x,D),h.fa=p,a.push(h)),h};function tn(a,h){const p=h.type;if(p in a.g){var x=a.g[p],D=Array.prototype.indexOf.call(x,h,void 0),M;(M=D>=0)&&Array.prototype.splice.call(x,D,1),M&&(H(h),a.g[p].length==0&&(delete a.g[p],a.h--))}}function wt(a,h,p,x){for(let D=0;D<a.length;++D){const M=a[D];if(!M.da&&M.listener==h&&M.capture==!!p&&M.ha==x)return D}return-1}var Gt="closure_lm_"+(Math.random()*1e6|0),Pr={};function cn(a,h,p,x,D){if(Array.isArray(h)){for(let M=0;M<h.length;M++)cn(a,h[M],p,x,D);return null}return p=Fe(p),a&&a[oe]?a.J(h,p,u(x)?!!x.capture:!1,D):V(a,h,p,!1,x,D)}function V(a,h,p,x,D,M){if(!h)throw Error("Invalid event type");const q=u(D)?!!D.capture:!!D;let se=ci(a);if(se||(a[Gt]=se=new ht(a)),p=se.add(h,p,x,q,M),p.proxy)return p;if(x=$(),p.proxy=x,x.src=a,x.listener=p,a.addEventListener)R||(D=q),D===void 0&&(D=!1),a.addEventListener(h.toString(),x,D);else if(a.attachEvent)a.attachEvent(ft(h.toString()),x);else if(a.addListener&&a.removeListener)a.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return p}function $(){function a(p){return h.call(a.src,a.listener,p)}const h=ui;return a}function G(a,h,p,x,D){if(Array.isArray(h))for(var M=0;M<h.length;M++)G(a,h[M],p,x,D);else x=u(x)?!!x.capture:!!x,p=Fe(p),a&&a[oe]?(a=a.i,M=String(h).toString(),M in a.g&&(h=a.g[M],p=wt(h,p,x,D),p>-1&&(H(h[p]),Array.prototype.splice.call(h,p,1),h.length==0&&(delete a.g[M],a.h--)))):a&&(a=ci(a))&&(h=a.g[h.toString()],a=-1,h&&(a=wt(h,p,x,D)),(p=a>-1?h[a]:null)&&le(p))}function le(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[oe])tn(h.i,a);else{var p=a.type,x=a.proxy;h.removeEventListener?h.removeEventListener(p,x,a.capture):h.detachEvent?h.detachEvent(ft(p),x):h.addListener&&h.removeListener&&h.removeListener(x),(p=ci(h))?(tn(p,a),p.h==0&&(p.src=null,h[Gt]=null)):H(a)}}}function ft(a){return a in Pr?Pr[a]:Pr[a]="on"+a}function ui(a,h){if(a.da)a=!0;else{h=new Y(h,this);const p=a.listener,x=a.ha||a.src;a.fa&&le(a),a=p.call(x,h)}return a}function ci(a){return a=a[Gt],a instanceof ht?a:null}var di="__closure_events_fn_"+(Math.random()*1e9>>>0);function Fe(a){return typeof a=="function"?a:(a[di]||(a[di]=function(h){return a.handleEvent(h)}),a[di])}function Ve(){A.call(this),this.i=new ht(this),this.M=this,this.G=null}m(Ve,A),Ve.prototype[oe]=!0,Ve.prototype.removeEventListener=function(a,h,p,x){G(this,a,h,p,x)};function Qe(a,h){var p,x=a.G;if(x)for(p=[];x;x=x.G)p.push(x);if(a=a.M,x=h.type||h,typeof h=="string")h=new I(h,a);else if(h instanceof I)h.target=h.target||a;else{var D=h;h=new I(x,a),Lt(h,D)}D=!0;let M,q;if(p)for(q=p.length-1;q>=0;q--)M=h.g=p[q],D=ls(M,x,!0,h)&&D;if(M=h.g=a,D=ls(M,x,!0,h)&&D,D=ls(M,x,!1,h)&&D,p)for(q=0;q<p.length;q++)M=h.g=p[q],D=ls(M,x,!1,h)&&D}Ve.prototype.N=function(){if(Ve.Z.N.call(this),this.i){var a=this.i;for(const h in a.g){const p=a.g[h];for(let x=0;x<p.length;x++)H(p[x]);delete a.g[h],a.h--}}this.G=null},Ve.prototype.J=function(a,h,p,x){return this.i.add(String(a),h,!1,p,x)},Ve.prototype.K=function(a,h,p,x){return this.i.add(String(a),h,!0,p,x)};function ls(a,h,p,x){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();let D=!0;for(let M=0;M<h.length;++M){const q=h[M];if(q&&!q.da&&q.capture==p){const se=q.listener,Ke=q.ha||q.src;q.fa&&tn(a.i,q),D=se.call(Ke,x)!==!1&&D}}return D&&!x.defaultPrevented}function s_(a,h){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=d(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(a,h||0)}function xf(a){a.g=s_(()=>{a.g=null,a.i&&(a.i=!1,xf(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class i_ extends A{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:xf(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hi(a){A.call(this),this.h=a,this.g={}}m(hi,A);var _f=[];function wf(a){J(a.g,function(h,p){this.g.hasOwnProperty(p)&&le(h)},a),a.g={}}hi.prototype.N=function(){hi.Z.N.call(this),wf(this)},hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gu=o.JSON.stringify,o_=o.JSON.parse,a_=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Ef(){}function Tf(){}var fi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function yu(){I.call(this,"d")}m(yu,I);function vu(){I.call(this,"c")}m(vu,I);var Dr={},Sf=null;function $o(){return Sf=Sf||new Ve}Dr.Ia="serverreachability";function Cf(a){I.call(this,Dr.Ia,a)}m(Cf,I);function pi(a){const h=$o();Qe(h,new Cf(h))}Dr.STAT_EVENT="statevent";function If(a,h){I.call(this,Dr.STAT_EVENT,a),this.stat=h}m(If,I);function Et(a){const h=$o();Qe(h,new If(h,a))}Dr.Ja="timingevent";function Nf(a,h){I.call(this,Dr.Ja,a),this.size=h}m(Nf,I);function mi(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},h)}function gi(){this.g=!0}gi.prototype.ua=function(){this.g=!1};function l_(a,h,p,x,D,M){a.info(function(){if(a.g)if(M){var q="",se=M.split("&");for(let xe=0;xe<se.length;xe++){var Ke=se[xe].split("=");if(Ke.length>1){const tt=Ke[0];Ke=Ke[1];const hn=tt.split("_");q=hn.length>=2&&hn[1]=="type"?q+(tt+"="+Ke+"&"):q+(tt+"=redacted&")}}}else q=null;else q=M;return"XMLHTTP REQ ("+x+") [attempt "+D+"]: "+h+`
`+p+`
`+q})}function u_(a,h,p,x,D,M,q){a.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+D+"]: "+h+`
`+p+`
`+M+" "+q})}function us(a,h,p,x){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+d_(a,p)+(x?" "+x:"")})}function c_(a,h){a.info(function(){return"TIMEOUT: "+h})}gi.prototype.info=function(){};function d_(a,h){if(!a.g)return h;if(!h)return null;try{const M=JSON.parse(h);if(M){for(a=0;a<M.length;a++)if(Array.isArray(M[a])){var p=M[a];if(!(p.length<2)){var x=p[1];if(Array.isArray(x)&&!(x.length<1)){var D=x[0];if(D!="noop"&&D!="stop"&&D!="close")for(let q=1;q<x.length;q++)x[q]=""}}}}return gu(M)}catch{return h}}var qo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Af={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},bf;function xu(){}m(xu,Ef),xu.prototype.g=function(){return new XMLHttpRequest},bf=new xu;function yi(a){return encodeURIComponent(String(a))}function h_(a){var h=1;a=a.split(":");const p=[];for(;h>0&&a.length;)p.push(a.shift()),h--;return a.length&&p.push(a.join(":")),p}function qn(a,h,p,x){this.j=a,this.i=h,this.l=p,this.S=x||1,this.V=new hi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new jf}function jf(){this.i=null,this.g="",this.h=!1}var Rf={},_u={};function wu(a,h,p){a.M=1,a.A=Wo(dn(h)),a.u=p,a.R=!0,kf(a,null)}function kf(a,h){a.F=Date.now(),Ho(a),a.B=dn(a.A);var p=a.B,x=a.S;Array.isArray(x)||(x=[String(x)]),Hf(p.i,"t",x),a.C=0,p=a.j.L,a.h=new jf,a.g=up(a.j,p?h:null,!a.u),a.P>0&&(a.O=new i_(d(a.Y,a,a.g),a.P)),h=a.V,p=a.g,x=a.ba;var D="readystatechange";Array.isArray(D)||(D&&(_f[0]=D.toString()),D=_f);for(let M=0;M<D.length;M++){const q=cn(p,D[M],x||h.handleEvent,!1,h.h||h);if(!q)break;h.g[q.key]=q}h=a.J?B(a.J):{},a.u?(a.v||(a.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,h)):(a.v="GET",a.g.ea(a.B,a.v,null,h)),pi(),l_(a.i,a.v,a.B,a.l,a.S,a.u)}qn.prototype.ba=function(a){a=a.target;const h=this.O;h&&Gn(a)==3?h.j():this.Y(a)},qn.prototype.Y=function(a){try{if(a==this.g)e:{const se=Gn(this.g),Ke=this.g.ya(),xe=this.g.ca();if(!(se<3)&&(se!=3||this.g&&(this.h.h||this.g.la()||Jf(this.g)))){this.K||se!=4||Ke==7||(Ke==8||xe<=0?pi(3):pi(2)),Eu(this);var h=this.g.ca();this.X=h;var p=f_(this);if(this.o=h==200,u_(this.i,this.v,this.B,this.l,this.S,se,h),this.o){if(this.U&&!this.L){t:{if(this.g){var x,D=this.g;if((x=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(x)){var M=x;break t}}M=null}if(a=M)us(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Tu(this,a);else{this.o=!1,this.m=3,Et(12),Vr(this),vi(this);break e}}if(this.R){a=!0;let tt;for(;!this.K&&this.C<p.length;)if(tt=p_(this,p),tt==_u){se==4&&(this.m=4,Et(14),a=!1),us(this.i,this.l,null,"[Incomplete Response]");break}else if(tt==Rf){this.m=4,Et(15),us(this.i,this.l,p,"[Invalid Chunk]"),a=!1;break}else us(this.i,this.l,tt,null),Tu(this,tt);if(Pf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),se!=4||p.length!=0||this.h.h||(this.m=1,Et(16),a=!1),this.o=this.o&&a,!a)us(this.i,this.l,p,"[Invalid Chunked Response]"),Vr(this),vi(this);else if(p.length>0&&!this.W){this.W=!0;var q=this.j;q.g==this&&q.aa&&!q.P&&(q.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),Ru(q),q.P=!0,Et(11))}}else us(this.i,this.l,p,null),Tu(this,p);se==4&&Vr(this),this.o&&!this.K&&(se==4?ip(this.j,this):(this.o=!1,Ho(this)))}else A_(this.g),h==400&&p.indexOf("Unknown SID")>0?(this.m=3,Et(12)):(this.m=0,Et(13)),Vr(this),vi(this)}}}catch{}finally{}};function f_(a){if(!Pf(a))return a.g.la();const h=Jf(a.g);if(h==="")return"";let p="";const x=h.length,D=Gn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Vr(a),vi(a),"";a.h.i=new o.TextDecoder}for(let M=0;M<x;M++)a.h.h=!0,p+=a.h.i.decode(h[M],{stream:!(D&&M==x-1)});return h.length=0,a.h.g+=p,a.C=0,a.h.g}function Pf(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function p_(a,h){var p=a.C,x=h.indexOf(`
`,p);return x==-1?_u:(p=Number(h.substring(p,x)),isNaN(p)?Rf:(x+=1,x+p>h.length?_u:(h=h.slice(x,x+p),a.C=x+p,h)))}qn.prototype.cancel=function(){this.K=!0,Vr(this)};function Ho(a){a.T=Date.now()+a.H,Df(a,a.H)}function Df(a,h){if(a.D!=null)throw Error("WatchDog timer not null");a.D=mi(d(a.aa,a),h)}function Eu(a){a.D&&(o.clearTimeout(a.D),a.D=null)}qn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(c_(this.i,this.B),this.M!=2&&(pi(),Et(17)),Vr(this),this.m=2,vi(this)):Df(this,this.T-a)};function vi(a){a.j.I==0||a.K||ip(a.j,a)}function Vr(a){Eu(a);var h=a.O;h&&typeof h.dispose=="function"&&h.dispose(),a.O=null,wf(a.V),a.g&&(h=a.g,a.g=null,h.abort(),h.dispose())}function Tu(a,h){try{var p=a.j;if(p.I!=0&&(p.g==a||Su(p.h,a))){if(!a.L&&Su(p.h,a)&&p.I==3){try{var x=p.Ba.g.parse(h)}catch{x=null}if(Array.isArray(x)&&x.length==3){var D=x;if(D[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<a.F)Yo(p),Ko(p);else break e;ju(p),Et(18)}}else p.xa=D[1],0<p.xa-p.K&&D[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=mi(d(p.Va,p),6e3));Mf(p.h)<=1&&p.ta&&(p.ta=void 0)}else Mr(p,11)}else if((a.L||p.g==a)&&Yo(p),!S(h))for(D=p.Ba.g.parse(h),h=0;h<D.length;h++){let xe=D[h];const tt=xe[0];if(!(tt<=p.K))if(p.K=tt,xe=xe[1],p.I==2)if(xe[0]=="c"){p.M=xe[1],p.ba=xe[2];const hn=xe[3];hn!=null&&(p.ka=hn,p.j.info("VER="+p.ka));const Or=xe[4];Or!=null&&(p.za=Or,p.j.info("SVER="+p.za));const Qn=xe[5];Qn!=null&&typeof Qn=="number"&&Qn>0&&(x=1.5*Qn,p.O=x,p.j.info("backChannelRequestTimeoutMs_="+x)),x=p;const Kn=a.g;if(Kn){const Zo=Kn.g?Kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zo){var M=x.h;M.g||Zo.indexOf("spdy")==-1&&Zo.indexOf("quic")==-1&&Zo.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Cu(M,M.h),M.h=null))}if(x.G){const ku=Kn.g?Kn.g.getResponseHeader("X-HTTP-Session-Id"):null;ku&&(x.wa=ku,Te(x.J,x.G,ku))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-a.F,p.j.info("Handshake RTT: "+p.T+"ms")),x=p;var q=a;if(x.na=lp(x,x.L?x.ba:null,x.W),q.L){Of(x.h,q);var se=q,Ke=x.O;Ke&&(se.H=Ke),se.D&&(Eu(se),Ho(se)),x.g=q}else rp(x);p.i.length>0&&Xo(p)}else xe[0]!="stop"&&xe[0]!="close"||Mr(p,7);else p.I==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?Mr(p,7):bu(p):xe[0]!="noop"&&p.l&&p.l.qa(xe),p.A=0)}}pi(4)}catch{}}var m_=class{constructor(a,h){this.g=a,this.map=h}};function Vf(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Lf(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Mf(a){return a.h?1:a.g?a.g.size:0}function Su(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Cu(a,h){a.g?a.g.add(h):a.h=h}function Of(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Vf.prototype.cancel=function(){if(this.i=Ff(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Ff(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const p of a.g.values())h=h.concat(p.G);return h}return w(a.i)}var Uf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function g_(a,h){if(a){a=a.split("&");for(let p=0;p<a.length;p++){const x=a[p].indexOf("=");let D,M=null;x>=0?(D=a[p].substring(0,x),M=a[p].substring(x+1)):D=a[p],h(D,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Hn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;a instanceof Hn?(this.l=a.l,xi(this,a.j),this.o=a.o,this.g=a.g,_i(this,a.u),this.h=a.h,Iu(this,Wf(a.i)),this.m=a.m):a&&(h=String(a).match(Uf))?(this.l=!1,xi(this,h[1]||"",!0),this.o=wi(h[2]||""),this.g=wi(h[3]||"",!0),_i(this,h[4]),this.h=wi(h[5]||"",!0),Iu(this,h[6]||"",!0),this.m=wi(h[7]||"")):(this.l=!1,this.i=new Ti(null,this.l))}Hn.prototype.toString=function(){const a=[];var h=this.j;h&&a.push(Ei(h,Bf,!0),":");var p=this.g;return(p||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Ei(h,Bf,!0),"@"),a.push(yi(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&a.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(Ei(p,p.charAt(0)=="/"?x_:v_,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",Ei(p,w_)),a.join("")},Hn.prototype.resolve=function(a){const h=dn(this);let p=!!a.j;p?xi(h,a.j):p=!!a.o,p?h.o=a.o:p=!!a.g,p?h.g=a.g:p=a.u!=null;var x=a.h;if(p)_i(h,a.u);else if(p=!!a.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var D=h.h.lastIndexOf("/");D!=-1&&(x=h.h.slice(0,D+1)+x)}if(D=x,D==".."||D==".")x="";else if(D.indexOf("./")!=-1||D.indexOf("/.")!=-1){x=D.lastIndexOf("/",0)==0,D=D.split("/");const M=[];for(let q=0;q<D.length;){const se=D[q++];se=="."?x&&q==D.length&&M.push(""):se==".."?((M.length>1||M.length==1&&M[0]!="")&&M.pop(),x&&q==D.length&&M.push("")):(M.push(se),x=!0)}x=M.join("/")}else x=D}return p?h.h=x:p=a.i.toString()!=="",p?Iu(h,Wf(a.i)):p=!!a.m,p&&(h.m=a.m),h};function dn(a){return new Hn(a)}function xi(a,h,p){a.j=p?wi(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function _i(a,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);a.u=h}else a.u=null}function Iu(a,h,p){h instanceof Ti?(a.i=h,E_(a.i,a.l)):(p||(h=Ei(h,__)),a.i=new Ti(h,a.l))}function Te(a,h,p){a.i.set(h,p)}function Wo(a){return Te(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function wi(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ei(a,h,p){return typeof a=="string"?(a=encodeURI(a).replace(h,y_),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function y_(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Bf=/[#\/\?@]/g,v_=/[#\?:]/g,x_=/[#\?]/g,__=/[#\?@]/g,w_=/#/g;function Ti(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Lr(a){a.g||(a.g=new Map,a.h=0,a.i&&g_(a.i,function(h,p){a.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Ti.prototype,t.add=function(a,h){Lr(this),this.i=null,a=cs(this,a);let p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(h),this.h+=1,this};function zf(a,h){Lr(a),h=cs(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function $f(a,h){return Lr(a),h=cs(a,h),a.g.has(h)}t.forEach=function(a,h){Lr(this),this.g.forEach(function(p,x){p.forEach(function(D){a.call(h,D,x,this)},this)},this)};function qf(a,h){Lr(a);let p=[];if(typeof h=="string")$f(a,h)&&(p=p.concat(a.g.get(cs(a,h))));else for(a=Array.from(a.g.values()),h=0;h<a.length;h++)p=p.concat(a[h]);return p}t.set=function(a,h){return Lr(this),this.i=null,a=cs(this,a),$f(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=qf(this,a),a.length>0?String(a[0]):h):h};function Hf(a,h,p){zf(a,h),p.length>0&&(a.i=null,a.g.set(cs(a,h),w(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(let x=0;x<h.length;x++){var p=h[x];const D=yi(p);p=qf(this,p);for(let M=0;M<p.length;M++){let q=D;p[M]!==""&&(q+="="+yi(p[M])),a.push(q)}}return this.i=a.join("&")};function Wf(a){const h=new Ti;return h.i=a.i,a.g&&(h.g=new Map(a.g),h.h=a.h),h}function cs(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function E_(a,h){h&&!a.j&&(Lr(a),a.i=null,a.g.forEach(function(p,x){const D=x.toLowerCase();x!=D&&(zf(this,x),Hf(this,D,p))},a)),a.j=h}function T_(a,h){const p=new gi;if(o.Image){const x=new Image;x.onload=f(Wn,p,"TestLoadImage: loaded",!0,h,x),x.onerror=f(Wn,p,"TestLoadImage: error",!1,h,x),x.onabort=f(Wn,p,"TestLoadImage: abort",!1,h,x),x.ontimeout=f(Wn,p,"TestLoadImage: timeout",!1,h,x),o.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=a}else h(!1)}function S_(a,h){const p=new gi,x=new AbortController,D=setTimeout(()=>{x.abort(),Wn(p,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:x.signal}).then(M=>{clearTimeout(D),M.ok?Wn(p,"TestPingServer: ok",!0,h):Wn(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),Wn(p,"TestPingServer: error",!1,h)})}function Wn(a,h,p,x,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),x(p)}catch{}}function C_(){this.g=new a_}function Nu(a){this.i=a.Sb||null,this.h=a.ab||!1}m(Nu,Ef),Nu.prototype.g=function(){return new Go(this.i,this.h)};function Go(a,h){Ve.call(this),this.H=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Go,Ve),t=Go.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=h,this.readyState=1,Ci(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(h.body=a),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Si(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ci(this)),this.g&&(this.readyState=3,Ci(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Gf(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Gf(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Si(this):Ci(this),this.readyState==3&&Gf(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,Si(this))},t.Na=function(a){this.g&&(this.response=a,Si(this))},t.ga=function(){this.g&&Si(this)};function Si(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Ci(a)}t.setRequestHeader=function(a,h){this.A.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=h.next();return a.join(`\r
`)};function Ci(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Go.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Qf(a){let h="";return J(a,function(p,x){h+=x,h+=":",h+=p,h+=`\r
`}),h}function Au(a,h,p){e:{for(x in p){var x=!1;break e}x=!0}x||(p=Qf(p),typeof a=="string"?p!=null&&yi(p):Te(a,h,p))}function Le(a){Ve.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Le,Ve);var I_=/^https?$/i,N_=["POST","PUT"];t=Le.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,h,p,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():bf.g(),this.g.onreadystatechange=g(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(M){Kf(this,M);return}if(a=p||"",p=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var D in x)p.set(D,x[D]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const M of x.keys())p.set(M,x.get(M));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(p.keys()).find(M=>M.toLowerCase()=="content-type"),D=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(N_,h,void 0)>=0)||x||D||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,q]of p)this.g.setRequestHeader(M,q);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(M){Kf(this,M)}};function Kf(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.o=5,Xf(a),Qo(a)}function Xf(a){a.A||(a.A=!0,Qe(a,"complete"),Qe(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,Qe(this,"complete"),Qe(this,"abort"),Qo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qo(this,!0)),Le.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Yf(this):this.Xa())},t.Xa=function(){Yf(this)};function Yf(a){if(a.h&&typeof i<"u"){if(a.v&&Gn(a)==4)setTimeout(a.Ca.bind(a),0);else if(Qe(a,"readystatechange"),Gn(a)==4){a.h=!1;try{const M=a.ca();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var x;if(x=M===0){let q=String(a.D).match(Uf)[1]||null;!q&&o.self&&o.self.location&&(q=o.self.location.protocol.slice(0,-1)),x=!I_.test(q?q.toLowerCase():"")}p=x}if(p)Qe(a,"complete"),Qe(a,"success");else{a.o=6;try{var D=Gn(a)>2?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.ca()+"]",Xf(a)}}finally{Qo(a)}}}}function Qo(a,h){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const p=a.g;a.g=null,h||Qe(a,"ready");try{p.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Gn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Gn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),o_(h)}};function Jf(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function A_(a){const h={};a=(a.g&&Gn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<a.length;x++){if(S(a[x]))continue;var p=h_(a[x]);const D=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const M=h[D]||[];h[D]=M,M.push(p)}te(h,function(x){return x.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ii(a,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||h}function Zf(a){this.za=0,this.i=[],this.j=new gi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ii("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ii("baseRetryDelayMs",5e3,a),this.Za=Ii("retryDelaySeedMs",1e4,a),this.Ta=Ii("forwardChannelMaxRetries",2,a),this.va=Ii("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Vf(a&&a.concurrentRequestLimit),this.Ba=new C_,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Zf.prototype,t.ka=8,t.I=1,t.connect=function(a,h,p,x){Et(0),this.W=a,this.H=h||{},p&&x!==void 0&&(this.H.OSID=p,this.H.OAID=x),this.F=this.X,this.J=lp(this,null,this.W),Xo(this)};function bu(a){if(ep(a),a.I==3){var h=a.V++,p=dn(a.J);if(Te(p,"SID",a.M),Te(p,"RID",h),Te(p,"TYPE","terminate"),Ni(a,p),h=new qn(a,a.j,h),h.M=2,h.A=Wo(dn(p)),p=!1,o.navigator&&o.navigator.sendBeacon)try{p=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!p&&o.Image&&(new Image().src=h.A,p=!0),p||(h.g=up(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Ho(h)}ap(a)}function Ko(a){a.g&&(Ru(a),a.g.cancel(),a.g=null)}function ep(a){Ko(a),a.v&&(o.clearTimeout(a.v),a.v=null),Yo(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Xo(a){if(!Lf(a.h)&&!a.m){a.m=!0;var h=a.Ea;O||v(),k||(O(),k=!0),y.add(h,a),a.D=0}}function b_(a,h){return Mf(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=h.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=mi(d(a.Ea,a,h),op(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const D=new qn(this,this.j,a);let M=this.o;if(this.U&&(M?(M=B(M),Lt(M,this.U)):M=this.U),this.u!==null||this.R||(D.J=M,M=null),this.S)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var x=this.i[p];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(h+=x,h>4096){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=np(this,D,h),p=dn(this.J),Te(p,"RID",a),Te(p,"CVER",22),this.G&&Te(p,"X-HTTP-Session-Id",this.G),Ni(this,p),M&&(this.R?h="headers="+yi(Qf(M))+"&"+h:this.u&&Au(p,this.u,M)),Cu(this.h,D),this.Ra&&Te(p,"TYPE","init"),this.S?(Te(p,"$req",h),Te(p,"SID","null"),D.U=!0,wu(D,p,null)):wu(D,p,h),this.I=2}}else this.I==3&&(a?tp(this,a):this.i.length==0||Lf(this.h)||tp(this))};function tp(a,h){var p;h?p=h.l:p=a.V++;const x=dn(a.J);Te(x,"SID",a.M),Te(x,"RID",p),Te(x,"AID",a.K),Ni(a,x),a.u&&a.o&&Au(x,a.u,a.o),p=new qn(a,a.j,p,a.D+1),a.u===null&&(p.J=a.o),h&&(a.i=h.G.concat(a.i)),h=np(a,p,1e3),p.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Cu(a.h,p),wu(p,x,h)}function Ni(a,h){a.H&&J(a.H,function(p,x){Te(h,x,p)}),a.l&&J({},function(p,x){Te(h,x,p)})}function np(a,h,p){p=Math.min(a.i.length,p);const x=a.l?d(a.l.Ka,a.l,a):null;e:{var D=a.i;let se=-1;for(;;){const Ke=["count="+p];se==-1?p>0?(se=D[0].g,Ke.push("ofs="+se)):se=0:Ke.push("ofs="+se);let xe=!0;for(let tt=0;tt<p;tt++){var M=D[tt].g;const hn=D[tt].map;if(M-=se,M<0)se=Math.max(0,D[tt].g-100),xe=!1;else try{M="req"+M+"_"||"";try{var q=hn instanceof Map?hn:Object.entries(hn);for(const[Or,Qn]of q){let Kn=Qn;u(Qn)&&(Kn=gu(Qn)),Ke.push(M+Or+"="+encodeURIComponent(Kn))}}catch(Or){throw Ke.push(M+"type="+encodeURIComponent("_badmap")),Or}}catch{x&&x(hn)}}if(xe){q=Ke.join("&");break e}}q=void 0}return a=a.i.splice(0,p),h.G=a,q}function rp(a){if(!a.g&&!a.v){a.Y=1;var h=a.Da;O||v(),k||(O(),k=!0),y.add(h,a),a.A=0}}function ju(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=mi(d(a.Da,a),op(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,sp(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=mi(d(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Et(10),Ko(this),sp(this))};function Ru(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function sp(a){a.g=new qn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var h=dn(a.na);Te(h,"RID","rpc"),Te(h,"SID",a.M),Te(h,"AID",a.K),Te(h,"CI",a.F?"0":"1"),!a.F&&a.ia&&Te(h,"TO",a.ia),Te(h,"TYPE","xmlhttp"),Ni(a,h),a.u&&a.o&&Au(h,a.u,a.o),a.O&&(a.g.H=a.O);var p=a.g;a=a.ba,p.M=1,p.A=Wo(dn(h)),p.u=null,p.R=!0,kf(p,a)}t.Va=function(){this.C!=null&&(this.C=null,Ko(this),ju(this),Et(19))};function Yo(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function ip(a,h){var p=null;if(a.g==h){Yo(a),Ru(a),a.g=null;var x=2}else if(Su(a.h,h))p=h.G,Of(a.h,h),x=1;else return;if(a.I!=0){if(h.o)if(x==1){p=h.u?h.u.length:0,h=Date.now()-h.F;var D=a.D;x=$o(),Qe(x,new Nf(x,p)),Xo(a)}else rp(a);else if(D=h.m,D==3||D==0&&h.X>0||!(x==1&&b_(a,h)||x==2&&ju(a)))switch(p&&p.length>0&&(h=a.h,h.i=h.i.concat(p)),D){case 1:Mr(a,5);break;case 4:Mr(a,10);break;case 3:Mr(a,6);break;default:Mr(a,2)}}}function op(a,h){let p=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(p*=2),p*h}function Mr(a,h){if(a.j.info("Error code "+h),h==2){var p=d(a.bb,a),x=a.Ua;const D=!x;x=new Hn(x||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||xi(x,"https"),Wo(x),D?T_(x.toString(),p):S_(x.toString(),p)}else Et(2);a.I=0,a.l&&a.l.pa(h),ap(a),ep(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function ap(a){if(a.I=0,a.ja=[],a.l){const h=Ff(a.h);(h.length!=0||a.i.length!=0)&&(_(a.ja,h),_(a.ja,a.i),a.h.i.length=0,w(a.i),a.i.length=0),a.l.oa()}}function lp(a,h,p){var x=p instanceof Hn?dn(p):new Hn(p);if(x.g!="")h&&(x.g=h+"."+x.g),_i(x,x.u);else{var D=o.location;x=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;const M=new Hn(null);x&&xi(M,x),h&&(M.g=h),D&&_i(M,D),p&&(M.h=p),x=M}return p=a.G,h=a.wa,p&&h&&Te(x,p,h),Te(x,"VER",a.ka),Ni(a,x),x}function up(a,h,p){if(h&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Aa&&!a.ma?new Le(new Nu({ab:p})):new Le(a.ma),h.Fa(a.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function cp(){}t=cp.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Jo(){}Jo.prototype.g=function(a,h){return new Mt(a,h)};function Mt(a,h){Ve.call(this),this.g=new Zf(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(a?a["X-WebChannel-Client-Profile"]=h.sa:a={"X-WebChannel-Client-Profile":h.sa}),this.g.U=a,(a=h&&h.Qb)&&!S(a)&&(this.g.u=a),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!S(h)&&(this.g.G=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new ds(this)}m(Mt,Ve),Mt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Mt.prototype.close=function(){bu(this.g)},Mt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.v&&(p={},p.__data__=gu(a),a=p);h.i.push(new m_(h.Ya++,a)),h.I==3&&Xo(h)},Mt.prototype.N=function(){this.g.l=null,delete this.j,bu(this.g),delete this.g,Mt.Z.N.call(this)};function dp(a){yu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const p in h){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}m(dp,yu);function hp(){vu.call(this),this.status=1}m(hp,vu);function ds(a){this.g=a}m(ds,cp),ds.prototype.ra=function(){Qe(this.g,"a")},ds.prototype.qa=function(a){Qe(this.g,new dp(a))},ds.prototype.pa=function(a){Qe(this.g,new hp)},ds.prototype.oa=function(){Qe(this.g,"b")},Jo.prototype.createWebChannel=Jo.prototype.g,Mt.prototype.send=Mt.prototype.o,Mt.prototype.open=Mt.prototype.m,Mt.prototype.close=Mt.prototype.close,Nv=function(){return new Jo},Iv=function(){return $o()},Cv=Dr,_d={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},qo.NO_ERROR=0,qo.TIMEOUT=8,qo.HTTP_ERROR=6,Ma=qo,Af.COMPLETE="complete",Sv=Af,Tf.EventType=fi,fi.OPEN="a",fi.CLOSE="b",fi.ERROR="c",fi.MESSAGE="d",Ve.prototype.listen=Ve.prototype.J,Bi=Tf,Le.prototype.listenOnce=Le.prototype.K,Le.prototype.getLastError=Le.prototype.Ha,Le.prototype.getLastErrorCode=Le.prototype.ya,Le.prototype.getStatus=Le.prototype.ca,Le.prototype.getResponseJson=Le.prototype.La,Le.prototype.getResponseText=Le.prototype.la,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Fa,Tv=Le}).apply(typeof va<"u"?va:typeof self<"u"?self:typeof window<"u"?window:{});const $m="@firebase/firestore",qm="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ii="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es=new yv("@firebase/firestore");function ps(){return es.logLevel}function W(t,...e){if(es.logLevel<=fe.DEBUG){const n=e.map(Uh);es.debug(`Firestore (${ii}): ${t}`,...n)}}function Un(t,...e){if(es.logLevel<=fe.ERROR){const n=e.map(Uh);es.error(`Firestore (${ii}): ${t}`,...n)}}function Ws(t,...e){if(es.logLevel<=fe.WARN){const n=e.map(Uh);es.warn(`Firestore (${ii}): ${t}`,...n)}}function Uh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Av(t,r,n)}function Av(t,e,n){let r=`FIRESTORE (${ii}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Un(r),new Error(r)}function ge(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Av(e,s,r)}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends si{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}}class XT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class YT{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ge(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new yr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new yr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new yr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ge(typeof r.accessToken=="string",31837,{l:r}),new bv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string",2055,{h:e}),new yt(e)}}class JT{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ZT{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new JT(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Hm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eS{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kT(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ge(this.o===void 0,3512);const r=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Hm(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ge(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Hm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=tS(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function wd(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return cc(s)===cc(i)?ce(s,i):cc(s)?1:-1}return ce(t.length,e.length)}const nS=55296,rS=57343;function cc(t){const e=t.charCodeAt(0);return e>=nS&&e<=rS}function Gs(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm="__name__";class gn{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Z(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return gn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=gn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ce(e.length,n.length)}static compareSegments(e,n){const r=gn.isNumericId(e),s=gn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?gn.extractNumericId(e).compare(gn.extractNumericId(n)):wd(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gr.fromString(e.substring(4,e.length-2))}}class Ce extends gn{construct(e,n,r){return new Ce(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ce(n)}static emptyPath(){return new Ce([])}}const sS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lt extends gn{construct(e,n,r){return new lt(e,n,r)}static isValidIdentifier(e){return sS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Wm}static keyField(){return new lt([Wm])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new K(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new K(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(r+=u,s++):(i(),s++)}if(i(),o)throw new K(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lt(n)}static emptyPath(){return new lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(Ce.fromString(e))}static fromName(e){return new X(Ce.fromString(e).popFirst(5))}static empty(){return new X(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new Ce(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(t,e,n){if(!n)throw new K(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function iS(t,e,n,r){if(e===!0&&r===!0)throw new K(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Gm(t){if(!X.isDocumentKey(t))throw new K(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Qm(t){if(X.isDocumentKey(t))throw new K(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Rv(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function zh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z(12329,{type:typeof t})}function wn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=zh(t);throw new K(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t,e){const n={typeString:t};return e&&(n.value=e),n}function Oo(t,e){if(!Rv(t))throw new K(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new K(U.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km=-62135596800,Xm=1e6;class Ie{static now(){return Ie.fromMillis(Date.now())}static fromDate(e){return Ie.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Xm);return new Ie(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Km)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Xm}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ie._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Oo(e,Ie._jsonSchema))return new Ie(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Km;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ie._jsonSchemaVersion="firestore/timestamp/1.0",Ie._jsonSchema={type:He("string",Ie._jsonSchemaVersion),seconds:He("number"),nanoseconds:He("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{static fromTimestamp(e){return new ne(e)}static min(){return new ne(new Ie(0,0))}static max(){return new ne(new Ie(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=-1;function oS(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ne.fromTimestamp(r===1e9?new Ie(n+1,0):new Ie(n,r));return new wr(s,X.empty(),e)}function aS(t){return new wr(t.readTime,t.key,No)}class wr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new wr(ne.min(),X.empty(),No)}static max(){return new wr(ne.max(),X.empty(),No)}}function lS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oi(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==uS)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(u=>{++s,u.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let u=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(f=>{o[d]=f,++u,u===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function dS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ai(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Kl.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h=-1;function Xl(t){return t==null}function vl(t){return t===0&&1/t==-1/0}function hS(t){return typeof t=="number"&&Number.isInteger(t)&&!vl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="";function fS(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ym(e)),e=pS(t.get(n),e);return Ym(e)}function pS(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case kv:n+="";break;default:n+=i}}return n}function Ym(t){return t+kv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Rr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Pv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){this.comparator=e,this.root=n||ot.EMPTY}insert(e,n){return new De(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ot.BLACK,null,null))}remove(e){return new De(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ot.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xa(this.root,e,this.comparator,!1)}getReverseIterator(){return new xa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xa(this.root,e,this.comparator,!0)}}class xa{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ot{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ot.RED,this.left=s??ot.EMPTY,this.right=i??ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ot(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ot.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Z(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Z(27949);return e+(this.isRed()?0:1)}}ot.EMPTY=null,ot.RED=!0,ot.BLACK=!1;ot.EMPTY=new class{constructor(){this.size=0}get key(){throw Z(57766)}get value(){throw Z(16141)}get color(){throw Z(16727)}get left(){throw Z(29726)}get right(){throw Z(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new ot(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Zm(this.data.getIterator())}getIteratorFrom(e){return new Zm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new et(this.comparator);return n.data=e,n}}class Zm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new Ut([])}unionWith(e){let n=new et(lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ut(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Gs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Dv("Invalid base64 string: "+i):i}}(e);return new dt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const mS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Er(t){if(ge(!!t,39018),typeof t=="string"){let e=0;const n=mS.exec(t);if(ge(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ue(t.seconds),nanos:Ue(t.nanos)}}function Ue(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Tr(t){return typeof t=="string"?dt.fromBase64String(t):dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="server_timestamp",Lv="__type__",Mv="__previous_value__",Ov="__local_write_time__";function qh(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Lv])==null?void 0:r.stringValue)===Vv}function Yl(t){const e=t.mapValue.fields[Mv];return qh(e)?Yl(e):e}function Ao(t){const e=Er(t.mapValue.fields[Ov].timestampValue);return new Ie(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,n,r,s,i,o,u,c,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=f}}const xl="(default)";class bo{constructor(e,n){this.projectId=e,this.database=n||xl}static empty(){return new bo("","")}get isDefaultDatabase(){return this.database===xl}isEqual(e){return e instanceof bo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="__type__",yS="__max__",_a={mapValue:{}},Uv="__vector__",_l="value";function Sr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?qh(t)?4:xS(t)?9007199254740991:vS(t)?10:11:Z(28295,{value:t})}function Nn(t,e){if(t===e)return!0;const n=Sr(t);if(n!==Sr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ao(t).isEqual(Ao(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Er(s.timestampValue),u=Er(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Tr(s.bytesValue).isEqual(Tr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ue(s.geoPointValue.latitude)===Ue(i.geoPointValue.latitude)&&Ue(s.geoPointValue.longitude)===Ue(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ue(s.integerValue)===Ue(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ue(s.doubleValue),u=Ue(i.doubleValue);return o===u?vl(o)===vl(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return Gs(t.arrayValue.values||[],e.arrayValue.values||[],Nn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},u=i.mapValue.fields||{};if(Jm(o)!==Jm(u))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!Nn(o[c],u[c])))return!1;return!0}(t,e);default:return Z(52216,{left:t})}}function jo(t,e){return(t.values||[]).find(n=>Nn(n,e))!==void 0}function Qs(t,e){if(t===e)return 0;const n=Sr(t),r=Sr(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(i,o){const u=Ue(i.integerValue||i.doubleValue),c=Ue(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return eg(t.timestampValue,e.timestampValue);case 4:return eg(Ao(t),Ao(e));case 5:return wd(t.stringValue,e.stringValue);case 6:return function(i,o){const u=Tr(i),c=Tr(o);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),c=o.split("/");for(let d=0;d<u.length&&d<c.length;d++){const f=ce(u[d],c[d]);if(f!==0)return f}return ce(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const u=ce(Ue(i.latitude),Ue(o.latitude));return u!==0?u:ce(Ue(i.longitude),Ue(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return tg(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,w,_,b;const u=i.fields||{},c=o.fields||{},d=(g=u[_l])==null?void 0:g.arrayValue,f=(w=c[_l])==null?void 0:w.arrayValue,m=ce(((_=d==null?void 0:d.values)==null?void 0:_.length)||0,((b=f==null?void 0:f.values)==null?void 0:b.length)||0);return m!==0?m:tg(d,f)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===_a.mapValue&&o===_a.mapValue)return 0;if(i===_a.mapValue)return 1;if(o===_a.mapValue)return-1;const u=i.fields||{},c=Object.keys(u),d=o.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let m=0;m<c.length&&m<f.length;++m){const g=wd(c[m],f[m]);if(g!==0)return g;const w=Qs(u[c[m]],d[f[m]]);if(w!==0)return w}return ce(c.length,f.length)}(t.mapValue,e.mapValue);default:throw Z(23264,{he:n})}}function eg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=Er(t),r=Er(e),s=ce(n.seconds,r.seconds);return s!==0?s:ce(n.nanos,r.nanos)}function tg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Qs(n[s],r[s]);if(i)return i}return ce(n.length,r.length)}function Ks(t){return Ed(t)}function Ed(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Er(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Tr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ed(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Ed(n.fields[o])}`;return s+"}"}(t.mapValue):Z(61005,{value:t})}function Oa(t){switch(Sr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yl(t);return e?16+Oa(e):16;case 5:return 2*t.stringValue.length;case 6:return Tr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Oa(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Rr(r.fields,(i,o)=>{s+=i.length+Oa(o)}),s}(t.mapValue);default:throw Z(13486,{value:t})}}function Td(t){return!!t&&"integerValue"in t}function Hh(t){return!!t&&"arrayValue"in t}function ng(t){return!!t&&"nullValue"in t}function rg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fa(t){return!!t&&"mapValue"in t}function vS(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Fv])==null?void 0:r.stringValue)===Uv}function to(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Rr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=to(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=to(t.arrayValue.values[n]);return e}return{...t}}function xS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===yS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.value=e}static empty(){return new jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Fa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=to(n)}setAll(e){let n=lt.emptyPath(),r={},s=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=u.popLast()}o?r[u.lastSegment()]=to(o):s.push(u.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Fa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Nn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Fa(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Rr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new jt(to(this.value))}}function Bv(t){const e=[];return Rr(t.fields,(n,r)=>{const s=new lt([n]);if(Fa(r)){const i=Bv(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ut(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n,r,s,i,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new xt(e,0,ne.min(),ne.min(),ne.min(),jt.empty(),0)}static newFoundDocument(e,n,r,s){return new xt(e,1,n,ne.min(),r,s,0)}static newNoDocument(e,n){return new xt(e,2,n,ne.min(),ne.min(),jt.empty(),0)}static newUnknownDocument(e,n){return new xt(e,3,n,ne.min(),ne.min(),jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,n){this.position=e,this.inclusive=n}}function sg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=X.comparator(X.fromName(o.referenceValue),n.key):r=Qs(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function ig(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Nn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n="asc"){this.field=e,this.dir=n}}function _S(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{}class Je extends zv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ES(e,n,r):n==="array-contains"?new CS(e,r):n==="in"?new IS(e,r):n==="not-in"?new NS(e,r):n==="array-contains-any"?new AS(e,r):new Je(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new TS(e,r):new SS(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Qs(n,this.value)):n!==null&&Sr(this.value)===Sr(n)&&this.matchesComparison(Qs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class An extends zv{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new An(e,n)}matches(e){return $v(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function $v(t){return t.op==="and"}function qv(t){return wS(t)&&$v(t)}function wS(t){for(const e of t.filters)if(e instanceof An)return!1;return!0}function Sd(t){if(t instanceof Je)return t.field.canonicalString()+t.op.toString()+Ks(t.value);if(qv(t))return t.filters.map(e=>Sd(e)).join(",");{const e=t.filters.map(n=>Sd(n)).join(",");return`${t.op}(${e})`}}function Hv(t,e){return t instanceof Je?function(r,s){return s instanceof Je&&r.op===s.op&&r.field.isEqual(s.field)&&Nn(r.value,s.value)}(t,e):t instanceof An?function(r,s){return s instanceof An&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,u)=>i&&Hv(o,s.filters[u]),!0):!1}(t,e):void Z(19439)}function Wv(t){return t instanceof Je?function(n){return`${n.field.canonicalString()} ${n.op} ${Ks(n.value)}`}(t):t instanceof An?function(n){return n.op.toString()+" {"+n.getFilters().map(Wv).join(" ,")+"}"}(t):"Filter"}class ES extends Je{constructor(e,n,r){super(e,n,r),this.key=X.fromName(r.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class TS extends Je{constructor(e,n){super(e,"in",n),this.keys=Gv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class SS extends Je{constructor(e,n){super(e,"not-in",n),this.keys=Gv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Gv(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>X.fromName(r.referenceValue))}class CS extends Je{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Hh(n)&&jo(n.arrayValue,this.value)}}class IS extends Je{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&jo(this.value.arrayValue,n)}}class NS extends Je{constructor(e,n){super(e,"not-in",n)}matches(e){if(jo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!jo(this.value.arrayValue,n)}}class AS extends Je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Hh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>jo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,n=null,r=[],s=[],i=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=u,this.Te=null}}function og(t,e=null,n=[],r=[],s=null,i=null,o=null){return new bS(t,e,n,r,s,i,o)}function Wh(t){const e=re(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Sd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Xl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ks(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ks(r)).join(",")),e.Te=n}return e.Te}function Gh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!_S(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Hv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ig(t.startAt,e.startAt)&&ig(t.endAt,e.endAt)}function Cd(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n=null,r=[],s=[],i=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function jS(t,e,n,r,s,i,o,u){return new Jl(t,e,n,r,s,i,o,u)}function Zl(t){return new Jl(t)}function ag(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function RS(t){return t.collectionGroup!==null}function no(t){const e=re(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new et(lt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new El(i,r))}),n.has(lt.keyField().canonicalString())||e.Ie.push(new El(lt.keyField(),r))}return e.Ie}function En(t){const e=re(t);return e.Ee||(e.Ee=kS(e,no(t))),e.Ee}function kS(t,e){if(t.limitType==="F")return og(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new El(s.field,i)});const n=t.endAt?new wl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new wl(t.startAt.position,t.startAt.inclusive):null;return og(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Id(t,e,n){return new Jl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function eu(t,e){return Gh(En(t),En(e))&&t.limitType===e.limitType}function Qv(t){return`${Wh(En(t))}|lt:${t.limitType}`}function ms(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Wv(s)).join(", ")}]`),Xl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ks(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ks(s)).join(",")),`Target(${r})`}(En(t))}; limitType=${t.limitType})`}function tu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):X.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of no(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,u,c){const d=sg(o,u,c);return o.inclusive?d<=0:d<0}(r.startAt,no(r),s)||r.endAt&&!function(o,u,c){const d=sg(o,u,c);return o.inclusive?d>=0:d>0}(r.endAt,no(r),s))}(t,e)}function PS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Kv(t){return(e,n)=>{let r=!1;for(const s of no(t)){const i=DS(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function DS(t,e,n){const r=t.field.isKeyField()?X.comparator(e.key,n.key):function(i,o,u){const c=o.data.field(i),d=u.data.field(i);return c!==null&&d!==null?Qs(c,d):Z(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Rr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Pv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=new De(X.comparator);function Bn(){return VS}const Xv=new De(X.comparator);function zi(...t){let e=Xv;for(const n of t)e=e.insert(n.key,n);return e}function Yv(t){let e=Xv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Hr(){return ro()}function Jv(){return ro()}function ro(){return new os(t=>t.toString(),(t,e)=>t.isEqual(e))}const LS=new De(X.comparator),MS=new et(X.comparator);function de(...t){let e=MS;for(const n of t)e=e.add(n);return e}const OS=new et(ce);function FS(){return OS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vl(e)?"-0":e}}function Zv(t){return{integerValue:""+t}}function US(t,e){return hS(e)?Zv(e):Qh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(){this._=void 0}}function BS(t,e,n){return t instanceof Tl?function(s,i){const o={fields:{[Lv]:{stringValue:Vv},[Ov]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&qh(i)&&(i=Yl(i)),i&&(o.fields[Mv]=i),{mapValue:o}}(n,e):t instanceof Ro?tx(t,e):t instanceof ko?nx(t,e):function(s,i){const o=ex(s,i),u=lg(o)+lg(s.Ae);return Td(o)&&Td(s.Ae)?Zv(u):Qh(s.serializer,u)}(t,e)}function zS(t,e,n){return t instanceof Ro?tx(t,e):t instanceof ko?nx(t,e):n}function ex(t,e){return t instanceof Sl?function(r){return Td(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Tl extends nu{}class Ro extends nu{constructor(e){super(),this.elements=e}}function tx(t,e){const n=rx(e);for(const r of t.elements)n.some(s=>Nn(s,r))||n.push(r);return{arrayValue:{values:n}}}class ko extends nu{constructor(e){super(),this.elements=e}}function nx(t,e){let n=rx(e);for(const r of t.elements)n=n.filter(s=>!Nn(s,r));return{arrayValue:{values:n}}}class Sl extends nu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function lg(t){return Ue(t.integerValue||t.doubleValue)}function rx(t){return Hh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function $S(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ro&&s instanceof Ro||r instanceof ko&&s instanceof ko?Gs(r.elements,s.elements,Nn):r instanceof Sl&&s instanceof Sl?Nn(r.Ae,s.Ae):r instanceof Tl&&s instanceof Tl}(t.transform,e.transform)}class qS{constructor(e,n){this.version=e,this.transformResults=n}}class zt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new zt}static exists(e){return new zt(void 0,e)}static updateTime(e){return new zt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ua(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ru{}function sx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new su(t.key,zt.none()):new Fo(t.key,t.data,zt.none());{const n=t.data,r=jt.empty();let s=new et(lt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new kr(t.key,r,new Ut(s.toArray()),zt.none())}}function HS(t,e,n){t instanceof Fo?function(s,i,o){const u=s.value.clone(),c=cg(s.fieldTransforms,i,o.transformResults);u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):t instanceof kr?function(s,i,o){if(!Ua(s.precondition,i))return void i.convertToUnknownDocument(o.version);const u=cg(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(ix(s)),c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function so(t,e,n,r){return t instanceof Fo?function(i,o,u,c){if(!Ua(i.precondition,o))return u;const d=i.value.clone(),f=dg(i.fieldTransforms,c,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof kr?function(i,o,u,c){if(!Ua(i.precondition,o))return u;const d=dg(i.fieldTransforms,c,o),f=o.data;return f.setAll(ix(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,u){return Ua(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(t,e,n)}function WS(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=ex(r.transform,s||null);i!=null&&(n===null&&(n=jt.empty()),n.set(r.field,i))}return n||null}function ug(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Gs(r,s,(i,o)=>$S(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Fo extends ru{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class kr extends ru{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ix(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function cg(t,e,n){const r=new Map;ge(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,u=e.data.field(i.field);r.set(i.field,zS(o,u,n[s]))}return r}function dg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,BS(i,o,e))}return r}class su extends ru{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GS extends ru{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&HS(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=so(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=so(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Jv();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let u=this.applyToLocalView(o,i.mutatedFields);u=n.has(s.key)?null:u;const c=sx(o,u);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&Gs(this.mutations,e.mutations,(n,r)=>ug(n,r))&&Gs(this.baseMutations,e.baseMutations,(n,r)=>ug(n,r))}}class Kh{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ge(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return LS}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Kh(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e,he;function YS(t){switch(t){case U.OK:return Z(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return Z(15467,{code:t})}}function ox(t){if(t===void 0)return Un("GRPC error has no .code"),U.UNKNOWN;switch(t){case $e.OK:return U.OK;case $e.CANCELLED:return U.CANCELLED;case $e.UNKNOWN:return U.UNKNOWN;case $e.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case $e.INTERNAL:return U.INTERNAL;case $e.UNAVAILABLE:return U.UNAVAILABLE;case $e.UNAUTHENTICATED:return U.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case $e.NOT_FOUND:return U.NOT_FOUND;case $e.ALREADY_EXISTS:return U.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return U.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case $e.ABORTED:return U.ABORTED;case $e.OUT_OF_RANGE:return U.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return U.UNIMPLEMENTED;case $e.DATA_LOSS:return U.DATA_LOSS;default:return Z(39323,{code:t})}}(he=$e||($e={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=new gr([4294967295,4294967295],0);function hg(t){const e=JS().encode(t),n=new Ev;return n.update(e),new Uint8Array(n.digest())}function fg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new gr([n,r],0),new gr([s,i],0)]}class Xh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new $i(`Invalid padding: ${n}`);if(r<0)throw new $i(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $i(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new $i(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=gr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(gr.fromNumber(r)));return s.compare(ZS)===1&&(s=new gr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=hg(e),[r,s]=fg(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Xh(i,s,n);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.ge===0)return;const n=hg(e),[r,s]=fg(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class $i extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Uo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new iu(ne.min(),s,new De(ce),Bn(),de())}}class Uo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Uo(r,n,de(),de(),de())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class ax{constructor(e,n){this.targetId=e,this.Ce=n}}class lx{constructor(e,n,r=dt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class pg{constructor(){this.ve=0,this.Fe=mg(),this.Me=dt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=de(),n=de(),r=de();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Z(38017,{changeType:i})}}),new Uo(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=mg()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ge(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class eC{constructor(e){this.Ge=e,this.ze=new Map,this.je=Bn(),this.Je=wa(),this.He=wa(),this.Ye=new De(ce)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Z(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Cd(i))if(r===0){const o=new X(i.path);this.et(n,o,xt.newNoDocument(o,ne.min()))}else ge(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const u=this.ut(e),c=u?this.ct(u,e,o):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,u;try{o=Tr(r).toUint8Array()}catch(c){if(c instanceof Dv)return Ws("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new Xh(o,s,i)}catch(c){return Ws(c instanceof $i?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.ge===0?null:u}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),u=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const u=this.ot(o);if(u){if(i.current&&Cd(u.target)){const c=new X(u.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,xt.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=de();this.He.forEach((i,o)=>{let u=!0;o.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new iu(e,n,this.Ye,this.je,r);return this.je=Bn(),this.Je=wa(),this.He=wa(),this.Ye=new De(ce),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new pg,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new et(ce),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new et(ce),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new pg),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function wa(){return new De(X.comparator)}function mg(){return new De(X.comparator)}const tC={asc:"ASCENDING",desc:"DESCENDING"},nC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rC={and:"AND",or:"OR"};class sC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Nd(t,e){return t.useProto3Json||Xl(e)?e:{value:e}}function Cl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ux(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function iC(t,e){return Cl(t,e.toTimestamp())}function Tn(t){return ge(!!t,49232),ne.fromTimestamp(function(n){const r=Er(n);return new Ie(r.seconds,r.nanos)}(t))}function Yh(t,e){return Ad(t,e).canonicalString()}function Ad(t,e){const n=function(s){return new Ce(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function cx(t){const e=Ce.fromString(t);return ge(mx(e),10190,{key:e.toString()}),e}function bd(t,e){return Yh(t.databaseId,e.path)}function dc(t,e){const n=cx(e);if(n.get(1)!==t.databaseId.projectId)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(hx(n))}function dx(t,e){return Yh(t.databaseId,e)}function oC(t){const e=cx(t);return e.length===4?Ce.emptyPath():hx(e)}function jd(t){return new Ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function hx(t){return ge(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function gg(t,e,n){return{name:bd(t,e),fields:n.value.mapValue.fields}}function aC(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Z(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(ge(f===void 0||typeof f=="string",58123),dt.fromBase64String(f||"")):(ge(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),dt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(d){const f=d.code===void 0?U.UNKNOWN:ox(d.code);return new K(f,d.message||"")}(o);n=new lx(r,s,i,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=dc(t,r.document.name),i=Tn(r.document.updateTime),o=r.document.createTime?Tn(r.document.createTime):ne.min(),u=new jt({mapValue:{fields:r.document.fields}}),c=xt.newFoundDocument(s,i,o,u),d=r.targetIds||[],f=r.removedTargetIds||[];n=new Ba(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=dc(t,r.document),i=r.readTime?Tn(r.readTime):ne.min(),o=xt.newNoDocument(s,i),u=r.removedTargetIds||[];n=new Ba([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=dc(t,r.document),i=r.removedTargetIds||[];n=new Ba([],i,s,null)}else{if(!("filter"in e))return Z(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new XS(s,i),u=r.targetId;n=new ax(u,o)}}return n}function lC(t,e){let n;if(e instanceof Fo)n={update:gg(t,e.key,e.value)};else if(e instanceof su)n={delete:bd(t,e.key)};else if(e instanceof kr)n={update:gg(t,e.key,e.data),updateMask:yC(e.fieldMask)};else{if(!(e instanceof GS))return Z(16599,{Vt:e.type});n={verify:bd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof Tl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Ro)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof ko)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Sl)return{fieldPath:o.field.canonicalString(),increment:u.Ae};throw Z(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:iC(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Z(27497)}(t,e.precondition)),n}function uC(t,e){return t&&t.length>0?(ge(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Tn(s.updateTime):Tn(i);return o.isEqual(ne.min())&&(o=Tn(i)),new qS(o,s.transformResults||[])}(n,e))):[]}function cC(t,e){return{documents:[dx(t,e.path)]}}function dC(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=dx(t,s);const i=function(d){if(d.length!==0)return px(An.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:gs(g.field),direction:pC(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=Nd(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function hC(t){let e=oC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ge(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=fx(m);return g instanceof An&&qv(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(_){return new El(ys(_.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(g))}(n.orderBy));let u=null;n.limit&&(u=function(m){let g;return g=typeof m=="object"?m.value:m,Xl(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(m){const g=!!m.before,w=m.values||[];return new wl(w,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,w=m.values||[];return new wl(w,g)}(n.endAt)),jS(e,s,o,i,u,"F",c,d)}function fC(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function fx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ys(n.unaryFilter.field);return Je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ys(n.unaryFilter.field);return Je.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ys(n.unaryFilter.field);return Je.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ys(n.unaryFilter.field);return Je.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Z(61313);default:return Z(60726)}}(t):t.fieldFilter!==void 0?function(n){return Je.create(ys(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Z(58110);default:return Z(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return An.create(n.compositeFilter.filters.map(r=>fx(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Z(1026)}}(n.compositeFilter.op))}(t):Z(30097,{filter:t})}function pC(t){return tC[t]}function mC(t){return nC[t]}function gC(t){return rC[t]}function gs(t){return{fieldPath:t.canonicalString()}}function ys(t){return lt.fromServerFormat(t.fieldPath)}function px(t){return t instanceof Je?function(n){if(n.op==="=="){if(rg(n.value))return{unaryFilter:{field:gs(n.field),op:"IS_NAN"}};if(ng(n.value))return{unaryFilter:{field:gs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(rg(n.value))return{unaryFilter:{field:gs(n.field),op:"IS_NOT_NAN"}};if(ng(n.value))return{unaryFilter:{field:gs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gs(n.field),op:mC(n.op),value:n.value}}}(t):t instanceof An?function(n){const r=n.getFilters().map(s=>px(s));return r.length===1?r[0]:{compositeFilter:{op:gC(n.op),filters:r}}}(t):Z(54877,{filter:t})}function yC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function mx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,n,r,s,i=ne.min(),o=ne.min(),u=dt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e){this.yt=e}}function xC(t){const e=hC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Id(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(){this.Cn=new wC}addToCollectionParentIndex(e,n){return this.Cn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(wr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(wr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class wC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new et(Ce.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new et(Ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gx=41943040;class At{static withCacheSize(e){return new At(e,At.DEFAULT_COLLECTION_PERCENTILE,At.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */At.DEFAULT_COLLECTION_PERCENTILE=10,At.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,At.DEFAULT=new At(gx,At.DEFAULT_COLLECTION_PERCENTILE,At.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),At.DISABLED=new At(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Xs(0)}static cr(){return new Xs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg="LruGarbageCollector",EC=1048576;function xg([t,e],[n,r]){const s=ce(t,n);return s===0?ce(e,r):s}class TC{constructor(e){this.Ir=e,this.buffer=new et(xg),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();xg(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class SC{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){W(vg,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ai(n)?W(vg,"Ignoring IndexedDB error during garbage collection: ",n):await oi(n)}await this.Vr(3e5)})}}class CC{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return F.resolve(Kl.ce);const r=new TC(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(yg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yg):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,u,c,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,u=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),ps()<=fe.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(u-o)+`ms
	Removed ${i} targets in `+(c-u)+`ms
	Removed ${m} documents in `+(d-c)+`ms
Total Duration: ${d-f}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function IC(t,e){return new CC(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(){this.changes=new os(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&so(r.mutation,s,Ut.empty(),Ie.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){const s=Hr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=zi();return i.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Hr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,s){let i=Bn();const o=ro(),u=function(){return ro()}();return n.forEach((c,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof kr)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),so(f.mutation,d,f.mutation.getFieldMask(),Ie.now())):o.set(d.key,Ut.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>u.set(d,new AC(f,o.get(d)??null))),u))}recalculateAndSaveOverlays(e,n){const r=ro();let s=new De((o,u)=>o-u),i=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let f=r.get(c)||Ut.empty();f=u.applyToLocalView(d,f),r.set(c,f);const m=(s.get(u.batchId)||de()).add(c);s=s.insert(u.batchId,m)})}).next(()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),d=c.key,f=c.value,m=Jv();f.forEach(g=>{if(!i.has(g)){const w=sx(n.get(g),r.get(g));w!==null&&m.set(g,w),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return X.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):RS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(Hr());let u=No,c=i;return o.next(d=>F.forEach(d,(f,m)=>(u<m.largestBatchId&&(u=m.largestBatchId),i.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{c=c.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,de())).next(f=>({batchId:u,changes:Yv(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(r=>{let s=zi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=zi();return this.indexManager.getCollectionParents(e,i).next(u=>F.forEach(u,c=>{const d=function(m,g){return new Jl(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,xt.newInvalidDocument(f)))});let u=zi();return o.forEach((c,d)=>{const f=i.get(c);f!==void 0&&so(f.mutation,d,Ut.empty(),Ie.now()),tu(n,d)&&(u=u.insert(c,d))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return F.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Tn(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:xC(s.bundledQuery),readTime:Tn(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this.overlays=new De(X.comparator),this.qr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hr();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=Hr(),i=n.length+1,o=new X(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new De((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=Hr(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const u=Hr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>u.set(d,f)),!(u.size()>=s)););return F.resolve(u)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new KS(n,r));let i=this.qr.get(n);i===void 0&&(i=de(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(){this.Qr=new et(nt.$r),this.Ur=new et(nt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new nt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new nt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new X(new Ce([])),r=new nt(n,e),s=new nt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new X(new Ce([])),r=new nt(n,e),s=new nt(n,e+1);let i=de();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new nt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class nt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return X.comparator(e.key,n.key)||ce(e.Yr,n.Yr)}static Kr(e,n){return ce(e.Yr,n.Yr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new et(nt.$r)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new QS(i,n,r,s);this.mutationQueue.push(o);for(const u of s)this.Zr=this.Zr.add(new nt(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?$h:this.tr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new nt(n,0),s=new nt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const u=this.Xr(o.Yr);i.push(u)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new et(ce);return n.forEach(s=>{const i=new nt(s,0),o=new nt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],u=>{r=r.add(u.Yr)})}),F.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;X.isDocumentKey(i)||(i=i.child(""));const o=new nt(new X(i),0);let u=new et(ce);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(u=u.add(c.Yr)),!0)},o),F.resolve(this.ti(u))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ge(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return F.forEach(n.mutations,s=>{const i=new nt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new nt(n,0),s=this.Zr.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.ri=e,this.docs=function(){return new De(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():xt.newInvalidDocument(n))}getEntries(e,n){let r=Bn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():xt.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Bn();const o=n.path,u=new X(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||lS(aS(f),r)<=0||(s.has(f.key)||tu(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Z(9500)}ii(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new VC(this)}getSize(e){return F.resolve(this.size)}}class VC extends NC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e){this.persistence=e,this.si=new os(n=>Wh(n),Gh),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.oi=0,this._i=new Jh,this.targetCount=0,this.ai=Xs.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),F.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Xs(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Pr(n),F.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,n){this.ui={},this.overlays={},this.ci=new Kl(0),this.li=!1,this.li=!0,this.hi=new kC,this.referenceDelegate=e(this),this.Pi=new LC(this),this.indexManager=new _C,this.remoteDocumentCache=function(s){return new DC(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new vC(n),this.Ii=new jC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new RC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new PC(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const s=new MC(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return F.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class MC extends cS{constructor(e){super(),this.currentSequenceNumber=e}}class Zh{constructor(e){this.persistence=e,this.Ri=new Jh,this.Vi=null}static mi(e){return new Zh(e)}get fi(){if(this.Vi)return this.Vi;throw Z(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.fi,r=>{const s=X.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ne.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return F.or([()=>F.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Il{constructor(e,n){this.persistence=e,this.pi=new os(r=>fS(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=IC(this,n)}static mi(e,n){return new Il(e,n)}Ei(){}di(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return F.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?F.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(u=>{u||(r++,i.removeEntry(o,ne.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Oa(e.data.value)),n}br(e,n,r){return F.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return F.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=de(),s=de();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new ef(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return b2()?8:dS(N2())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new OC;return this.Ss(e,n,o).next(u=>{if(i.result=u,this.Vs)return this.bs(e,n,o,u.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(ps()<=fe.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",ms(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),F.resolve()):(ps()<=fe.DEBUG&&W("QueryEngine","Query:",ms(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ps()<=fe.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",ms(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,En(n))):F.resolve())}ys(e,n){if(ag(n))return F.resolve(null);let r=En(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Id(n,null,"F"),r=En(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=de(...i);return this.ps.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.Ds(n,u);return this.Cs(n,d,o,c.readTime)?this.ys(e,Id(n,null,"F")):this.vs(e,d,n,c)}))})))}ws(e,n,r,s){return ag(n)||s.isEqual(ne.min())?F.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?F.resolve(null):(ps()<=fe.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ms(n)),this.vs(e,o,n,oS(s,No)).next(u=>u))})}Ds(e,n){let r=new et(Kv(e));return n.forEach((s,i)=>{tu(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ps()<=fe.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",ms(n)),this.ps.getDocumentsMatchingQuery(e,n,wr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf="LocalStore",UC=3e8;class BC{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new De(ce),this.xs=new os(i=>Wh(i),Gh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function zC(t,e,n,r){return new BC(t,e,n,r)}async function vx(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],u=[];let c=de();for(const d of s){o.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of i){u.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:u}))})})}function $C(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(u,c,d,f){const m=d.batch,g=m.keys();let w=F.resolve();return g.forEach(_=>{w=w.next(()=>f.getEntry(c,_)).next(b=>{const j=d.docVersions.get(_);ge(j!==null,48541),b.version.compareTo(j)<0&&(m.applyToRemoteDocument(b,d),b.isValidDocument()&&(b.setReadTime(d.commitVersion),f.addEntry(b)))})}),w.next(()=>u.mutationQueue.removeMutationBatch(c,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=de();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(c=c.add(u.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function xx(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function qC(t,e){const n=re(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const u=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;u.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(i,f.addedDocuments,m)));let w=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?w=w.withResumeToken(dt.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):f.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(f.resumeToken,r)),s=s.insert(m,w),function(b,j,C){return b.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=UC?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(g,w,f)&&u.push(n.Pi.updateTargetData(i,w))});let c=Bn(),d=de();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),u.push(HC(i,o,e.documentUpdates).next(f=>{c=f.ks,d=f.qs})),!r.isEqual(ne.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next(m=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));u.push(f)}return F.waitFor(u).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.Ms=s,i))}function HC(t,e,n){let r=de(),s=de();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Bn();return n.forEach((u,c)=>{const d=i.get(u);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(ne.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):W(tf,"Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",c.version)}),{ks:o,qs:s}})}function WC(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=$h),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function GC(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new sr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Rd(t,e,n){const r=re(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ai(o))throw o;W(tf,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function _g(t,e,n){const r=re(t);let s=ne.min(),i=de();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,f){const m=re(c),g=m.xs.get(f);return g!==void 0?F.resolve(m.Ms.get(g)):m.Pi.getTargetData(d,f)}(r,o,En(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,u.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ne.min(),n?i:de())).next(u=>(QC(r,PS(e),u),{documents:u,Qs:i})))}function QC(t,e,n){let r=t.Os.get(e)||ne.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class wg{constructor(){this.activeTargetIds=FS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KC{constructor(){this.Mo=new wg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new wg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg="ConnectivityMonitor";class Tg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){W(Eg,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){W(Eg,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ea=null;function kd(){return Ea===null?Ea=function(){return 268435456+Math.round(2147483648*Math.random())}():Ea++,"0x"+Ea.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc="RestConnection",YC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class JC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===xl?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=kd(),u=this.zo(e,n.toUriEncodedString());W(hc,`Sending RPC '${e}' ${o}:`,u,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:d}=new URL(u),f=Oh(d);return this.Jo(e,u,c,r,f).then(m=>(W(hc,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Ws(hc,`RPC '${e}' ${o} failed with error: `,m,"url: ",u,"request:",r),m})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ii}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=YC[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt="WebChannelConnection";class eI extends JC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=kd();return new Promise((u,c)=>{const d=new Tv;d.setWithCredentials(!0),d.listenOnce(Sv.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Ma.NO_ERROR:const m=d.getResponseJson();W(gt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),u(m);break;case Ma.TIMEOUT:W(gt,`RPC '${e}' ${o} timed out`),c(new K(U.DEADLINE_EXCEEDED,"Request time out"));break;case Ma.HTTP_ERROR:const g=d.getStatus();if(W(gt,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const _=w==null?void 0:w.error;if(_&&_.status&&_.message){const b=function(C){const E=C.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(E)>=0?E:U.UNKNOWN}(_.status);c(new K(b,_.message))}else c(new K(U.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new K(U.UNAVAILABLE,"Connection failed."));break;default:Z(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{W(gt,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);W(gt,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",f,r,15)})}T_(e,n,r){const s=kd(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Nv(),u=Iv(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const f=i.join("");W(gt,`Creating RPC '${e}' stream ${s}: ${f}`,c);const m=o.createWebChannel(f,c);this.I_(m);let g=!1,w=!1;const _=new ZC({Yo:j=>{w?W(gt,`Not sending because RPC '${e}' stream ${s} is closed:`,j):(g||(W(gt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),W(gt,`RPC '${e}' stream ${s} sending:`,j),m.send(j))},Zo:()=>m.close()}),b=(j,C,E)=>{j.listen(C,N=>{try{E(N)}catch(P){setTimeout(()=>{throw P},0)}})};return b(m,Bi.EventType.OPEN,()=>{w||(W(gt,`RPC '${e}' stream ${s} transport opened.`),_.o_())}),b(m,Bi.EventType.CLOSE,()=>{w||(w=!0,W(gt,`RPC '${e}' stream ${s} transport closed`),_.a_(),this.E_(m))}),b(m,Bi.EventType.ERROR,j=>{w||(w=!0,Ws(gt,`RPC '${e}' stream ${s} transport errored. Name:`,j.name,"Message:",j.message),_.a_(new K(U.UNAVAILABLE,"The operation could not be completed")))}),b(m,Bi.EventType.MESSAGE,j=>{var C;if(!w){const E=j.data[0];ge(!!E,16349);const N=E,P=(N==null?void 0:N.error)||((C=N[0])==null?void 0:C.error);if(P){W(gt,`RPC '${e}' stream ${s} received error:`,P);const O=P.status;let k=function(T){const A=$e[T];if(A!==void 0)return ox(A)}(O),y=P.message;k===void 0&&(k=U.INTERNAL,y="Unknown error status: "+O+" with message "+P.message),w=!0,_.a_(new K(k,y)),m.close()}else W(gt,`RPC '${e}' stream ${s} received:`,E),_.u_(E)}}),b(u,Cv.STAT_EVENT,j=>{j.stat===_d.PROXY?W(gt,`RPC '${e}' stream ${s} detected buffering proxy`):j.stat===_d.NOPROXY&&W(gt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.__()},0),_}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function fc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(t){return new sC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg="PersistentStream";class wx{constructor(e,n,r,s,i,o,u,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new _x(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Un(n.toString()),Un("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new K(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return W(Sg,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(W(Sg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tI extends wx{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=aC(this.serializer,e),r=function(i){if(!("targetChange"in i))return ne.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?Tn(o.readTime):ne.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=jd(this.serializer),n.addTarget=function(i,o){let u;const c=o.target;if(u=Cd(c)?{documents:cC(i,c)}:{query:dC(i,c).ft},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=ux(i,o.resumeToken);const d=Nd(i,o.expectedCount);d!==null&&(u.expectedCount=d)}else if(o.snapshotVersion.compareTo(ne.min())>0){u.readTime=Cl(i,o.snapshotVersion.toTimestamp());const d=Nd(i,o.expectedCount);d!==null&&(u.expectedCount=d)}return u}(this.serializer,e);const r=fC(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=jd(this.serializer),n.removeTarget=e,this.q_(n)}}class nI extends wx{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=uC(e.writeResults,e.commitTime),r=Tn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=jd(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>lC(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{}class sI extends rI{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Ad(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(U.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Ho(e,Ad(n,r),s,o,u,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(U.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class iI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Un(n),this.aa=!1):W("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts="RemoteStore";class oI{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{as(this)&&(W(ts,"Restarting streams for network reachability change."),await async function(c){const d=re(c);d.Ea.add(4),await Bo(d),d.Ra.set("Unknown"),d.Ea.delete(4),await au(d)}(this))})}),this.Ra=new iI(r,s)}}async function au(t){if(as(t))for(const e of t.da)await e(!0)}async function Bo(t){for(const e of t.da)await e(!1)}function Ex(t,e){const n=re(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),of(n)?sf(n):li(n).O_()&&rf(n,e))}function nf(t,e){const n=re(t),r=li(n);n.Ia.delete(e),r.O_()&&Tx(n,e),n.Ia.size===0&&(r.O_()?r.L_():as(n)&&n.Ra.set("Unknown"))}function rf(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}li(t).Y_(e)}function Tx(t,e){t.Va.Ue(e),li(t).Z_(e)}function sf(t){t.Va=new eC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),li(t).start(),t.Ra.ua()}function of(t){return as(t)&&!li(t).x_()&&t.Ia.size>0}function as(t){return re(t).Ea.size===0}function Sx(t){t.Va=void 0}async function aI(t){t.Ra.set("Online")}async function lI(t){t.Ia.forEach((e,n)=>{rf(t,e)})}async function uI(t,e){Sx(t),of(t)?(t.Ra.ha(e),sf(t)):t.Ra.set("Unknown")}async function cI(t,e,n){if(t.Ra.set("Online"),e instanceof lx&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const u of i.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s.Ia.delete(u),s.Va.removeTarget(u))}(t,e)}catch(r){W(ts,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Nl(t,r)}else if(e instanceof Ba?t.Va.Ze(e):e instanceof ax?t.Va.st(e):t.Va.tt(e),!n.isEqual(ne.min()))try{const r=await xx(t.localStore);n.compareTo(r)>=0&&await function(i,o){const u=i.Va.Tt(o);return u.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.Ia.get(d);f&&i.Ia.set(d,f.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,d)=>{const f=i.Ia.get(c);if(!f)return;i.Ia.set(c,f.withResumeToken(dt.EMPTY_BYTE_STRING,f.snapshotVersion)),Tx(i,c);const m=new sr(f.target,c,d,f.sequenceNumber);rf(i,m)}),i.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){W(ts,"Failed to raise snapshot:",r),await Nl(t,r)}}async function Nl(t,e,n){if(!ai(e))throw e;t.Ea.add(1),await Bo(t),t.Ra.set("Offline"),n||(n=()=>xx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W(ts,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await au(t)})}function Cx(t,e){return e().catch(n=>Nl(t,n,e))}async function lu(t){const e=re(t),n=Cr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:$h;for(;dI(e);)try{const s=await WC(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,hI(e,s)}catch(s){await Nl(e,s)}Ix(e)&&Nx(e)}function dI(t){return as(t)&&t.Ta.length<10}function hI(t,e){t.Ta.push(e);const n=Cr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Ix(t){return as(t)&&!Cr(t).x_()&&t.Ta.length>0}function Nx(t){Cr(t).start()}async function fI(t){Cr(t).ra()}async function pI(t){const e=Cr(t);for(const n of t.Ta)e.ea(n.mutations)}async function mI(t,e,n){const r=t.Ta.shift(),s=Kh.from(r,e,n);await Cx(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await lu(t)}async function gI(t,e){e&&Cr(t).X_&&await async function(r,s){if(function(o){return YS(o)&&o!==U.ABORTED}(s.code)){const i=r.Ta.shift();Cr(r).B_(),await Cx(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await lu(r)}}(t,e),Ix(t)&&Nx(t)}async function Cg(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),W(ts,"RemoteStore received new credentials");const r=as(n);n.Ea.add(3),await Bo(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await au(n)}async function yI(t,e){const n=re(t);e?(n.Ea.delete(2),await au(n)):e||(n.Ea.add(2),await Bo(n),n.Ra.set("Unknown"))}function li(t){return t.ma||(t.ma=function(n,r,s){const i=re(n);return i.sa(),new tI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:aI.bind(null,t),t_:lI.bind(null,t),r_:uI.bind(null,t),H_:cI.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),of(t)?sf(t):t.Ra.set("Unknown")):(await t.ma.stop(),Sx(t))})),t.ma}function Cr(t){return t.fa||(t.fa=function(n,r,s){const i=re(n);return i.sa(),new nI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:fI.bind(null,t),r_:gI.bind(null,t),ta:pI.bind(null,t),na:mI.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await lu(t)):(await t.fa.stop(),t.Ta.length>0&&(W(ts,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,u=new af(e,n,o,s,i);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lf(t,e){if(Un("AsyncQueue",`${e}: ${t}`),ai(t))return new K(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{static emptySet(e){return new Ms(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=zi(),this.sortedSet=new De(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ms)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ms;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(){this.ga=new De(X.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Z(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ys{constructor(e,n,r,s,i,o,u,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new Ys(e,n,Ms.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&eu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class xI{constructor(){this.queries=Ng(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=re(n),i=s.queries;s.queries=Ng(),i.forEach((o,u)=>{for(const c of u.Sa)c.onError(r)})})(this,new K(U.ABORTED,"Firestore shutting down"))}}function Ng(){return new os(t=>Qv(t),eu)}async function Ax(t,e){const n=re(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new vI,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const u=lf(o,`Initialization of query '${ms(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&uf(n)}async function bx(t,e){const n=re(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _I(t,e){const n=re(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const u of o.Sa)u.Fa(s)&&(r=!0);o.wa=s}}r&&uf(n)}function wI(t,e,n){const r=re(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function uf(t){t.Ca.forEach(e=>{e.next()})}var Pd,Ag;(Ag=Pd||(Pd={})).Ma="default",Ag.Cache="cache";class jx{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ys(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ys.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Pd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e){this.key=e}}class kx{constructor(e){this.key=e}}class EI{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=de(),this.mutatedKeys=de(),this.eu=Kv(e),this.tu=new Ms(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Ig,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),w=tu(this.query,m)?m:null,_=!!g&&this.mutatedKeys.has(g.key),b=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let j=!1;g&&w?g.data.isEqual(w.data)?_!==b&&(r.track({type:3,doc:w}),j=!0):this.su(g,w)||(r.track({type:2,doc:w}),j=!0,(c&&this.eu(w,c)>0||d&&this.eu(w,d)<0)&&(u=!0)):!g&&w?(r.track({type:0,doc:w}),j=!0):g&&!w&&(r.track({type:1,doc:g}),j=!0,(c||d)&&(u=!0)),j&&(w?(o=o.add(w),i=b?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Cs:u,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((f,m)=>function(w,_){const b=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z(20277,{Rt:j})}};return b(w)-b(_)}(f.type,m.type)||this.eu(f.doc,m.doc)),this.ou(r),s=s??!1;const u=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,d=c!==this.Za;return this.Za=c,o.length!==0||d?{snapshot:new Ys(this.query,e.tu,i,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ig,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=de(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new kx(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Rx(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=de();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ys.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const cf="SyncEngine";class TI{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class SI{constructor(e){this.key=e,this.hu=!1}}class CI{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new os(u=>Qv(u),eu),this.Iu=new Map,this.Eu=new Set,this.du=new De(X.comparator),this.Au=new Map,this.Ru=new Jh,this.Vu={},this.mu=new Map,this.fu=Xs.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function II(t,e,n=!0){const r=Ox(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await Px(r,e,n,!0),s}async function NI(t,e){const n=Ox(t);await Px(n,e,!0,!1)}async function Px(t,e,n,r){const s=await GC(t.localStore,En(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let u;return r&&(u=await AI(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Ex(t.remoteStore,s),u}async function AI(t,e,n,r,s){t.pu=(m,g,w)=>async function(b,j,C,E){let N=j.view.ru(C);N.Cs&&(N=await _g(b.localStore,j.query,!1).then(({documents:y})=>j.view.ru(y,N)));const P=E&&E.targetChanges.get(j.targetId),O=E&&E.targetMismatches.get(j.targetId)!=null,k=j.view.applyChanges(N,b.isPrimaryClient,P,O);return jg(b,j.targetId,k.au),k.snapshot}(t,m,g,w);const i=await _g(t.localStore,e,!0),o=new EI(e,i.Qs),u=o.ru(i.documents),c=Uo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(u,t.isPrimaryClient,c);jg(t,n,d.au);const f=new TI(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function bI(t,e,n){const r=re(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!eu(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Rd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&nf(r.remoteStore,s.targetId),Dd(r,s.targetId)}).catch(oi)):(Dd(r,s.targetId),await Rd(r.localStore,s.targetId,!0))}async function jI(t,e){const n=re(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),nf(n.remoteStore,r.targetId))}async function RI(t,e,n){const r=OI(t);try{const s=await function(o,u){const c=re(o),d=Ie.now(),f=u.reduce((w,_)=>w.add(_.key),de());let m,g;return c.persistence.runTransaction("Locally write mutations","readwrite",w=>{let _=Bn(),b=de();return c.Ns.getEntries(w,f).next(j=>{_=j,_.forEach((C,E)=>{E.isValidDocument()||(b=b.add(C))})}).next(()=>c.localDocuments.getOverlayedDocuments(w,_)).next(j=>{m=j;const C=[];for(const E of u){const N=WS(E,m.get(E.key).overlayedDocument);N!=null&&C.push(new kr(E.key,N,Bv(N.value.mapValue),zt.exists(!0)))}return c.mutationQueue.addMutationBatch(w,d,C,u)}).next(j=>{g=j;const C=j.applyToLocalDocumentSet(m,b);return c.documentOverlayCache.saveOverlays(w,j.batchId,C)})}).then(()=>({batchId:g.batchId,changes:Yv(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,u,c){let d=o.Vu[o.currentUser.toKey()];d||(d=new De(ce)),d=d.insert(u,c),o.Vu[o.currentUser.toKey()]=d}(r,s.batchId,n),await zo(r,s.changes),await lu(r.remoteStore)}catch(s){const i=lf(s,"Failed to persist write");n.reject(i)}}async function Dx(t,e){const n=re(t);try{const r=await qC(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(ge(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?ge(o.hu,14607):s.removedDocuments.size>0&&(ge(o.hu,42227),o.hu=!1))}),await zo(n,r,e)}catch(r){await oi(r)}}function bg(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const u=o.view.va(e);u.snapshot&&s.push(u.snapshot)}),function(o,u){const c=re(o);c.onlineState=u;let d=!1;c.queries.forEach((f,m)=>{for(const g of m.Sa)g.va(u)&&(d=!0)}),d&&uf(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function kI(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new De(X.comparator);o=o.insert(i,xt.newNoDocument(i,ne.min()));const u=de().add(i),c=new iu(ne.min(),new Map,new De(ce),o,u);await Dx(r,c),r.du=r.du.remove(i),r.Au.delete(e),df(r)}else await Rd(r.localStore,e,!1).then(()=>Dd(r,e,n)).catch(oi)}async function PI(t,e){const n=re(t),r=e.batch.batchId;try{const s=await $C(n.localStore,e);Lx(n,r,null),Vx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await zo(n,s)}catch(s){await oi(s)}}async function DI(t,e,n){const r=re(t);try{const s=await function(o,u){const c=re(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,u).next(m=>(ge(m!==null,37113),f=m.keys(),c.mutationQueue.removeMutationBatch(d,m))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(r.localStore,e);Lx(r,e,n),Vx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await zo(r,s)}catch(s){await oi(s)}}function Vx(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Lx(t,e,n){const r=re(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Dd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||Mx(t,r)})}function Mx(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(nf(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),df(t))}function jg(t,e,n){for(const r of n)r instanceof Rx?(t.Ru.addReference(r.key,e),VI(t,r)):r instanceof kx?(W(cf,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Mx(t,r.key)):Z(19791,{wu:r})}function VI(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(W(cf,"New document in limbo: "+n),t.Eu.add(r),df(t))}function df(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new X(Ce.fromString(e)),r=t.fu.next();t.Au.set(r,new SI(n)),t.du=t.du.insert(n,r),Ex(t.remoteStore,new sr(En(Zl(n.path)),r,"TargetPurposeLimboResolution",Kl.ce))}}async function zo(t,e,n){const r=re(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((u,c)=>{o.push(r.pu(c,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(d){s.push(d);const m=ef.As(c.targetId,d);i.push(m)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(c,d){const f=re(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>F.forEach(d,g=>F.forEach(g.Es,w=>f.persistence.referenceDelegate.addReference(m,g.targetId,w)).next(()=>F.forEach(g.ds,w=>f.persistence.referenceDelegate.removeReference(m,g.targetId,w)))))}catch(m){if(!ai(m))throw m;W(tf,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const w=f.Ms.get(g),_=w.snapshotVersion,b=w.withLastLimboFreeSnapshotVersion(_);f.Ms=f.Ms.insert(g,b)}}}(r.localStore,i))}async function LI(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){W(cf,"User change. New user:",e.toKey());const r=await vx(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(u=>{u.forEach(c=>{c.reject(new K(U.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await zo(n,r.Ls)}}function MI(t,e){const n=re(t),r=n.Au.get(e);if(r&&r.hu)return de().add(r.key);{let s=de();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const u=n.Tu.get(o);s=s.unionWith(u.view.nu)}return s}}function Ox(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Dx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kI.bind(null,e),e.Pu.H_=_I.bind(null,e.eventManager),e.Pu.yu=wI.bind(null,e.eventManager),e}function OI(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DI.bind(null,e),e}class Al{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ou(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return zC(this.persistence,new FC,e.initialUser,this.serializer)}Cu(e){return new yx(Zh.mi,this.serializer)}Du(e){return new KC}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Al.provider={build:()=>new Al};class FI extends Al{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ge(this.persistence.referenceDelegate instanceof Il,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new SC(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?At.withCacheSize(this.cacheSizeBytes):At.DEFAULT;return new yx(r=>Il.mi(r,n),this.serializer)}}class Vd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=LI.bind(null,this.syncEngine),await yI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new xI}()}createDatastore(e){const n=ou(e.databaseInfo.databaseId),r=function(i){return new eI(i)}(e.databaseInfo);return function(i,o,u,c){return new sI(i,o,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,u){return new oI(r,s,i,o,u)}(this.localStore,this.datastore,e.asyncQueue,n=>bg(this.syncEngine,n,0),function(){return Tg.v()?new Tg:new XC}())}createSyncEngine(e,n){return function(s,i,o,u,c,d,f){const m=new CI(s,i,o,u,c,d);return f&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=re(s);W(ts,"RemoteStore shutting down."),i.Ea.add(5),await Bo(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Vd.provider={build:()=>new Vd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Un("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir="FirestoreClient";class UI{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=yt.UNAUTHENTICATED,this.clientId=Bh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{W(Ir,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W(Ir,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=lf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function pc(t,e){t.asyncQueue.verifyOperationInProgress(),W(Ir,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await vx(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Rg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await BI(t);W(Ir,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Cg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Cg(e.remoteStore,s)),t._onlineComponents=e}async function BI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W(Ir,"Using user provided OfflineComponentProvider");try{await pc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ws("Error using user provided cache. Falling back to memory cache: "+n),await pc(t,new Al)}}else W(Ir,"Using default OfflineComponentProvider"),await pc(t,new FI(void 0));return t._offlineComponents}async function Ux(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W(Ir,"Using user provided OnlineComponentProvider"),await Rg(t,t._uninitializedComponentsProvider._online)):(W(Ir,"Using default OnlineComponentProvider"),await Rg(t,new Vd))),t._onlineComponents}function zI(t){return Ux(t).then(e=>e.syncEngine)}async function Ld(t){const e=await Ux(t),n=e.eventManager;return n.onListen=II.bind(null,e.syncEngine),n.onUnlisten=bI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=NI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=jI.bind(null,e.syncEngine),n}function $I(t,e,n={}){const r=new yr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,d){const f=new Fx({next:g=>{f.Nu(),o.enqueueAndForget(()=>bx(i,m));const w=g.docs.has(u);!w&&g.fromCache?d.reject(new K(U.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&g.fromCache&&c&&c.source==="server"?d.reject(new K(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new jx(Zl(u.path),f,{includeMetadataChanges:!0,qa:!0});return Ax(i,m)}(await Ld(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx="firestore.googleapis.com",Pg=!0;class Dg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new K(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zx,this.ssl=Pg}else this.host=e.host,this.ssl=e.ssl??Pg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<EC)throw new K(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Bx(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class uu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new KT;switch(r.type){case"firstParty":return new ZT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=kg.get(n);r&&(W("ComponentProvider","Removing Datastore"),kg.delete(n),r.terminate())}(this),Promise.resolve()}}function qI(t,e,n,r={}){var d;t=wn(t,uu);const s=Oh(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;s&&(E2(`https://${u}`),I2("Firestore",!0)),i.host!==zx&&i.host!==u&&Ws("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:u,ssl:s,emulatorOptions:r};if(!ml(c,o)&&(t._setSettings(c),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=yt.MOCK_USER;else{f=T2(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new K(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new yt(g)}t._authCredentials=new XT(new bv(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new cu(this.firestore,e,this._query)}}class We{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new We(this.firestore,e,this._key)}toJSON(){return{type:We._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Oo(n,We._jsonSchema))return new We(e,r||null,new X(Ce.fromString(n.referencePath)))}}We._jsonSchemaVersion="firestore/documentReference/1.0",We._jsonSchema={type:He("string",We._jsonSchemaVersion),referencePath:He("string")};class vr extends cu{constructor(e,n,r){super(e,n,Zl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new We(this.firestore,null,new X(e))}withConverter(e){return new vr(this.firestore,e,this._path)}}function HI(t,e,...n){if(t=In(t),jv("collection","path",e),t instanceof uu){const r=Ce.fromString(e,...n);return Qm(r),new vr(t,null,r)}{if(!(t instanceof We||t instanceof vr))throw new K(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return Qm(r),new vr(t.firestore,null,r)}}function Ta(t,e,...n){if(t=In(t),arguments.length===1&&(e=Bh.newId()),jv("doc","path",e),t instanceof uu){const r=Ce.fromString(e,...n);return Gm(r),new We(t,null,new X(r))}{if(!(t instanceof We||t instanceof vr))throw new K(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return Gm(r),new We(t.firestore,t instanceof vr?t.converter:null,new X(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="AsyncQueue";class Lg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new _x(this,"async_queue_retry"),this._c=()=>{const r=fc();r&&W(Vg,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=fc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=fc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new yr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ai(e))throw e;W(Vg,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Un("INTERNAL UNHANDLED ERROR: ",Mg(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=af.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Z(47125,{Pc:Mg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Mg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class ns extends uu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Lg,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Lg(e),this._firestoreClient=void 0,await e}}}function Fg(t,e){const n=typeof t=="object"?t:LT(),r=typeof t=="string"?t:xl,s=RT(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=_2("firestore");i&&qI(s,...i)}return s}function du(t){if(t._terminated)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||WI(t),t._firestoreClient}function WI(t){var r,s,i;const e=t._freezeSettings(),n=function(u,c,d,f){return new gS(u,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Bx(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new UI(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xt(dt.fromBase64String(e))}catch(n){throw new K(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Xt(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Oo(e,Xt._jsonSchema))return Xt.fromBase64String(e.bytes)}}Xt._jsonSchemaVersion="firestore/bytes/1.0",Xt._jsonSchema={type:He("string",Xt._jsonSchemaVersion),bytes:He("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Sn._jsonSchemaVersion}}static fromJSON(e){if(Oo(e,Sn._jsonSchema))return new Sn(e.latitude,e.longitude)}}Sn._jsonSchemaVersion="firestore/geoPoint/1.0",Sn._jsonSchema={type:He("string",Sn._jsonSchemaVersion),latitude:He("number"),longitude:He("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Cn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Oo(e,Cn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Cn(e.vectorValues);throw new K(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Cn._jsonSchemaVersion="firestore/vectorValue/1.0",Cn._jsonSchema={type:He("string",Cn._jsonSchemaVersion),vectorValues:He("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=/^__.*__$/;class QI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new kr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Fo(e,this.data,n,this.fieldTransforms)}}class $x{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new kr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function qx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z(40011,{Ac:t})}}class ff{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ff({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return bl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(qx(this.Ac)&&GI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class KI{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ou(e)}Cc(e,n,r,s=!1){return new ff({Ac:e,methodName:n,Dc:r,path:lt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hx(t){const e=t._freezeSettings(),n=ou(t._databaseId);return new KI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Wx(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);pf("Data must be an object, but it was:",o,r);const u=Gx(r,o);let c,d;if(i.merge)c=new Ut(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=Md(e,m,n);if(!o.contains(g))throw new K(U.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Kx(f,g)||f.push(g)}c=new Ut(f),d=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,d=o.fieldTransforms;return new QI(new jt(u),c,d)}class fu extends hf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fu}}function XI(t,e,n,r){const s=t.Cc(1,e,n);pf("Data must be an object, but it was:",s,r);const i=[],o=jt.empty();Rr(r,(c,d)=>{const f=mf(e,c,n);d=In(d);const m=s.yc(f);if(d instanceof fu)i.push(f);else{const g=pu(d,m);g!=null&&(i.push(f),o.set(f,g))}});const u=new Ut(i);return new $x(o,u,s.fieldTransforms)}function YI(t,e,n,r,s,i){const o=t.Cc(1,e,n),u=[Md(e,r,n)],c=[s];if(i.length%2!=0)throw new K(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)u.push(Md(e,i[g])),c.push(i[g+1]);const d=[],f=jt.empty();for(let g=u.length-1;g>=0;--g)if(!Kx(d,u[g])){const w=u[g];let _=c[g];_=In(_);const b=o.yc(w);if(_ instanceof fu)d.push(w);else{const j=pu(_,b);j!=null&&(d.push(w),f.set(w,j))}}const m=new Ut(d);return new $x(f,m,o.fieldTransforms)}function pu(t,e){if(Qx(t=In(t)))return pf("Unsupported field value:",e,t),Gx(t,e);if(t instanceof hf)return function(r,s){if(!qx(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const u of r){let c=pu(u,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=In(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return US(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ie.fromDate(r);return{timestampValue:Cl(s.serializer,i)}}if(r instanceof Ie){const i=new Ie(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cl(s.serializer,i)}}if(r instanceof Sn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xt)return{bytesValue:ux(s.serializer,r._byteString)};if(r instanceof We){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Yh(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Cn)return function(o,u){return{mapValue:{fields:{[Fv]:{stringValue:Uv},[_l]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw u.Sc("VectorValues must only contain numeric values.");return Qh(u.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${zh(r)}`)}(t,e)}function Gx(t,e){const n={};return Pv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rr(t,(r,s)=>{const i=pu(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Qx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ie||t instanceof Sn||t instanceof Xt||t instanceof We||t instanceof hf||t instanceof Cn)}function pf(t,e,n){if(!Qx(n)||!Rv(n)){const r=zh(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Md(t,e,n){if((e=In(e))instanceof hu)return e._internalPath;if(typeof e=="string")return mf(t,e);throw bl("Field path arguments must be of type string or ",t,!1,void 0,n)}const JI=new RegExp("[~\\*/\\[\\]]");function mf(t,e,n){if(e.search(JI)>=0)throw bl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new hu(...e.split("."))._internalPath}catch{throw bl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function bl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new K(U.INVALID_ARGUMENT,u+t+c)}function Kx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new We(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Yx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ZI extends Xx{data(){return super.data()}}function Yx(t,e){return typeof e=="string"?mf(t,e):e instanceof hu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tN{convertValue(e,n="none"){switch(Sr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Tr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Rr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[_l].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Ue(o.doubleValue));return new Cn(n)}convertGeoPoint(e){return new Sn(Ue(e.latitude),Ue(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Yl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ao(e));default:return null}}convertTimestamp(e){const n=Er(e);return new Ie(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ce.fromString(e);ge(mx(r),9688,{name:e});const s=new bo(r.get(1),r.get(3)),i=new X(r.popFirst(5));return s.isEqual(n)||Un(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class qi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qr extends Xx{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new za(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Yx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new K(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Qr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Qr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qr._jsonSchema={type:He("string",Qr._jsonSchemaVersion),bundleSource:He("string","DocumentSnapshot"),bundleName:He("string"),bundle:He("string")};class za extends Qr{data(e={}){return super.data(e)}}class Os{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new qi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new za(this._firestore,this._userDataWriter,r.key,r,new qi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(u=>{const c=new za(s._firestore,s._userDataWriter,u.doc.key,u.doc,new qi(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const c=new za(s._firestore,s._userDataWriter,u.doc.key,u.doc,new qi(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return u.type!==0&&(d=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),f=o.indexOf(u.doc.key)),{type:nN(u.type),doc:c,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new K(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Os._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Bh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function nN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(t){t=wn(t,We);const e=wn(t.firestore,ns);return $I(du(e),t._key).then(n=>e_(e,t,n))}Os._jsonSchemaVersion="firestore/querySnapshot/1.0",Os._jsonSchema={type:He("string",Os._jsonSchemaVersion),bundleSource:He("string","QuerySnapshot"),bundleName:He("string"),bundle:He("string")};class Zx extends tN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new We(this.firestore,null,n)}}function sN(t,e,n){t=wn(t,We);const r=wn(t.firestore,ns),s=Jx(t.converter,e,n);return gf(r,[Wx(Hx(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,zt.none())])}function iN(t){return gf(wn(t.firestore,ns),[new su(t._key,zt.none())])}function oN(t,...e){var c,d,f;t=In(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Og(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Og(e[r])){const m=e[r];e[r]=(c=m.next)==null?void 0:c.bind(m),e[r+1]=(d=m.error)==null?void 0:d.bind(m),e[r+2]=(f=m.complete)==null?void 0:f.bind(m)}let i,o,u;if(t instanceof We)o=wn(t.firestore,ns),u=Zl(t._key.path),i={next:m=>{e[r]&&e[r](e_(o,t,m))},error:e[r+1],complete:e[r+2]};else{const m=wn(t,cu);o=wn(m.firestore,ns),u=m._query;const g=new Zx(o);i={next:w=>{e[r]&&e[r](new Os(o,g,m,w))},error:e[r+1],complete:e[r+2]},eN(t._query)}return function(g,w,_,b){const j=new Fx(b),C=new jx(w,j,_);return g.asyncQueue.enqueueAndForget(async()=>Ax(await Ld(g),C)),()=>{j.Nu(),g.asyncQueue.enqueueAndForget(async()=>bx(await Ld(g),C))}}(du(o),u,s,i)}function gf(t,e){return function(r,s){const i=new yr;return r.asyncQueue.enqueueAndForget(async()=>RI(await zI(r),s,i)),i.promise}(du(t),e)}function e_(t,e,n){const r=n.docs.get(e._key),s=new Zx(t);return new Qr(t,s,e._key,r,new qi(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Hx(e)}set(e,n,r){this._verifyNotCommitted();const s=mc(e,this._firestore),i=Jx(s.converter,n,r),o=Wx(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,zt.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=mc(e,this._firestore);let o;return o=typeof(n=In(n))=="string"||n instanceof hu?YI(this._dataReader,"WriteBatch.update",i._key,n,r,s):XI(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,zt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=mc(e,this._firestore);return this._mutations=this._mutations.concat(new su(n._key,zt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new K(U.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mc(t,e){if((t=In(t)).firestore!==e)throw new K(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(t){return du(t=wn(t,ns)),new aN(t,e=>gf(t,e))}(function(e,n=!0){(function(s){ii=s})(VT),yl(new Co("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),u=new ns(new YT(r.getProvider("auth-internal")),new eS(o,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new K(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bo(d.options.projectId,f)}(o,s),o);return i={useFetchStreams:n,...i},u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),Ls($m,qm,e),Ls($m,qm,"esm2020")})();const Sa="SPR_TECHFORGE_FIREBASE_CONFIG";class uN{constructor(){ea(this,"app",null);ea(this,"db",null);ea(this,"isInitialized",!1);this.tryInit()}tryInit(){try{const e=localStorage.getItem(Sa);if(e){const n=JSON.parse(e);if(n.projectId&&n.apiKey)try{this.app=xd(n),this.db=Fg(this.app),this.isInitialized=!0,console.log("Firebase Firestore Initialized")}catch(r){console.error("Firebase initialization failed:",r),this.isInitialized=!1}}}catch(e){console.error("Failed to initialize firebase from stored config",e)}}saveConfig(e){localStorage.setItem(Sa,JSON.stringify(e)),window.location.reload()}clearConfig(){localStorage.removeItem(Sa),window.location.reload()}isConfigured(){return this.isInitialized&&!!this.db}getConfig(){const e=localStorage.getItem(Sa);return e?JSON.parse(e):null}async testConfig(e){try{const n=JSON.parse(e);if(!n.projectId||!n.apiKey||!n.appId)return{success:!1,error:"Invalid Configuration object. Missing projectId, apiKey, or appId."};const r=xd(n,"testApp"),s=Fg(r);try{const i=Ta(s,"system_check","connection_test");await rN(i)}catch(i){const o=i&&i.code?i.code:void 0;if(o==="unavailable"||o==="failed-precondition")return{success:!1,error:"Could not reach Firebase. Check your internet connection."}}return{success:!0}}catch(n){return{success:!1,error:n.message||"Invalid JSON format."}}}subscribe(e,n,r){if(!this.db)return()=>{};const s=HI(this.db,e);return oN(s,o=>{const u=[];o.forEach(c=>{u.push({...c.data(),id:c.id})}),console.log(`Sync: Received ${u.length} items from ${e}`),n(u)},o=>{console.error(`Error subscribing to ${e}:`,o),r&&r(o)})}async saveItem(e,n){if(!this.db)throw new Error("DB not configured");if(!n.id)throw new Error("Item must have an ID");await sN(Ta(this.db,e,n.id),n)}async deleteItem(e,n){if(!this.db)throw new Error("DB not configured");await iN(Ta(this.db,e,n))}async uploadBatch(e,n){if(!this.db)throw new Error("DB not configured");if(n.length===0)return;const r=500;for(let s=0;s<n.length;s+=r){const i=n.slice(s,s+r),o=lN(this.db);i.forEach(u=>{const c=Ta(this.db,e,u.id);o.set(c,u)}),await o.commit(),console.log(`Uploaded batch of ${i.length} to ${e}`)}}getSchemaSQL(){return"Firestore is a NoSQL database. No Schema definition is required. Collections are created automatically when you add data."}}const ye=new uN,t_=L.createContext(void 0),Ug="SPR_TECHFORGE_DB_V3",cN=[{id:"cash-01",name:"Office Cash",type:Ae.Cash,openingBalance:0,isSystem:!0},{id:"bank-01",name:"HDFC Bank",type:Ae.Bank,openingBalance:0}],dN=[at.Training,at.ReadyForInterview,at.Placed,at.Discontinued],gc={id:"admin-01",name:"Thirumal Reddy",username:"thirumalreddy@sprtechforge.com",password:"Shooter@2026",role:"admin",modules:["candidates","finance","users"],authProvider:"local",isPasswordChanged:!0},hN=({children:t})=>{const[e,n]=L.useState(null),[r,s]=L.useState([gc]),[i,o]=L.useState([]),[u,c]=L.useState(cN),[d,f]=L.useState([]),[m,g]=L.useState(dN),[w,_]=L.useState([]),[b,j]=L.useState([]),[C,E]=L.useState(null),N=ye.isConfigured();L.useEffect(()=>{if(N){console.log("App running in Cloud Mode"),E(null);const V=Fe=>{Fe&&Fe.code==="permission-denied"?E("Permission Denied: Your Firestore Rules are blocking access. Go to Cloud Setup > Rules Help for the fix."):E(`Cloud Error: ${Fe.message}`)},$=ye.subscribe("users",Fe=>{Fe.length===0?s([gc]):s(Fe)},V),G=ye.subscribe("candidates",Fe=>o(Fe),V),le=ye.subscribe("accounts",Fe=>c(Fe),V),ft=ye.subscribe("transactions",Fe=>f(Fe),V),ui=ye.subscribe("settings",Fe=>{const Ve=Fe.find(Qe=>Qe.id==="candidateStatuses");Ve&&Ve.values&&g(Ve.values)},V),ci=ye.subscribe("passwordResetRequests",Fe=>_(Fe),V),di=ye.subscribe("activityLogs",Fe=>{const Ve=Fe.sort((Qe,ls)=>new Date(ls.timestamp).getTime()-new Date(Qe.timestamp).getTime());j(Ve)},V);return()=>{$(),G(),le(),ft(),ui(),ci(),di()}}else{console.log("App running in Local Mode");const V=localStorage.getItem(Ug);if(V){const $=JSON.parse(V);if($.users&&$.users.length>0?s($.users):s([gc]),$.candidates){const G=$.candidates.map(le=>({...le,isActive:le.isActive!==void 0?le.isActive:!0}));o(G)}$.accounts&&$.accounts.length>0&&c($.accounts),$.transactions&&f($.transactions),$.candidateStatuses&&$.candidateStatuses.length>0&&g($.candidateStatuses),$.passwordResetRequests&&_($.passwordResetRequests),$.activityLogs&&j($.activityLogs)}}},[N]),L.useEffect(()=>{if(!N){const V={users:r,candidates:i,accounts:u,transactions:d,candidateStatuses:m,passwordResetRequests:w,activityLogs:b};localStorage.setItem(Ug,JSON.stringify(V))}},[r,i,u,d,m,w,b,N]);const P=(V,$)=>{N&&ye.saveItem(V,$).catch(G=>{E("Failed to save: "+G.message)})},O=(V,$)=>{N&&ye.deleteItem(V,$).catch(G=>{E("Failed to delete: "+G.message)})},k=(V,$,G,le)=>{const ft={id:vn(),timestamp:new Date().toISOString(),actorId:(e==null?void 0:e.id)||"system",actorName:(e==null?void 0:e.name)||"System",action:V,entityType:$,entityId:le,description:G};j(ui=>[ft,...ui]),P("activityLogs",ft)},y=async(V,$)=>{if(!V||!$)return{success:!1,message:"Credentials missing"};const G=r.find(ft=>ft.username.toLowerCase()===V.toLowerCase());if(!G)return{success:!1,message:"User not found"};if(G.password!==$)return{success:!1,message:"Incorrect password"};n(G);const le={id:vn(),timestamp:new Date().toISOString(),actorId:G.id,actorName:G.name,action:"LOGIN",entityType:"User",description:"User logged in"};return j(ft=>[le,...ft]),P("activityLogs",le),{success:!0}},v=()=>{e&&k("LOGIN","User","User logged out"),n(null)},T=V=>{s($=>[...$,V]),P("users",V),k("CREATE","User",`Created user ${V.username}`,V.id)},A=V=>{const $={...V};s(G=>G.map(le=>le.id===V.id?$:le)),e&&e.id===V.id&&n($),P("users",$),k("UPDATE","User",`Updated user ${V.username}`,V.id)},I=V=>{const $=r.find(G=>G.id===V);if(r.length<=1)throw new Error("Cannot delete the last user.");s(G=>G.filter(le=>le.id!==V)),O("users",V),k("DELETE","User",`Deleted user ${($==null?void 0:$.username)||V}`,V)},R=V=>{const $={id:vn(),username:V,requestDate:new Date().toISOString(),status:"pending"};_(le=>[...le,$]),P("passwordResetRequests",$);const G={id:vn(),timestamp:new Date().toISOString(),actorId:"system",actorName:"System",action:"OTHER",entityType:"User",description:`Password reset requested for ${V}`};j(le=>[G,...le]),P("activityLogs",G)},S=V=>{_($=>$.filter(G=>G.id!==V)),O("passwordResetRequests",V),k("UPDATE","User","Resolved password reset request",V)},Y=V=>{o($=>[...$,V]),P("candidates",V),k("CREATE","Candidate",`Created candidate ${V.name} (${V.batchId})`,V.id)},oe=V=>{o($=>$.map(G=>G.id===V.id?V:G)),P("candidates",V),k("UPDATE","Candidate",`Updated candidate ${V.name}`,V.id)},we=V=>{const $=i.find(G=>G.id===V);o(G=>G.filter(le=>le.id!==V)),O("candidates",V),k("DELETE","Candidate",`Deleted candidate ${($==null?void 0:$.name)||V}`,V)},Vt=V=>{const $=V.trim();if($&&!m.includes($)){const G=[...m,$];g(G),N&&ye.saveItem("settings",{id:"candidateStatuses",values:G}),k("UPDATE","Settings",`Added candidate status: ${$}`)}},H=V=>{c($=>[...$,V]),P("accounts",V),k("CREATE","Account",`Created account ${V.name}`,V.id)},J=V=>{c($=>$.map(G=>G.id===V.id?V:G)),P("accounts",V),k("UPDATE","Account",`Updated account ${V.name}`,V.id)},te=V=>{const $=u.find(G=>G.id===V);if($!=null&&$.isSystem)throw new Error("Cannot delete a System Account.");c(G=>G.filter(le=>le.id!==V)),O("accounts",V),k("DELETE","Account",`Deleted account ${($==null?void 0:$.name)||V}`,V)},B=V=>{f($=>[V,...$]),P("transactions",V),k("CREATE","Transaction",`Recorded ${V.type} of ${V.amount}`,V.id)},ee=V=>{f($=>$.map(G=>G.id===V.id?V:G)),P("transactions",V),k("UPDATE","Transaction",`Updated transaction ${V.id}`,V.id)},Lt=V=>{f($=>$.filter(G=>G.id!==V)),O("transactions",V),k("DELETE","Transaction",`Deleted transaction ${V}`,V)},ht=V=>{const $=d.find(G=>G.id===V);if($){const G={...$,isLocked:!0};f(le=>le.map(ft=>ft.id===V?G:ft)),P("transactions",G),k("UPDATE","Transaction",`Locked transaction ${V}`,V)}},tn=(V,$)=>{if($==="Candidate"){const G=i.find(le=>le.id===V);return G?`${G.name} (${G.batchId})`:"Unknown Candidate"}else{const G=u.find(le=>le.id===V);return G?G.name:"Unknown Account"}},wt=(V,$)=>{let G=0;if($==="Account"){const le=u.find(ft=>ft.id===V);le&&(G=le.openingBalance||0)}return Ui(V,$,d,G)},Gt=()=>{const V={users:r,candidates:i,accounts:u,transactions:d,candidateStatuses:m,passwordResetRequests:w,activityLogs:b,exportDate:new Date().toISOString()};u2(V,`SPR_Backup_${new Date().toISOString().split("T")[0]}.json`)},Pr=async V=>{if(V)try{V.users&&s(V.users),V.candidates&&o(V.candidates),V.accounts&&c(V.accounts),V.transactions&&f(V.transactions),V.candidateStatuses&&g(V.candidateStatuses),V.passwordResetRequests&&_(V.passwordResetRequests),V.activityLogs&&j(V.activityLogs),k("RESTORE","System","Database restored from backup file"),N?(await ye.uploadBatch("users",V.users||[]),await ye.uploadBatch("candidates",V.candidates||[]),await ye.uploadBatch("accounts",V.accounts||[]),await ye.uploadBatch("transactions",V.transactions||[]),await ye.uploadBatch("passwordResetRequests",V.passwordResetRequests||[]),await ye.uploadBatch("activityLogs",V.activityLogs||[]),V.candidateStatuses&&await ye.saveItem("settings",{id:"candidateStatuses",values:V.candidateStatuses}),alert("Data imported and synced to cloud.")):alert("Data imported successfully.")}catch($){console.error($),alert("Failed to import data: "+$.message)}},cn=async()=>{if(N)try{await ye.uploadBatch("users",r),await ye.uploadBatch("candidates",i),await ye.uploadBatch("accounts",u),await ye.uploadBatch("transactions",d),await ye.uploadBatch("passwordResetRequests",w),await ye.uploadBatch("activityLogs",b),await ye.saveItem("settings",{id:"candidateStatuses",values:m}),alert("Local data successfully uploaded to Cloud Database.")}catch(V){alert("Failed to sync data. Check console."),console.error(V)}};return l.jsx(t_.Provider,{value:{user:e,login:y,logout:v,users:r,addUser:T,updateUser:A,deleteUser:I,passwordResetRequests:w,addPasswordResetRequest:R,resolvePasswordResetRequest:S,candidates:i,addCandidate:Y,updateCandidate:oe,deleteCandidate:we,candidateStatuses:m,addCandidateStatus:Vt,accounts:u,addAccount:H,updateAccount:J,deleteAccount:te,transactions:d,addTransaction:B,updateTransaction:ee,deleteTransaction:Lt,lockTransaction:ht,activityLogs:b,getEntityName:tn,getEntityBalance:wt,exportData:Gt,importDatabase:Pr,isCloudEnabled:N,syncLocalToCloud:cn,cloudError:C},children:t})},Ge=()=>{const t=L.useContext(t_);if(!t)throw new Error("useApp must be used within AppProvider");return t},me=({children:t,className:e="",title:n,action:r})=>l.jsxs("div",{className:`bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden ${e}`,children:[(n||r)&&l.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center bg-gray-50",children:[n&&l.jsx("h3",{className:"text-lg font-bold text-gray-800",children:n}),r&&l.jsx("div",{children:r})]}),l.jsx("div",{className:"p-6 text-gray-600",children:t})]}),ie=({children:t,variant:e="primary",className:n="",...r})=>{const s="px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white shadow-sm",i={primary:"bg-spr-accent hover:bg-spr-accent_hover text-white focus:ring-blue-500",secondary:"bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 focus:ring-gray-200",danger:"bg-spr-danger hover:bg-red-700 text-white focus:ring-red-500",success:"bg-spr-success hover:bg-emerald-700 text-white focus:ring-emerald-500"};return l.jsx("button",{className:`${s} ${i[e]} ${n} disabled:opacity-50 disabled:cursor-not-allowed`,...r,children:t})},je=({label:t,className:e="",...n})=>l.jsxs("div",{className:"mb-4",children:[t&&l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),l.jsx("input",{className:`w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 placeholder-gray-400 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none transition-colors shadow-sm ${e}`,...n})]}),jl=({label:t,children:e,className:n="",...r})=>l.jsxs("div",{className:"mb-4",children:[t&&l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),l.jsx("select",{className:`w-full bg-white border border-gray-300 rounded-lg px-4 py-2 text-gray-900 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none transition-colors shadow-sm ${n}`,...r,children:e})]}),yf=({currentPage:t,totalPages:e,onPageChange:n})=>e<=1?null:l.jsxs("div",{className:"flex justify-center items-center gap-2 mt-6",children:[l.jsx(ie,{variant:"secondary",disabled:t===1,onClick:()=>n(t-1),className:"px-3 py-1 text-sm",children:"Prev"}),l.jsxs("span",{className:"text-gray-600 text-sm font-medium",children:["Page ",t," of ",e]}),l.jsx(ie,{variant:"secondary",disabled:t===e,onClick:()=>n(t+1),className:"px-3 py-1 text-sm",children:"Next"})]}),vf=({isOpen:t,onClose:e,title:n,children:r})=>(L.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),t?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:l.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto transform transition-all scale-100",children:[l.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 sticky top-0 bg-white z-10",children:[l.jsx("h3",{className:"text-xl font-bold text-gray-800",children:n}),l.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 transition-colors p-1 rounded hover:bg-gray-100",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsx("div",{className:"p-6 text-gray-600",children:r})]})}):null),mu=({isOpen:t,onClose:e,onConfirm:n,title:r,message:s})=>l.jsx(vf,{isOpen:t,onClose:e,title:r,children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-gray-600",children:s}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx(ie,{variant:"secondary",onClick:e,children:"Cancel"}),l.jsx(ie,{variant:"danger",onClick:()=>{n(),e()},children:"Delete"})]})]})}),n_=({size:t="sm"})=>l.jsxs("div",{className:`flex items-center gap-3 ${t==="lg"?"flex-col":""}`,children:[l.jsx("div",{className:`relative flex items-center justify-center bg-gradient-to-br from-blue-600 to-indigo-900 rounded-lg shadow-lg shadow-blue-200 transform rotate-3 transition-transform ${t==="lg"?"w-20 h-20":"w-10 h-10"}`,children:l.jsx("svg",{className:"text-white w-3/5 h-3/5 transform -rotate-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),l.jsxs("div",{className:`font-bold tracking-tight text-gray-900 ${t==="lg"?"text-3xl":"text-xl"}`,children:["SPR ",l.jsx("span",{className:"text-spr-accent",children:"Techforge"})]})]}),pn=({to:t,icon:e,label:n,badge:r})=>{const i=ni().pathname.startsWith(t);return l.jsxs(Pn,{to:t,className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors mb-1 font-medium relative ${i?"bg-spr-accent text-white shadow-md shadow-sky-100":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[e,l.jsx("span",{children:n}),r&&r>0?l.jsx("span",{className:"absolute right-2 top-3 bg-red-500 text-white text-xs font-bold w-5 h-5 flex items-center justify-center rounded-full shadow-sm animate-pulse",children:r}):null]})},Xe=({children:t})=>{const{user:e,logout:n,isCloudEnabled:r,passwordResetRequests:s}=Ge(),i=Wt();if(!e)return l.jsx(l.Fragment,{children:t});const o=()=>{n(),i("/")},u=f=>e.role==="admin"||e.modules.includes(f),c=e.role==="admin",d=s?s.length:0;return l.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[l.jsxs("aside",{className:"w-64 bg-white border-r border-gray-200 flex-shrink-0 fixed h-full left-0 top-0 z-10 shadow-sm print:hidden",children:[l.jsx("div",{className:"p-6 border-b border-gray-100",children:l.jsx(n_,{})}),l.jsxs("nav",{className:"p-4 overflow-y-auto h-[calc(100vh-80px)]",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("p",{className:"px-4 text-xs font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Main"}),l.jsx(pn,{to:"/dashboard",label:"Dashboard",icon:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})})]}),u("candidates")&&l.jsxs("div",{className:"mb-6",children:[l.jsx("p",{className:"px-4 text-xs font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Training"}),l.jsx(pn,{to:"/candidates",label:"Candidates",icon:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})})]}),u("finance")&&l.jsxs("div",{className:"mb-6",children:[l.jsx("p",{className:"px-4 text-xs font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Finance"}),l.jsx(pn,{to:"/finance/transactions",label:"Transactions",icon:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),l.jsx(pn,{to:"/finance/accounts",label:"Ledger Accounts",icon:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),l.jsx(pn,{to:"/finance/financial-statements",label:"Financial Statements",icon:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),l.jsx(pn,{to:"/finance/reports",label:"Data & Backup",icon:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})})})]}),u("users")&&l.jsxs("div",{className:"mb-6",children:[l.jsx("p",{className:"px-4 text-xs font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Admin"}),l.jsx(pn,{to:"/admin/users",label:"User Management",badge:e.role==="admin"?d:0,icon:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),c&&l.jsx(pn,{to:"/admin/logs",label:"System Logs",icon:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}),l.jsx(pn,{to:"/admin/test-runner",label:"System Diagnostics",icon:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),l.jsx(pn,{to:"/admin/cloud",label:"Cloud Setup",icon:l.jsx("svg",{className:`w-5 h-5 ${r?"text-emerald-500":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})})]}),l.jsxs("div",{className:"mt-auto",children:[l.jsxs("div",{className:"px-4 py-4 bg-gray-50 rounded-lg mb-4 border border-gray-100",children:[l.jsx("p",{className:"text-sm text-gray-900 font-bold truncate",title:e.name||e.username,children:e.name||e.username}),l.jsx("p",{className:"text-xs text-gray-500 capitalize",children:e.role})]}),l.jsx(ie,{variant:"danger",onClick:o,className:"w-full text-sm",children:"Sign Out"})]})]})]}),l.jsx("main",{className:"ml-64 flex-1 p-8 overflow-y-auto h-screen print:ml-0 print:p-0",children:l.jsx("div",{className:"max-w-7xl mx-auto print:max-w-none",children:t})})]})},fN=()=>{const{login:t,updateUser:e,user:n,isCloudEnabled:r,cloudError:s,addPasswordResetRequest:i}=Ge(),o=Wt(),[u,c]=L.useState(""),[d,f]=L.useState(""),[m,g]=L.useState(""),[w,_]=L.useState(!1),[b,j]=L.useState(!1),[C,E]=L.useState(""),[N,P]=L.useState(""),[O,k]=L.useState(!1),[y,v]=L.useState(""),[T,A]=L.useState("");L.useEffect(()=>{n&&n.isPasswordChanged!==!1?o("/dashboard"):n&&n.isPasswordChanged===!1&&j(!0)},[n,o]);const I=async Y=>{Y.preventDefault(),_(!0),g("");const oe=await t(u,d);oe.success||g(oe.message||"Login failed"),_(!1)},R=Y=>{if(Y.preventDefault(),C!==N){g("Passwords do not match");return}if(C.length<4){g("Password is too short");return}if(C===(n==null?void 0:n.name)){g("New password cannot be the same as your name");return}n&&e({...n,password:C,isPasswordChanged:!0})},S=Y=>{Y.preventDefault(),y.trim()&&(i(y),A("Request sent to Admin. Please contact Thirumal Reddy for your new password."),setTimeout(()=>{k(!1),A(""),v("")},4e3))};return l.jsxs("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4 relative overflow-hidden",children:[l.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden z-0 bg-slate-50",children:[l.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-96 h-96 bg-blue-200/50 rounded-full blur-3xl"}),l.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-96 h-96 bg-indigo-200/50 rounded-full blur-3xl"}),l.jsx("div",{className:"absolute top-[40%] left-[40%] w-72 h-72 bg-sky-100/40 rounded-full blur-3xl"})]}),l.jsxs("div",{className:"w-full max-w-md z-20",children:[s&&l.jsx("div",{className:"mb-6 bg-red-50 border-l-4 border-red-500 p-4 rounded-lg shadow-sm animate-fade-in",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("svg",{className:"w-6 h-6 text-red-500 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-red-800 font-bold text-sm",children:"Connectivity Issue"}),l.jsx("p",{className:"text-red-600 text-sm",children:s}),s.includes("Permission")&&l.jsx("button",{onClick:()=>o("/admin/cloud"),className:"text-xs text-red-700 underline mt-1",children:"Go to Cloud Setup for fix"})]})]})}),l.jsxs("div",{className:"bg-white/80 border border-white/50 p-8 rounded-2xl shadow-2xl relative backdrop-blur-md",children:[l.jsx("div",{className:"flex justify-center mb-8",children:l.jsx(n_,{size:"lg"})}),b?l.jsxs("div",{className:"animate-fade-in",children:[l.jsx("h2",{className:"text-2xl font-bold text-center text-slate-800 mb-2",children:"Secure Your Account"}),l.jsx("p",{className:"text-center text-slate-500 mb-6 text-sm",children:"This is your first login. Please set a new, secure password to continue to the dashboard."}),l.jsxs("form",{onSubmit:R,children:[l.jsx(je,{label:"New Password",type:"password",value:C,onChange:Y=>E(Y.target.value),required:!0}),l.jsx(je,{label:"Confirm Password",type:"password",value:N,onChange:Y=>P(Y.target.value),required:!0}),m&&l.jsx("p",{className:"text-red-500 text-sm mb-4 text-center",children:m}),l.jsx(ie,{type:"submit",className:"w-full py-3 text-lg shadow-lg shadow-blue-100",children:"Update Password & Login"})]})]}):l.jsxs(l.Fragment,{children:[l.jsx("h2",{className:"text-2xl font-bold text-center text-slate-800 mb-2",children:"Portal Login"}),l.jsx("p",{className:"text-center text-slate-500 mb-6",children:"Sign in to manage SPR Techforge"}),l.jsxs("form",{onSubmit:I,children:[l.jsx(je,{label:"Username / Login ID",value:u,onChange:Y=>c(Y.target.value),placeholder:"e.g. name@sprtechforge.com"}),l.jsx(je,{label:"Password",type:"password",value:d,onChange:Y=>f(Y.target.value),placeholder:"Enter password"}),m&&l.jsx("p",{className:"text-red-500 text-sm mb-4 text-center",children:m}),l.jsx("div",{className:"flex justify-between items-center mb-6",children:l.jsx("button",{type:"button",onClick:()=>k(!0),className:"text-sm text-spr-accent hover:text-spr-accent_hover hover:underline font-medium",children:"Forgot Password?"})}),l.jsx(ie,{type:"submit",className:"w-full py-3 text-lg shadow-lg shadow-blue-100 hover:shadow-blue-200",disabled:w,children:w?"Authenticating...":"Login"})]})]}),l.jsx("div",{className:"mt-6 text-center",children:l.jsxs("p",{className:"text-xs text-slate-400",children:[" 2025 SPR Techforge Pvt Ltd. All rights reserved.",r&&l.jsxs("span",{className:"block mt-1 text-slate-500 font-bold flex items-center justify-center gap-1",children:[l.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500"})," Cloud Connected"]})]})})]})]}),l.jsx(vf,{isOpen:O,onClose:()=>k(!1),title:"Reset Password",children:T?l.jsxs("div",{className:"text-center py-4",children:[l.jsx("div",{className:"text-spr-accent font-bold text-lg mb-2",children:"Request Sent"}),l.jsx("p",{className:"text-gray-600",children:T})]}):l.jsxs("form",{onSubmit:S,children:[l.jsx("p",{className:"text-gray-600 mb-4",children:"Enter your Login ID below. The administrator will be notified to reset your password."}),l.jsx(je,{label:"Your Username / Login ID",value:y,onChange:Y=>v(Y.target.value),placeholder:"e.g. john@sprtechforge.com",required:!0}),l.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[l.jsx(ie,{type:"button",variant:"secondary",onClick:()=>k(!1),children:"Cancel"}),l.jsx(ie,{type:"submit",children:"Send Request"})]})]})})]})},pN=()=>{const{candidates:t,accounts:e,transactions:n,getEntityBalance:r}=Ge(),s=e.filter(k=>k.type===Ae.Cash),i=e.filter(k=>k.type===Ae.Bank),o=s.reduce((k,y)=>k+r(y.id,"Account"),0),u=i.reduce((k,y)=>k+r(y.id,"Account"),0),c=t.length,d=t.filter(k=>k.status===at.Placed),f=n.filter(k=>k.type===_e.Expense).reduce((k,y)=>k+y.amount,0),m=n.filter(k=>k.type===_e.Income).reduce((k,y)=>k+y.amount,0),g=k=>{const y=n.filter(T=>T.fromEntityId===k&&T.type===_e.Income).reduce((T,A)=>T+A.amount,0),v=n.filter(T=>T.toEntityId===k&&T.type===_e.Refund).reduce((T,A)=>T+A.amount,0);return y-v},w=d.reduce((k,y)=>k+g(y.id),0),b=t.filter(k=>k.status!==at.Placed&&k.status!==at.Discontinued&&k.isActive).reduce((k,y)=>k+g(y.id),0),j=t.filter(k=>k.isActive),C=j.reduce((k,y)=>{const v=g(y.id),T=y.agreedAmount-v;return k+(T>0?T:0)},0),N=e.filter(k=>k.type===Ae.Debtor).reduce((k,y)=>{const v=r(y.id,"Account");return k+(v>0?v:0)},0),O=e.filter(k=>k.type===Ae.Creditor).reduce((k,y)=>{const v=r(y.id,"Account");return k+(v<0?Math.abs(v):0)},0);return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Welcome back, oversee your consultancy metrics."})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-sm text-gray-500 uppercase font-bold",children:"Net Liquidity"}),l.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:ue(o+u)})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[l.jsx(me,{className:"bg-white border-emerald-200 border shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"p-3 bg-emerald-100 rounded-full text-emerald-600",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Cash in Hand"}),l.jsx("p",{className:"text-xl font-bold text-gray-900",children:ue(o)}),l.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:["Total of ",s.length," Cash A/c"]})]})]})}),l.jsx(me,{className:"bg-white border-blue-200 border shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"p-3 bg-blue-100 rounded-full text-blue-600",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18M3 7l9-4 9 4M4 10h16v11H4V10z"})})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Bank Balance"}),l.jsx("p",{className:"text-xl font-bold text-gray-900",children:ue(u)}),l.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:["Total of ",i.length," Bank A/c"]})]})]})}),l.jsx(me,{className:"bg-white border-indigo-200 border shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"p-3 bg-indigo-100 rounded-full text-indigo-600",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Total Income"}),l.jsx("p",{className:"text-xl font-bold text-gray-900",children:ue(m)})]})]})}),l.jsx(me,{className:"bg-white border-red-200 border shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"p-3 bg-red-100 rounded-full text-red-600",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Total Expenses"}),l.jsx("p",{className:"text-xl font-bold text-gray-900",children:ue(f)})]})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsx(me,{title:"Candidate Financials",className:"lg:col-span-2",children:l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 pt-2",children:[l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[l.jsx("p",{className:"text-gray-500 text-xs uppercase tracking-wider font-bold",children:"Total Candidates"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:c}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[j.length," Active"]})]}),l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[l.jsx("p",{className:"text-emerald-600 text-xs uppercase tracking-wider font-bold",children:"From Placed"}),l.jsx("p",{className:"text-xl font-bold text-emerald-600 mt-1",children:ue(w)}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Received"})]}),l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[l.jsx("p",{className:"text-blue-600 text-xs uppercase tracking-wider font-bold",children:"From Existing"}),l.jsx("p",{className:"text-xl font-bold text-blue-600 mt-1",children:ue(b)}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Received (Advances)"})]}),l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 col-span-2 md:col-span-3 flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-amber-600 text-xs uppercase tracking-wider font-bold",children:"Pending Collectibles (Active Candidates)"}),l.jsx("p",{className:"text-2xl font-bold text-amber-600 mt-1",children:ue(C)})]}),l.jsx("div",{className:"text-right",children:l.jsx("span",{className:"text-xs text-gray-500 block",children:"Potential Revenue"})})]})]})}),l.jsx(me,{title:"Personal Ledger",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"My Debtors"}),l.jsx("p",{className:"text-lg font-bold text-gray-900",children:"Receivables"})]}),l.jsx("span",{className:"bg-emerald-100 text-emerald-700 text-xs px-2 py-1 rounded font-medium",children:"Assets"})]}),l.jsx("p",{className:"text-2xl font-bold text-emerald-600 mt-2",children:ue(N)}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"People owe me"})]}),l.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"My Creditors"}),l.jsx("p",{className:"text-lg font-bold text-gray-900",children:"Payables"})]}),l.jsx("span",{className:"bg-red-100 text-red-700 text-xs px-2 py-1 rounded font-medium",children:"Liabilities"})]}),l.jsx("p",{className:"text-2xl font-bold text-red-600 mt-2",children:ue(O)}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"I owe people"})]})]})})]}),l.jsx(me,{title:"Profit & Loss Estimation",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center border-b border-gray-200 pb-3",children:[l.jsx("span",{className:"text-gray-600",children:"Total Income (Realized)"}),l.jsx("span",{className:"text-emerald-600 font-bold",children:ue(m)})]}),l.jsxs("div",{className:"flex justify-between items-center border-b border-gray-200 pb-3",children:[l.jsx("span",{className:"text-gray-600",children:"Total Expenses (Realized)"}),l.jsxs("span",{className:"text-red-600 font-bold",children:["- ",ue(f)]})]}),l.jsxs("div",{className:"flex justify-between items-center pt-1",children:[l.jsx("span",{className:"text-gray-900 text-lg font-bold",children:"Net Profit / Loss"}),l.jsx("span",{className:`text-xl font-bold ${m-f>=0?"text-emerald-600":"text-red-600"}`,children:ue(m-f)})]})]})})]})},mN=()=>{const{candidates:t,deleteCandidate:e,updateCandidate:n,transactions:r,candidateStatuses:s}=Ge(),[i,o]=L.useState(1),[u,c]=L.useState(""),[d,f]=L.useState("All"),[m,g]=L.useState("joinedDesc"),[w,_]=L.useState(null),b=10,j=t.filter(y=>{const v=u.toLowerCase(),T=y.name.toLowerCase().includes(v)||y.batchId.toLowerCase().includes(v)||y.referredBy&&y.referredBy.toLowerCase().includes(v),A=d==="All"||y.status===d;return T&&A});j.sort((y,v)=>{if(m==="joinedDesc")return new Date(v.joinedDate).getTime()-new Date(y.joinedDate).getTime();if(m==="joinedAsc")return new Date(y.joinedDate).getTime()-new Date(v.joinedDate).getTime();if(m==="nameAsc")return y.name.localeCompare(v.name);if(m==="balanceDesc"){const T=A=>{const I=Math.abs(r.filter(R=>R.fromEntityId===A.id&&R.type===_e.Income).reduce((R,S)=>R+S.amount,0));return A.agreedAmount-I};return T(v)-T(y)}return 0});const C=Math.ceil(j.length/b),E=j.slice((i-1)*b,i*b),N=y=>{_(y)},P=()=>{w&&(e(w),_(null))},O=y=>{n({...y,isActive:!y.isActive})},k=y=>{switch(y){case at.Placed:return"bg-emerald-100 text-emerald-800 border border-emerald-200";case at.Training:return"bg-blue-100 text-blue-800 border border-blue-200";case at.ReadyForInterview:return"bg-amber-100 text-amber-800 border border-amber-200";case at.Discontinued:return"bg-red-100 text-red-800 border border-red-200";default:return"bg-gray-100 text-gray-700 border border-gray-200"}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Candidates"}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(ie,{variant:"secondary",onClick:()=>Lh(j,"candidates.csv"),children:"Export CSV"}),l.jsx(Pn,{to:"/candidates/new",children:l.jsx(ie,{children:"+ Add Candidate"})})]})]}),l.jsxs(me,{children:[l.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[l.jsx("input",{placeholder:"Search name, batch, or referral...",className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 flex-1 focus:ring-1 focus:ring-spr-accent outline-none",value:u,onChange:y=>c(y.target.value)}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("select",{className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none",value:d,onChange:y=>f(y.target.value),children:[l.jsx("option",{value:"All",children:"All Statuses"}),s.map(y=>l.jsx("option",{value:y,children:y},y))]}),l.jsxs("select",{className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none",value:m,onChange:y=>g(y.target.value),children:[l.jsx("option",{value:"joinedDesc",children:"Newest First"}),l.jsx("option",{value:"joinedAsc",children:"Oldest First"}),l.jsx("option",{value:"nameAsc",children:"Name (A-Z)"}),l.jsx("option",{value:"balanceDesc",children:"Highest Due Amount"})]})]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-left text-gray-600",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-spr-700 text-xs uppercase tracking-wider text-gray-500 bg-gray-50",children:[l.jsx("th",{className:"py-3 px-4",children:"Batch ID"}),l.jsx("th",{className:"py-3 px-4",children:"Candidate Details"}),l.jsx("th",{className:"py-3 px-4 text-center",children:"Active"}),l.jsx("th",{className:"py-3 px-4",children:"Status"}),l.jsx("th",{className:"py-3 px-4 text-right",children:"Due Amount"}),l.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-spr-700",children:E.length>0?E.map(y=>{const v=Math.abs(r.filter(S=>S.fromEntityId===y.id&&S.type===_e.Income).reduce((S,Y)=>S+Y.amount,0)),T=r.filter(S=>S.toEntityId===y.id&&S.type===_e.Refund).reduce((S,Y)=>S+Y.amount,0),A=v-T,I=y.agreedAmount-A,R=!y.isActive;return l.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${R?"opacity-60 bg-gray-50/50 grayscale":""}`,children:[l.jsx("td",{className:"py-3 px-4 font-mono text-sm text-indigo-600 font-medium align-top",children:y.batchId}),l.jsxs("td",{className:"py-3 px-4 font-medium text-gray-900 align-top",children:[l.jsx("div",{children:y.name}),l.jsxs("div",{className:"text-xs text-gray-500 flex flex-col gap-0.5 mt-1",children:[l.jsxs("span",{children:[y.phone," ",y.alternatePhone?`/ ${y.alternatePhone}`:""]}),y.referredBy&&l.jsxs("span",{className:"text-indigo-500",children:["Ref: ",y.referredBy]}),y.status===at.Placed&&y.placedCompany&&l.jsxs("span",{className:"text-emerald-600 font-bold",children:["Placed @ ",y.placedCompany," (",y.packageDetails,")"]})]})]}),l.jsx("td",{className:"py-3 px-4 text-center align-top",children:l.jsxs("button",{onClick:()=>O(y),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${y.isActive?"bg-emerald-500":"bg-gray-300"}`,title:y.isActive?"Mark as Inactive":"Mark as Active",children:[l.jsx("span",{className:"sr-only",children:"Toggle Active"}),l.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${y.isActive?"translate-x-6":"translate-x-1"}`})]})}),l.jsx("td",{className:"py-3 px-4 align-top",children:l.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${k(y.status)}`,children:y.status})}),l.jsxs("td",{className:"py-3 px-4 text-right align-top",children:[l.jsx("div",{className:`font-bold ${I>0?"text-amber-600":"text-emerald-600"}`,children:ue(I)}),l.jsxs("div",{className:"text-xs text-gray-400",children:["Paid: ",ue(A)]})]}),l.jsx("td",{className:"py-3 px-4 text-center align-top",children:l.jsxs("div",{className:"flex justify-center gap-2",children:[l.jsx(Pn,{to:`/candidates/edit/${y.id}`,className:"text-blue-600 hover:text-blue-800 text-sm",title:"Edit",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),l.jsx(Pn,{to:`/finance/statement/Candidate/${y.id}`,className:"text-indigo-600 hover:text-indigo-800 text-sm",title:"Statement",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}),l.jsx(Pn,{to:`/candidates/agreement/${y.id}`,className:"text-amber-600 hover:text-amber-800 text-sm",title:"Agreement",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),l.jsx("button",{onClick:()=>N(y.id),className:"text-red-500 hover:text-red-700 text-sm",title:"Delete",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},y.id)}):l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"py-8 text-center text-gray-500",children:"No candidates found matching criteria."})})})]})}),l.jsx(yf,{currentPage:i,totalPages:C,onPageChange:o})]}),l.jsx(mu,{isOpen:!!w,onClose:()=>_(null),onConfirm:P,title:"Delete Candidate",message:"Are you sure you want to delete this candidate? Transactions associated with them will remain but will lose their direct link."})]})},Bg=()=>{const{addCandidate:t,updateCandidate:e,candidates:n,candidateStatuses:r,addCandidateStatus:s}=Ge(),i=Wt(),{id:o}=ri(),[u,c]=L.useState(null),d=`CANDIDATURE AGREEMENT

1. I, [CANDIDATE NAME], agree to join SPR Techforge for the training program.
2. I agree to pay the total sum of [AMOUNT] as discussed.
3. I understand that the advance payment is non-refundable unless specified otherwise.
4. I will maintain professional conduct during the training period.
5. Upon placement, I agree to fulfill the financial obligations as per the agreement.

Date: _________________
Signature: _________________`,[f,m]=L.useState({name:"",batchId:"",email:"",phone:"",alternatePhone:"",referredBy:"",address:"",agreedAmount:0,status:at.Training,placedCompany:"",packageDetails:"",isActive:!0,notes:"",agreementText:d});L.useEffect(()=>{if(o){const _=n.find(b=>b.id===o);_&&m({..._,agreementText:_.agreementText||d.replace("[CANDIDATE NAME]",_.name).replace("[AMOUNT]",_.agreedAmount.toString())})}},[o,n]);const g=_=>{if(_.preventDefault(),c(null),!f.name||!f.name.trim()){c("Full Name is required");return}if(!f.batchId||!f.batchId.trim()){c("Batch ID is required");return}if(!f.email||!f.email.trim()){c("Email Address is required");return}if(!f.phone||!f.phone.trim()){c("Phone Number is required");return}if(f.agreedAmount===void 0||f.agreedAmount<0){c("Agreed Amount is required");return}if(n.some(C=>{var E,N;return C.id!==(o||"")&&(C.email&&C.email.trim().toLowerCase()===((E=f.email)==null?void 0:E.trim().toLowerCase())||C.phone&&C.phone.trim()===((N=f.phone)==null?void 0:N.trim()))})){c("A candidate with this Email or Phone Number already exists.");return}const j={...f,id:o||vn(),joinedDate:f.joinedDate||new Date().toISOString()};o?e(j):t(j),i("/candidates")},w=()=>{const _=window.prompt("Enter new status name:");_&&_.trim()&&(s(_.trim()),m({...f,status:_.trim()}))};return l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:o?"Edit Candidate":"Add New Candidate"}),u&&l.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded shadow-sm animate-fade-in",children:l.jsx("div",{className:"flex",children:l.jsx("div",{className:"ml-3",children:l.jsx("p",{className:"text-sm text-red-700 font-bold",children:u})})})}),l.jsxs("form",{onSubmit:g,children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs(me,{title:"Personal & Contact Details",children:[l.jsx("div",{className:"flex justify-end mb-4",children:l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer bg-gray-50 px-4 py-2 rounded-lg border border-spr-700 hover:bg-gray-100",children:[l.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Active Status"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"checkbox",className:"sr-only peer",checked:f.isActive,onChange:_=>m({...f,isActive:_.target.checked})}),l.jsx("div",{className:"w-11 h-6 bg-gray-300 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-spr-accent"})]})]})}),l.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Full Name"}),l.jsx(je,{value:f.name,onChange:_=>m({...f,name:_.target.value}),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Batch ID"}),l.jsx(je,{value:f.batchId,onChange:_=>m({...f,batchId:_.target.value}),required:!0})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Phone Number"}),l.jsx(je,{value:f.phone,onChange:_=>m({...f,phone:_.target.value}),required:!0})]}),l.jsx(je,{label:"Alternate Phone",value:f.alternatePhone||"",onChange:_=>m({...f,alternatePhone:_.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Email Address"}),l.jsx(je,{type:"email",value:f.email,onChange:_=>m({...f,email:_.target.value}),required:!0})]}),l.jsx(je,{label:"Referred By",value:f.referredBy||"",onChange:_=>m({...f,referredBy:_.target.value}),placeholder:"Name of referrer (Optional)"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Complete Address"}),l.jsx("textarea",{className:"w-full bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none",rows:3,value:f.address,onChange:_=>m({...f,address:_.target.value}),placeholder:"Enter full address"})]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs(me,{title:"Training & Placement Info",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Agreed Total Amount ()"}),l.jsx(je,{type:"number",value:f.agreedAmount,onChange:_=>m({...f,agreedAmount:parseFloat(_.target.value)||0}),required:!0})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 required-label",children:"Current Status"}),l.jsx("button",{type:"button",onClick:w,className:"text-xs text-spr-accent hover:underline font-medium",children:"+ Add Status"})]}),l.jsx("select",{className:"w-full bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none transition-colors",value:f.status,onChange:_=>m({...f,status:_.target.value}),required:!0,children:r.map(_=>l.jsx("option",{value:_,children:_},_))})]}),f.status===at.Placed&&l.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg border border-emerald-200 mb-4 space-y-3 animate-fade-in",children:[l.jsx("h4",{className:"text-sm font-bold text-emerald-800 uppercase tracking-wide",children:"Placement Details"}),l.jsx(je,{label:"Company Name",value:f.placedCompany||"",onChange:_=>m({...f,placedCompany:_.target.value}),placeholder:"e.g. Google, Microsoft"}),l.jsx(je,{label:"Package / Salary Details",value:f.packageDetails||"",onChange:_=>m({...f,packageDetails:_.target.value}),placeholder:"e.g. 12 LPA"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),l.jsx("textarea",{className:"w-full bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none",rows:2,value:f.notes,onChange:_=>m({...f,notes:_.target.value})})]})]}),l.jsxs(me,{title:"Candidature Agreement",children:[l.jsx("div",{className:"mb-2 text-xs text-gray-500",children:"Edit the terms below for this candidate. This text will be used when generating the agreement."}),l.jsx("textarea",{className:"w-full bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-800 font-mono text-sm focus:border-spr-accent focus:ring-1 focus:ring-spr-accent outline-none",rows:8,value:f.agreementText,onChange:_=>m({...f,agreementText:_.target.value})})]})]})]}),l.jsxs("div",{className:"mt-6 flex gap-4 justify-end pb-10",children:[l.jsx(ie,{type:"button",variant:"secondary",onClick:()=>i("/candidates"),children:"Cancel"}),l.jsx(ie,{type:"submit",children:o?"Update Candidate":"Save Candidate"})]})]})]})},gN=()=>{const{candidates:t}=Ge(),{id:e}=ri(),n=Wt(),r=t.find(s=>s.id===e);return r?l.jsxs("div",{className:"bg-white min-h-screen text-black p-8",children:[l.jsxs("div",{className:"print:hidden mb-8 flex justify-between items-center bg-gray-100 p-4 rounded-lg border border-gray-300",children:[l.jsx(ie,{variant:"secondary",onClick:()=>n(-1),className:"text-gray-800",children:"Back"}),l.jsx("div",{className:"flex gap-2",children:l.jsx(ie,{onClick:()=>window.print(),children:"Print / Save PDF"})})]}),l.jsxs("div",{className:"max-w-3xl mx-auto print:w-full",children:[l.jsxs("div",{className:"flex items-center justify-between mb-8 border-b-2 border-indigo-600 pb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-indigo-600 rounded-lg",children:l.jsx("svg",{className:"text-white w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-indigo-900",children:"SPR Techforge Pvt Ltd"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Excellence in Training & Placement"})]})]}),l.jsxs("div",{className:"text-right text-sm text-gray-600",children:[l.jsxs("p",{children:["Date: ",new Date().toLocaleDateString()]}),l.jsxs("p",{children:["Ref: ",r.batchId]})]})]}),l.jsxs("div",{className:"mb-8",children:[l.jsx("h2",{className:"text-xl font-bold text-center uppercase underline mb-6",children:"Candidature Training Agreement"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6 bg-gray-50 p-4 rounded border border-gray-200",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Candidate Name"}),l.jsx("p",{className:"font-bold text-lg",children:r.name})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Batch ID"}),l.jsx("p",{className:"font-bold text-lg",children:r.batchId})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Contact"}),l.jsx("p",{children:r.phone}),l.jsx("p",{children:r.email})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Address"}),l.jsx("p",{className:"whitespace-pre-wrap",children:r.address||"N/A"})]})]}),l.jsx("div",{className:"prose max-w-none",children:l.jsx("div",{className:"whitespace-pre-wrap font-serif text-justify leading-relaxed text-gray-800",children:r.agreementText||"No agreement text provided."})})]}),l.jsxs("div",{className:"mt-20 grid grid-cols-2 gap-10",children:[l.jsxs("div",{className:"border-t border-black pt-2 text-center",children:[l.jsx("p",{className:"font-bold",children:"SPR Techforge Representative"}),l.jsx("p",{className:"text-xs text-gray-500",children:"(Authorized Signatory)"})]}),l.jsxs("div",{className:"border-t border-black pt-2 text-center",children:[l.jsx("p",{className:"font-bold",children:r.name}),l.jsx("p",{className:"text-xs text-gray-500",children:"(Candidate Signature)"})]})]}),l.jsx("div",{className:"mt-12 text-center text-xs text-gray-400 print:fixed print:bottom-4 print:w-full",children:l.jsx("p",{children:"SPR Techforge Pvt Ltd | Registered Office Address Here | Contact: contact@sprtechforge.com"})})]})]}):l.jsx("div",{className:"p-8 text-white",children:"Candidate not found"})},yN=()=>{const{transactions:t,getEntityName:e,deleteTransaction:n,user:r,accounts:s,candidates:i}=Ge(),[o,u]=L.useState(1),[c,d]=L.useState(""),[f,m]=L.useState("All"),[g,w]=L.useState("All"),[_,b]=L.useState(""),[j,C]=L.useState(""),[E,N]=L.useState(""),[P,O]=L.useState(""),[k,y]=L.useState(null),[v,T]=L.useState(null),A=Wt(),I=10,S=[...t].sort((B,ee)=>new Date(ee.date).getTime()-new Date(B.date).getTime()).filter(B=>{const ee=f==="All"||B.type===f,Lt=g==="All"||g==="Locked"&&B.isLocked||g==="Unlocked"&&!B.isLocked,ht=_===""||B.fromEntityId===_,tn=j===""||B.toEntityId===j,wt=e(B.fromEntityId,B.fromEntityType).toLowerCase(),Gt=e(B.toEntityId,B.toEntityType).toLowerCase(),Pr=B.description.toLowerCase().includes(c.toLowerCase())||wt.includes(c.toLowerCase())||Gt.includes(c.toLowerCase());let cn=!0;if(E){const V=new Date(E);V.setHours(0,0,0,0),cn=cn&&new Date(B.date)>=V}if(P){const V=new Date(P);V.setHours(23,59,59,999),cn=cn&&new Date(B.date)<=V}return ee&&Pr&&cn&&Lt&&ht&&tn}),Y=Math.ceil(S.length/I),oe=S.slice((o-1)*I,o*I),we=B=>{if(B.isLocked&&(r==null?void 0:r.role)!=="admin"){alert("This transaction is locked.");return}T(B.id)},Vt=()=>{v&&(n(v),T(null))},H=()=>{const B=S.map(ee=>({Date:new Date(ee.date).toLocaleDateString(),Type:ee.type,Description:ee.description,From:e(ee.fromEntityId,ee.fromEntityType),To:e(ee.toEntityId,ee.toEntityType),Amount:ee.amount,Locked:ee.isLocked?"Yes":"No"}));Lh(B,"transactions.csv")},J=[...s].sort((B,ee)=>B.name.localeCompare(ee.name)),te=[...i].sort((B,ee)=>B.name.localeCompare(ee.name));return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Transactions"}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(ie,{variant:"secondary",onClick:H,children:"Export CSV"}),l.jsx(Pn,{to:"/finance/transactions/new",children:l.jsx(ie,{children:"+ New Entry"})})]})]}),l.jsxs(me,{children:[l.jsxs("div",{className:"mb-6 space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsx("input",{placeholder:"Search description...",className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none placeholder-gray-400",value:c,onChange:B=>d(B.target.value)}),l.jsxs("select",{className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none",value:f,onChange:B=>m(B.target.value),children:[l.jsx("option",{value:"All",children:"All Types"}),Object.values(_e).map(B=>l.jsx("option",{value:B,children:B},B))]}),l.jsxs("select",{className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none",value:g,onChange:B=>w(B.target.value),children:[l.jsx("option",{value:"All",children:"All Statuses"}),l.jsx("option",{value:"Locked",children:"Locked"}),l.jsx("option",{value:"Unlocked",children:"Unlocked"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border-t border-gray-100 pt-4",children:[l.jsxs("select",{className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none",value:_,onChange:B=>b(B.target.value),children:[l.jsx("option",{value:"",children:"All Sources (From)"}),l.jsx("optgroup",{label:"Accounts",children:J.map(B=>l.jsx("option",{value:B.id,children:B.name},B.id))}),l.jsx("optgroup",{label:"Candidates",children:te.map(B=>l.jsxs("option",{value:B.id,children:[B.name," (",B.batchId,")"]},B.id))})]}),l.jsxs("select",{className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none",value:j,onChange:B=>C(B.target.value),children:[l.jsx("option",{value:"",children:"All Destinations (To)"}),l.jsx("optgroup",{label:"Accounts",children:J.map(B=>l.jsx("option",{value:B.id,children:B.name},B.id))}),l.jsx("optgroup",{label:"Candidates",children:te.map(B=>l.jsxs("option",{value:B.id,children:[B.name," (",B.batchId,")"]},B.id))})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border-t border-gray-100 pt-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold w-12",children:"From"}),l.jsx("input",{type:"date",className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none placeholder-gray-400",value:E,onChange:B=>N(B.target.value)})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold w-12",children:"To"}),l.jsx("input",{type:"date",className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 w-full focus:ring-1 focus:ring-spr-accent outline-none placeholder-gray-400",value:P,onChange:B=>O(B.target.value)})]})]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-left text-gray-600",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-spr-700 text-xs uppercase tracking-wider text-gray-500 bg-gray-50",children:[l.jsx("th",{className:"py-3 px-4 w-28",children:"Date"}),l.jsx("th",{className:"py-3 px-4",children:"Description"}),l.jsx("th",{className:"py-3 px-4",children:"From (Source)"}),l.jsx("th",{className:"py-3 px-4",children:"To (Dest)"}),l.jsx("th",{className:"py-3 px-4 text-right",children:"Amount"}),l.jsx("th",{className:"py-3 px-4 text-center",children:"Action"})]})}),l.jsx("tbody",{className:"divide-y divide-spr-700",children:oe.length>0?oe.map(B=>{const ee=B.isLocked,Lt=!ee||(r==null?void 0:r.role)==="admin";return l.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${ee?"bg-gray-50/50":""}`,children:[l.jsx("td",{className:"py-3 px-4 text-sm text-gray-500",children:new Date(B.date).toLocaleDateString()}),l.jsxs("td",{className:"py-3 px-4 cursor-pointer group",onClick:()=>y(B),children:[l.jsxs("div",{className:`font-medium flex items-center gap-2 transition-colors ${ee?"text-gray-500":"text-gray-900 hover:text-indigo-600"}`,children:[B.description,ee?l.jsxs("svg",{className:"w-4 h-4 text-amber-600/70",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("title",{children:"Locked Transaction"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})]}):l.jsxs("svg",{className:"w-3 h-3 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("title",{children:"Editable"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})]})]}),l.jsx("div",{className:"text-xs text-gray-500 inline-block px-1 rounded bg-gray-100 border border-gray-200",children:B.type})]}),l.jsx("td",{className:"py-3 px-4 text-sm",children:e(B.fromEntityId,B.fromEntityType)}),l.jsx("td",{className:"py-3 px-4 text-sm",children:e(B.toEntityId,B.toEntityType)}),l.jsx("td",{className:`py-3 px-4 text-right font-mono font-bold ${B.type==="Income"?"text-emerald-600":B.type==="Expense"?"text-red-600":"text-gray-700"}`,children:ue(B.amount)}),l.jsx("td",{className:"py-3 px-4 text-center",children:l.jsxs("div",{className:"flex justify-center gap-2",children:[l.jsx("button",{onClick:()=>y(B),className:"text-gray-400 hover:text-gray-900 p-1 rounded hover:bg-gray-100",title:"View Details",children:l.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),Lt?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>A(`/finance/transactions/edit/${B.id}`),className:"text-blue-500 hover:text-blue-700 p-1 rounded hover:bg-blue-50",title:"Edit",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),l.jsx("button",{onClick:()=>we(B),className:"text-red-500 hover:text-red-700 p-1 rounded hover:bg-red-50",title:"Delete",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}):l.jsx("div",{className:"p-1 px-2",title:"Locked",children:l.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})]})})]},B.id)}):l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"py-8 text-center text-gray-500",children:"No transactions found matching your criteria."})})})]})}),l.jsx(yf,{currentPage:o,totalPages:Y,onPageChange:u})]}),l.jsx(vf,{isOpen:!!k,onClose:()=>y(null),title:"Transaction Details",children:k&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"text-center pb-4 border-b border-spr-700",children:[l.jsx("p",{className:"text-gray-500 text-sm uppercase tracking-wider font-bold",children:"Amount"}),l.jsx("p",{className:`text-4xl font-bold mt-2 ${k.type==="Income"?"text-emerald-600":k.type==="Expense"?"text-red-600":"text-gray-900"}`,children:ue(k.amount)}),l.jsx("div",{className:"mt-2 inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-gray-200 text-gray-700",children:k.type})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1 font-bold",children:"Date"}),l.jsx("p",{className:"text-gray-900 font-medium",children:new Date(k.date).toDateString()})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1 font-bold",children:"Transaction ID"}),l.jsx("p",{className:"text-gray-600 font-mono text-sm truncate",title:k.id,children:k.id})]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 uppercase mb-1 font-bold",children:"Description"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"text-gray-900 text-lg leading-relaxed",children:k.description}),k.isLocked&&l.jsxs("svg",{className:"w-5 h-5 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("title",{children:"Locked"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})]})]})]}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-spr-700 space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"From (Source)"}),l.jsx("p",{className:"text-indigo-600 font-bold",children:e(k.fromEntityId,k.fromEntityType)})]}),l.jsx("div",{className:"text-right",children:l.jsx("span",{className:"text-xs px-2 py-1 rounded bg-white text-gray-500 border border-spr-700 font-medium",children:k.fromEntityType})})]}),l.jsx("div",{className:"flex justify-center",children:l.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"To (Destination)"}),l.jsx("p",{className:"text-indigo-600 font-bold",children:e(k.toEntityId,k.toEntityType)})]}),l.jsx("div",{className:"text-right",children:l.jsx("span",{className:"text-xs px-2 py-1 rounded bg-white text-gray-500 border border-spr-700 font-medium",children:k.toEntityType})})]})]}),k.isLocked&&l.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 border border-amber-200 rounded text-amber-800 text-sm",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"This transaction is locked and cannot be modified by staff."]}),l.jsx("div",{className:"flex justify-end",children:l.jsx(ie,{variant:"secondary",onClick:()=>y(null),children:"Close"})})]})}),l.jsx(mu,{isOpen:!!v,onClose:()=>T(null),onConfirm:Vt,title:"Delete Transaction",message:"Are you sure you want to delete this transaction? This will affect account balances."})]})},zg=()=>{const{addTransaction:t,updateTransaction:e,transactions:n,accounts:r,candidates:s,user:i}=Ge(),o=Wt(),{id:u}=ri(),[c,d]=L.useState(null),[f,m]=L.useState(_e.Income),[g,w]=L.useState(new Date().toISOString().split("T")[0]),[_,b]=L.useState(""),[j,C]=L.useState(""),[E,N]=L.useState(""),[P,O]=L.useState(""),k=I=>{const R=[],S=oe=>{r.filter(oe).forEach(we=>{R.push({id:we.id,name:we.name,type:"Account",category:we.type})})},Y=()=>{[...s].sort((we,Vt)=>we.name.localeCompare(Vt.name)).forEach(we=>{const Vt=we.isActive?"":" (Inactive)";R.push({id:we.id,name:`${we.name} (${we.batchId})${Vt}`,type:"Candidate",category:"Candidate"})})};return I==="from"?f===_e.Income?(Y(),S(oe=>oe.type===Ae.Debtor||oe.type===Ae.Income)):(f===_e.Expense||f===_e.Transfer||f===_e.Refund)&&S(oe=>oe.type===Ae.Bank||oe.type===Ae.Cash):f===_e.Income||f===_e.Transfer?S(oe=>oe.type===Ae.Bank||oe.type===Ae.Cash):f===_e.Expense?S(oe=>oe.type===Ae.Expense||oe.type===Ae.Creditor):f===_e.Refund&&(Y(),S(oe=>oe.type===Ae.Debtor)),R},y=k("from"),v=k("to");L.useEffect(()=>{if(u){const I=n.find(R=>R.id===u);I&&(m(I.type),w(I.date.split("T")[0]),b(I.amount.toString()),C(I.description),N(I.fromEntityId),O(I.toEntityId))}},[u,n]);const T=I=>{var oe;if(I.preventDefault(),d(null),!g){d("Date is required");return}if(!_||parseFloat(_)<=0){d("Valid amount is required");return}if(!E){d("Source (From) is required");return}if(!P){d("Destination (To) is required");return}if(!j||!j.trim()){d("Description is required");return}const R=y.find(we=>we.id===E),S=v.find(we=>we.id===P);if(!R||!S){d("Invalid Source or Destination for selected transaction type.");return}if(E===P&&R.type===S.type){d("Source and Destination cannot be the same.");return}const Y={id:u||vn(),date:new Date(g).toISOString(),type:f,amount:parseFloat(_),description:j,fromEntityId:E,fromEntityType:R.type,toEntityId:P,toEntityType:S.type,isLocked:!1};if(u){if((oe=n.find(we=>we.id===u))!=null&&oe.isLocked&&(i==null?void 0:i.role)!=="admin"){d("Cannot edit locked transaction");return}e(Y)}else t(Y);o("/finance/transactions")},A=I=>{m(I),N(""),O(""),d(null)};return l.jsxs("div",{className:"max-w-2xl mx-auto",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:u?"Edit Transaction":"Record Transaction"}),c&&l.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded shadow-sm animate-fade-in",children:l.jsx("div",{className:"flex",children:l.jsx("div",{className:"ml-3",children:l.jsx("p",{className:"text-sm text-red-700 font-bold",children:c})})})}),l.jsx(me,{children:l.jsxs("form",{onSubmit:T,children:[l.jsx("div",{className:"grid grid-cols-1 gap-4 mb-4",children:l.jsx("div",{className:"flex bg-gray-100 p-1 rounded-lg border border-gray-200",children:Object.values(_e).map(I=>l.jsx("button",{type:"button",onClick:()=>A(I),className:`flex-1 py-2 rounded-md text-sm font-medium transition-colors ${f===I?"bg-spr-accent text-white shadow-sm font-bold":"text-gray-500 hover:text-gray-900 hover:bg-gray-200"}`,children:I},I))})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Date"}),l.jsx(je,{type:"date",value:g,onChange:I=>w(I.target.value),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Amount ()"}),l.jsx(je,{type:"number",step:"0.01",value:_,onChange:I=>b(I.target.value),required:!0})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:f==="Income"?"Received From (Payer)":"Paid From (Source)"}),l.jsxs(jl,{value:E,onChange:I=>N(I.target.value),required:!0,children:[l.jsx("option",{value:"",children:"-- Select Source --"}),y.map(I=>l.jsxs("option",{value:I.id,children:[I.name," ",I.type==="Candidate"?"":`[${I.category}]`]},I.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:f==="Expense"?"Paid To (Expense/Vendor)":"Deposit To (Dest)"}),l.jsxs(jl,{value:P,onChange:I=>O(I.target.value),required:!0,children:[l.jsx("option",{value:"",children:"-- Select Destination --"}),v.map(I=>l.jsxs("option",{value:I.id,children:[I.name," ",I.type==="Candidate"?"":`[${I.category}]`]},I.id))]})]})]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Description / Reference"}),l.jsx(je,{value:j,onChange:I=>C(I.target.value),placeholder:f==="Income"?"e.g., Advance Payment for Java Batch":"e.g., Office Rent Jan 2025",required:!0})]}),l.jsxs("div",{className:"mt-6 flex gap-4 justify-end",children:[l.jsx(ie,{type:"button",variant:"secondary",onClick:()=>o("/finance/transactions"),children:"Cancel"}),l.jsx(ie,{type:"submit",children:"Save Record"})]})]})})]})},vN=()=>{const{accounts:t,getEntityBalance:e,deleteAccount:n}=Ge(),r=Wt(),[s,i]=L.useState(""),[o,u]=L.useState(null),c=(w,_)=>{if(_){alert("Cannot delete system accounts");return}u(w)},d=()=>{o&&(n(o),u(null))},f=w=>w>0?"text-emerald-600":w<0?"text-red-600":"text-gray-400",g=t.filter(w=>w.name.toLowerCase().includes(s.toLowerCase())||w.subType&&w.subType.toLowerCase().includes(s.toLowerCase())).reduce((w,_)=>{const b=_.type;return w[b]||(w[b]=[]),w[b].push(_),w},{});return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Ledger Accounts"}),l.jsx(Pn,{to:"/finance/accounts/new",children:l.jsx(ie,{children:"+ Add Account"})})]}),l.jsx(me,{className:"p-0",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),l.jsx("input",{placeholder:"Search accounts by name or sub-type...",className:"w-full bg-white border-none rounded-lg px-2 py-1 text-gray-900 focus:ring-0 outline-none placeholder-gray-400",value:s,onChange:w=>i(w.target.value)})]})}),Object.keys(g).length>0?Object.entries(g).map(([w,_])=>l.jsx(me,{title:`${w} Accounts`,className:"mb-6",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-left text-gray-600",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-spr-700 text-xs uppercase text-gray-500 bg-gray-50",children:[l.jsx("th",{className:"py-2 px-4",children:"Account Name"}),l.jsx("th",{className:"py-2 px-4",children:"Sub Type"}),l.jsx("th",{className:"py-2 px-4 text-right",children:"Current Balance"}),l.jsx("th",{className:"py-2 px-4 text-center",children:"Action"})]})}),l.jsx("tbody",{className:"divide-y divide-spr-700",children:_.map(b=>{const j=e(b.id,"Account");return l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"py-3 px-4 font-medium text-gray-900",children:b.name}),l.jsx("td",{className:"py-3 px-4 text-sm",children:b.subType||"-"}),l.jsx("td",{className:`py-3 px-4 text-right font-mono font-bold ${f(j)}`,children:ue(j)}),l.jsxs("td",{className:"py-3 px-4 text-center flex justify-center gap-2",children:[l.jsx("button",{onClick:()=>r(`/finance/statement/Account/${b.id}`),className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium",children:"Stmt"}),l.jsx("button",{onClick:()=>r(`/finance/accounts/edit/${b.id}`),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),!b.isSystem&&l.jsx("button",{onClick:()=>c(b.id,b.isSystem),className:"text-red-500 hover:text-red-700 text-sm font-medium",children:"Del"})]})]},b.id)})})]})})},w)):l.jsx("div",{className:"text-center text-gray-500 py-12 bg-white rounded-xl border border-gray-300 border-dashed",children:l.jsxs("p",{children:['No ledger accounts found matching "',s,'".']})}),l.jsx(mu,{isOpen:!!o,onClose:()=>u(null),onConfirm:d,title:"Delete Account",message:"Are you sure you want to delete this account? History will be preserved but the account name will be lost in filters."})]})},$g=()=>{const{addAccount:t,updateAccount:e,accounts:n}=Ge(),r=Wt(),{id:s}=ri(),[i,o]=L.useState({name:"",type:Ae.Expense,subType:"",openingBalance:0,description:""});L.useEffect(()=>{if(s){const c=n.find(d=>d.id===s);c&&o(c)}},[s,n]);const u=c=>{if(c.preventDefault(),!i.name)return alert("Account Name is required");const d={...i,id:s||vn()};s?e(d):t(d),r("/finance/accounts")};return l.jsxs("div",{className:"max-w-2xl mx-auto",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:s?"Edit Account":"Add New Account"}),l.jsx(me,{children:l.jsxs("form",{onSubmit:u,children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(je,{label:"Account Name",value:i.name,onChange:c=>o({...i,name:c.target.value}),placeholder:"e.g. Axis Bank, Rent, Cleaning",required:!0}),l.jsx(jl,{label:"Account Type",value:i.type,onChange:c=>o({...i,type:c.target.value}),children:Object.values(Ae).map(c=>l.jsx("option",{value:c,children:c},c))}),i.type===Ae.Expense&&l.jsx(je,{label:"Expense Sub-Category (Optional)",value:i.subType,onChange:c=>o({...i,subType:c.target.value}),placeholder:"e.g. Utilities, Maintenance"}),l.jsx(je,{label:"Opening Balance ()",type:"number",value:i.openingBalance,onChange:c=>o({...i,openingBalance:parseFloat(c.target.value)||0})})]}),l.jsx("div",{className:"mt-4",children:l.jsx(je,{label:"Description",value:i.description||"",onChange:c=>o({...i,description:c.target.value})})}),l.jsxs("div",{className:"mt-6 flex gap-4 justify-end",children:[l.jsx(ie,{type:"button",variant:"secondary",onClick:()=>r("/finance/accounts"),children:"Cancel"}),l.jsx(ie,{type:"submit",children:"Save Account"})]})]})})]})},xN=()=>{var g,w;const{transactions:t,getEntityName:e,accounts:n,candidates:r}=Ge(),{type:s,id:i}=ri(),o=Wt();if(!s||!i)return l.jsx("div",{children:"Invalid Parameters"});const u=s==="Candidate"?(g=r.find(_=>_.id===i))==null?void 0:g.name:(w=n.find(_=>_.id===i))==null?void 0:w.name;if(!u)return l.jsx("div",{className:"text-gray-900 p-4",children:"Entity not found."});const d=[...t.filter(_=>_.fromEntityId===i&&_.fromEntityType===s||_.toEntityId===i&&_.toEntityType===s).sort((_,b)=>new Date(b.date).getTime()-new Date(_.date).getTime())].reverse();let f=0;if(s==="Account"){const _=n.find(b=>b.id===i);_&&(f=_.openingBalance)}const m=d.map(_=>{let b=0;return _.toEntityId===i&&_.toEntityType===s?b=_.amount:b=-_.amount,f+=b,{..._,impact:b,runningBalance:f}}).reverse();return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx(ie,{variant:"secondary",onClick:()=>o(-1),className:"mb-2 text-xs",children:"Back"}),l.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Statement: ",u]}),l.jsx("p",{className:"text-gray-500 text-sm font-medium",children:s})]}),l.jsx(ie,{onClick:()=>Lh(m,`${u}_Statement.csv`),children:"Download CSV"})]}),l.jsx(me,{children:l.jsxs("table",{className:"w-full text-left text-gray-600",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-spr-700 text-xs uppercase text-gray-500 bg-gray-50",children:[l.jsx("th",{className:"py-3 px-4",children:"Date"}),l.jsx("th",{className:"py-3 px-4",children:"Description"}),l.jsx("th",{className:"py-3 px-4 text-right",children:"Credit (+)"}),l.jsx("th",{className:"py-3 px-4 text-right",children:"Debit (-)"}),l.jsx("th",{className:"py-3 px-4 text-right",children:"Balance"})]})}),l.jsx("tbody",{className:"divide-y divide-spr-700",children:m.length>0?m.map(_=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"py-3 px-4 text-sm font-medium",children:new Date(_.date).toLocaleDateString()}),l.jsxs("td",{className:"py-3 px-4",children:[l.jsx("div",{className:"text-gray-900",children:_.description}),l.jsx("div",{className:"text-xs text-gray-500",children:_.impact>0?`From: ${e(_.fromEntityId,_.fromEntityType)}`:`To: ${e(_.toEntityId,_.toEntityType)}`})]}),l.jsx("td",{className:"py-3 px-4 text-right text-emerald-600 font-medium",children:_.impact>0?ue(_.amount):"-"}),l.jsx("td",{className:"py-3 px-4 text-right text-red-600 font-medium",children:_.impact<0?ue(_.amount):"-"}),l.jsx("td",{className:"py-3 px-4 text-right font-mono font-bold text-gray-900",children:ue(_.runningBalance)})]},_.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"text-center py-8 text-gray-500",children:"No transactions recorded for this entity."})})})]})})]})},_N=()=>{const{transactions:t,accounts:e,candidates:n,getEntityBalance:r}=Ge(),[s,i]=L.useState("BS"),o=t.filter(y=>y.type===_e.Income),u=t.filter(y=>y.type===_e.Expense),c=o.reduce((y,v)=>y+v.amount,0),d=u.reduce((y,v)=>y+v.amount,0),f=c-d,m=u.reduce((y,v)=>{let T="General Expense";if(v.toEntityType==="Account"){const A=e.find(I=>I.id===v.toEntityId);A&&(T=A.subType||A.name)}return y[T]=(y[T]||0)+v.amount,y},{}),g=e.filter(y=>y.type===Ae.Cash),w=e.filter(y=>y.type===Ae.Bank),_=e.filter(y=>y.type===Ae.Debtor),b=g.reduce((y,v)=>y+r(v.id,"Account"),0),j=w.reduce((y,v)=>y+r(v.id,"Account"),0),C=_.reduce((y,v)=>y+r(v.id,"Account"),0),E=n.reduce((y,v)=>{if(!v.isActive&&v.status==="Discontinued")return y;const T=t.filter(S=>S.fromEntityId===v.id&&S.type===_e.Income).reduce((S,Y)=>S+Y.amount,0),A=t.filter(S=>S.toEntityId===v.id&&S.type===_e.Refund).reduce((S,Y)=>S+Y.amount,0),I=T-A,R=v.agreedAmount-I;return y+(R>0?R:0)},0),N=b+j+C+E,O=e.filter(y=>y.type===Ae.Creditor).reduce((y,v)=>{const T=r(v.id,"Account");return y+(T<0?Math.abs(T):0)},0),k=N-O;return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center print:hidden",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Financial Statements"}),l.jsx(ie,{onClick:()=>window.print(),children:"Print / Save PDF"})]}),l.jsxs("div",{className:"print:hidden flex space-x-4 border-b border-gray-200",children:[l.jsx("button",{className:`py-2 px-4 font-medium border-b-2 transition-colors ${s==="BS"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>i("BS"),children:"Balance Sheet"}),l.jsx("button",{className:`py-2 px-4 font-medium border-b-2 transition-colors ${s==="PL"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>i("PL"),children:"Profit & Loss"})]}),l.jsxs("div",{className:"bg-white p-8 min-h-screen shadow-sm border border-gray-200 print:shadow-none print:border-none print:p-0",children:[l.jsxs("div",{className:"text-center border-b-2 border-gray-800 pb-6 mb-8",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900 uppercase tracking-widest",children:"SPR Techforge Pvt Ltd"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Consultancy & Training Services"}),l.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Generated on: ",new Date().toLocaleDateString()]})]}),(s==="BS"||typeof window<"u")&&l.jsxs("div",{className:s==="BS"?"block":"hidden print:block print:break-after-page",children:[l.jsx("h3",{className:"text-xl font-bold text-center underline mb-6",children:"BALANCE SHEET"}),l.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1 mb-2",children:[l.jsx("span",{className:"font-bold text-emerald-800",children:"ASSETS"}),l.jsx("span",{className:"font-bold text-emerald-800",children:"Amount ()"})]}),l.jsxs("div",{className:"space-y-2 text-sm",children:[l.jsx("div",{className:"flex justify-between font-semibold text-gray-700",children:l.jsx("span",{children:"Current Assets"})}),l.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[l.jsx("span",{children:"Cash on Hand"}),l.jsx("span",{children:ue(b)})]}),l.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[l.jsx("span",{children:"Bank Accounts"}),l.jsx("span",{children:ue(j)})]}),l.jsx("div",{className:"flex justify-between font-semibold text-gray-700 mt-4",children:l.jsx("span",{children:"Receivables"})}),l.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[l.jsx("span",{children:"Candidate Fees Pending"}),l.jsx("span",{children:ue(E)})]}),l.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[l.jsx("span",{children:"Sundry Debtors"}),l.jsx("span",{children:ue(C)})]})]}),l.jsxs("div",{className:"flex justify-between border-t border-gray-800 pt-2 mt-8 font-bold text-gray-900 text-lg",children:[l.jsx("span",{children:"TOTAL ASSETS"}),l.jsx("span",{children:ue(N)})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1 mb-2",children:[l.jsx("span",{className:"font-bold text-red-800",children:"LIABILITIES"}),l.jsx("span",{className:"font-bold text-red-800",children:"Amount ()"})]}),l.jsxs("div",{className:"space-y-2 text-sm",children:[l.jsx("div",{className:"flex justify-between font-semibold text-gray-700",children:l.jsx("span",{children:"Current Liabilities"})}),l.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[l.jsx("span",{children:"Sundry Creditors"}),l.jsx("span",{children:ue(O)})]})]}),l.jsxs("div",{className:"flex justify-between border-t border-gray-300 pt-2 mt-8 font-bold text-gray-700",children:[l.jsx("span",{children:"Total Liabilities"}),l.jsx("span",{children:ue(O)})]}),l.jsxs("div",{className:"mt-8",children:[l.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1 mb-2",children:[l.jsx("span",{className:"font-bold text-indigo-800",children:"EQUITY"}),l.jsx("span",{className:"font-bold text-indigo-800",children:"Amount ()"})]}),l.jsx("div",{className:"space-y-2 text-sm",children:l.jsxs("div",{className:"flex justify-between pl-4 text-gray-600",children:[l.jsx("span",{children:"Owners Capital / Net Value"}),l.jsx("span",{children:ue(k)})]})})]}),l.jsxs("div",{className:"flex justify-between border-t border-gray-800 pt-2 mt-8 font-bold text-gray-900 text-lg",children:[l.jsx("span",{children:"TOTAL LIABILITIES & EQUITY"}),l.jsx("span",{children:ue(O+k)})]})]})]})]}),(s==="PL"||typeof window<"u")&&l.jsxs("div",{className:`${s==="PL"?"block":"hidden print:block"} print:mt-8`,children:[l.jsx("h3",{className:"text-xl font-bold text-center underline mb-6",children:"PROFIT & LOSS ACCOUNT"}),l.jsx("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:l.jsxs("table",{className:"w-full text-left text-sm",children:[l.jsx("thead",{className:"bg-gray-100 text-gray-900 font-bold",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-3 border-r border-gray-300 w-2/3",children:"Particulars"}),l.jsx("th",{className:"p-3 text-right",children:"Amount ()"})]})}),l.jsxs("tbody",{className:"divide-y divide-gray-200",children:[l.jsxs("tr",{className:"bg-emerald-50/50 font-bold text-emerald-800",children:[l.jsx("td",{className:"p-3 border-r border-gray-200",children:"INCOME (Revenue)"}),l.jsx("td",{className:"p-3 text-right"})]}),l.jsxs("tr",{children:[l.jsx("td",{className:"p-3 pl-8 border-r border-gray-200 text-gray-700",children:"Consultancy Fees Received"}),l.jsx("td",{className:"p-3 text-right text-gray-900",children:ue(c)})]}),l.jsxs("tr",{className:"font-bold bg-gray-50",children:[l.jsx("td",{className:"p-3 border-r border-gray-200 text-right",children:"Total Income (A)"}),l.jsx("td",{className:"p-3 text-right text-emerald-700",children:ue(c)})]}),l.jsxs("tr",{className:"bg-red-50/50 font-bold text-red-800",children:[l.jsx("td",{className:"p-3 border-r border-gray-200",children:"EXPENSES"}),l.jsx("td",{className:"p-3 text-right"})]}),Object.entries(m).map(([y,v])=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-3 pl-8 border-r border-gray-200 text-gray-700",children:y}),l.jsx("td",{className:"p-3 text-right text-gray-900",children:ue(v)})]},y)),l.jsxs("tr",{className:"font-bold bg-gray-50",children:[l.jsx("td",{className:"p-3 border-r border-gray-200 text-right",children:"Total Expenses (B)"}),l.jsx("td",{className:"p-3 text-right text-red-700",children:ue(d)})]}),l.jsxs("tr",{className:`text-lg font-bold ${f>=0?"bg-emerald-100 text-emerald-900":"bg-red-100 text-red-900"}`,children:[l.jsx("td",{className:"p-4 border-r border-gray-300 text-right uppercase",children:f>=0?"Net Profit (A - B)":"Net Loss (A - B)"}),l.jsx("td",{className:"p-4 text-right",children:ue(f)})]})]})]})})]}),l.jsx("div",{className:"mt-12 text-center text-xs text-gray-400",children:l.jsx("p",{children:"This is a computer-generated statement."})})]})]})},wN=()=>{const{exportData:t,importDatabase:e,isCloudEnabled:n}=Ge(),r=L.useRef(null),[s,i]=L.useState("Data"),o=u=>{var f;const c=(f=u.target.files)==null?void 0:f[0];if(!c)return;const d=new FileReader;d.onload=async m=>{var g;try{const w=JSON.parse((g=m.target)==null?void 0:g.result);let _="You are about to restore the database from a backup file. This will OVERWRITE current local data.";n&&(_+=" Since Cloud is enabled, this will also upload the backup data to Firebase, potentially overwriting or adding to existing records."),window.confirm(_+`

Are you sure you want to proceed?`)&&await e(w)}catch{alert("Invalid JSON File. Please upload a valid backup file.")}r.current&&(r.current.value="")},d.readAsText(c)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Data & Reports"}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>i("Data"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${s==="Data"?"bg-spr-accent text-white":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"Backup & Restore"}),l.jsx("button",{onClick:()=>i("Info"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${s==="Info"?"bg-spr-accent text-white":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"Database Info"})]})]}),s==="Data"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-fade-in",children:[l.jsx(me,{title:"Backup (Export)",className:"h-full",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-gray-600",children:"Download a complete copy of the system database. This JSON file contains all Candidates, Accounts, Transactions, Users, and Logs."}),l.jsx("div",{className:"pt-4",children:l.jsx(ie,{onClick:t,children:"Download Full Database"})})]})}),l.jsx(me,{title:"Restore (Import)",className:"h-full",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-gray-600",children:"Upload a previously exported JSON file to restore the system state."}),l.jsxs("div",{className:"bg-amber-50 border border-amber-200 p-3 rounded text-sm text-amber-800",children:[l.jsx("strong",{children:"Warning:"})," This action updates your current database with the data from the file."]}),l.jsxs("div",{className:"pt-4",children:[l.jsx("input",{type:"file",accept:".json",ref:r,style:{display:"none"},onChange:o}),l.jsx(ie,{variant:"secondary",onClick:()=>{var u;return(u=r.current)==null?void 0:u.click()},children:"Upload & Restore Backup"})]})]})})]}),s==="Info"&&l.jsx("div",{className:"animate-fade-in",children:l.jsx(me,{title:"Database Structure",children:l.jsxs("div",{className:"text-gray-600 space-y-4",children:[l.jsx("p",{children:"The application currently uses a NoSQL structure (JSON-based)."}),n?l.jsxs("div",{className:"bg-orange-50 border border-orange-200 p-4 rounded text-orange-900",children:[l.jsx("strong",{children:"Cloud Provider:"})," Google Firebase (Firestore)",l.jsx("br",{}),l.jsx("strong",{children:"Status:"})," Connected",l.jsx("br",{}),l.jsx("p",{className:"mt-2 text-sm",children:"Data is synced in real-time. Collections are created automatically (Schemaless)."})]}):l.jsxs("div",{className:"bg-gray-100 border border-gray-300 p-4 rounded",children:[l.jsx("strong",{children:"Storage:"})," Local Browser Storage",l.jsx("br",{}),l.jsx("strong",{children:"Status:"})," Offline Mode"]})]})})}),l.jsx(me,{title:"Analytics",children:l.jsx("div",{className:"h-32 flex items-center justify-center text-gray-400 font-medium bg-gray-50 rounded border border-gray-200 border-dashed",children:"Advanced Graphical Reports Module (Coming Soon)"})})]})},EN=()=>{const{users:t,deleteUser:e,user:n,passwordResetRequests:r,resolvePasswordResetRequest:s}=Ge(),[i,o]=L.useState(null),u=Wt(),c=g=>{if(g===(n==null?void 0:n.id)){alert("You cannot delete yourself.");return}o(g)},d=()=>{i&&(e(i),o(null))},f=(g,w)=>{s(g),w?u(`/admin/users/edit/${w}`):alert("User not found. The request was dismissed.")},m=(n==null?void 0:n.role)==="admin";return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),l.jsx(Pn,{to:"/admin/users/new",children:l.jsx(ie,{children:"+ Add User"})})]}),m&&r&&r.length>0&&l.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6 animate-fade-in",children:[l.jsxs("h3",{className:"text-lg font-bold text-amber-800 mb-3 flex items-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),"Pending Password Reset Requests (",r.length,")"]}),l.jsx("div",{className:"grid grid-cols-1 gap-4",children:r.map(g=>{const w=t.find(_=>_.username===g.username);return l.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg border border-amber-200 shadow-sm",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-gray-900",children:g.username}),l.jsxs("p",{className:"text-xs text-gray-500",children:["Requested: ",new Date(g.requestDate).toLocaleString()]}),!w&&l.jsx("span",{className:"text-xs text-red-500 font-bold",children:"User not found in system"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(ie,{variant:"secondary",onClick:()=>s(g.id),className:"text-xs px-3 py-1",children:"Dismiss"}),l.jsx(ie,{onClick:()=>f(g.id,(w==null?void 0:w.id)||""),className:"text-xs px-3 py-1",disabled:!w,children:"Reset Password"})]})]},g.id)})})]}),l.jsx(me,{children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-left text-gray-600",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-spr-700 text-xs uppercase text-gray-500 bg-gray-50",children:[l.jsx("th",{className:"py-3 px-4",children:"Full Name"}),l.jsx("th",{className:"py-3 px-4",children:"Login ID"}),m&&l.jsx("th",{className:"py-3 px-4",children:"Password"}),l.jsx("th",{className:"py-3 px-4",children:"Role"}),l.jsx("th",{className:"py-3 px-4",children:"Access Modules"}),l.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-spr-700",children:t.map(g=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsxs("td",{className:"py-3 px-4 font-medium text-gray-900",children:[g.name||g.username,g.id===(n==null?void 0:n.id)&&l.jsx("span",{className:"ml-2 text-xs bg-indigo-100 text-indigo-700 px-1 rounded border border-indigo-200",children:"You"})]}),l.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 font-mono",children:g.username}),m&&l.jsxs("td",{className:"py-3 px-4 text-sm font-mono text-amber-600",children:[g.password,g.isPasswordChanged===!1&&l.jsx("span",{className:"ml-2 text-[10px] text-red-500 font-bold uppercase",children:"(Default)"})]}),l.jsx("td",{className:"py-3 px-4 capitalize",children:g.role}),l.jsx("td",{className:"py-3 px-4",children:l.jsx("div",{className:"flex gap-1 flex-wrap",children:g.role==="admin"?l.jsx("span",{className:"text-xs bg-emerald-100 text-emerald-700 px-2 py-1 rounded border border-emerald-200 font-medium",children:"All Access"}):g.modules.length>0?g.modules.map(w=>l.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded border border-gray-200 capitalize",children:w},w)):l.jsx("span",{className:"text-xs text-gray-400",children:"No Access"})})}),l.jsx("td",{className:"py-3 px-4 text-center",children:l.jsxs("div",{className:"flex justify-center gap-2",children:[l.jsx(Pn,{to:`/admin/users/edit/${g.id}`,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),g.id!==(n==null?void 0:n.id)&&l.jsx("button",{onClick:()=>c(g.id),className:"text-red-500 hover:text-red-700 text-sm font-medium",children:"Del"})]})})]},g.id))})]})})}),l.jsx(mu,{isOpen:!!i,onClose:()=>o(null),onConfirm:d,title:"Delete User",message:"Are you sure you want to delete this user? This action cannot be undone."})]})},qg=()=>{var g,w,_;const{users:t,addUser:e,updateUser:n}=Ge(),r=Wt(),{id:s}=ri(),[i,o]=L.useState(null),[u,c]=L.useState({name:"",username:"",password:"",role:"staff",modules:["candidates"]});L.useEffect(()=>{if(s){const b=t.find(j=>j.id===s);b&&c(b)}},[s,t]);const d=b=>{if(s)c({...u,name:b});else{const j=b.replace(/\s+/g,"").toLowerCase()+"@sprtechforge.com";c({...u,name:b,username:j,password:b})}},f=b=>{if(b.preventDefault(),o(null),!u.name||!u.name.trim()){o("Full Name is required");return}if(!u.username||!u.username.trim()){o("Login ID is required");return}if(t.some(E=>{var N;return E.username.toLowerCase()===((N=u.username)==null?void 0:N.toLowerCase().trim())&&E.id!==s})){o("A user with this Login ID already exists. Please choose another.");return}const C={id:s||vn(),name:u.name,username:u.username.trim()||"",password:u.password||u.name||"password",role:u.role,modules:u.role==="admin"?["candidates","finance","users"]:u.modules||[],authProvider:"local",isPasswordChanged:s?u.isPasswordChanged:!1};s?n(C):e(C),r("/admin/users")},m=b=>{var j;(j=u.modules)!=null&&j.includes(b)?c({...u,modules:u.modules.filter(C=>C!==b)}):c({...u,modules:[...u.modules||[],b]})};return l.jsxs("div",{className:"max-w-2xl mx-auto",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:s?"Edit User":"Add New User"}),i&&l.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded shadow-sm animate-fade-in",children:l.jsx("div",{className:"flex",children:l.jsx("div",{className:"ml-3",children:l.jsx("p",{className:"text-sm text-red-700 font-bold",children:i})})})}),l.jsx(me,{children:l.jsxs("form",{onSubmit:f,children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Full Name"}),l.jsx(je,{value:u.name,onChange:b=>d(b.target.value),placeholder:"e.g. Ravi Kumar",required:!0})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4 p-4 bg-gray-50 rounded-lg border border-spr-700",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1 required-label",children:"Auto-Generated Login ID"}),l.jsx(je,{value:u.username,onChange:b=>c({...u,username:b.target.value}),required:!0,className:"font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1 required-label",children:"Default Password"}),l.jsx("div",{className:"text-gray-900 font-mono mt-2",children:s?"********":u.password||"-"}),!s&&l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Same as Full Name"})]}),!s&&l.jsxs("div",{className:"col-span-2 mt-2 text-xs text-amber-600 font-medium flex items-center gap-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"User will be forced to change this password on first login."]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 required-label",children:"Role"}),l.jsxs(jl,{value:u.role,onChange:b=>c({...u,role:b.target.value}),required:!0,children:[l.jsx("option",{value:"staff",children:"Staff"}),l.jsx("option",{value:"admin",children:"Admin"})]})]}),u.role==="staff"&&l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Access Modules"}),l.jsxs("div",{className:"flex flex-col gap-2 bg-gray-50 p-3 rounded border border-spr-700",children:[l.jsxs("label",{className:"flex items-center gap-2 text-gray-700 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:(g=u.modules)==null?void 0:g.includes("candidates"),onChange:()=>m("candidates")}),"Training (Candidates)"]}),l.jsxs("label",{className:"flex items-center gap-2 text-gray-700 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:(w=u.modules)==null?void 0:w.includes("finance"),onChange:()=>m("finance")}),"Finance (Transactions, Accounts, Reports)"]}),l.jsxs("label",{className:"flex items-center gap-2 text-gray-700 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:(_=u.modules)==null?void 0:_.includes("users"),onChange:()=>m("users")}),"User Management"]})]})]}),l.jsxs("div",{className:"mt-6 flex gap-4 justify-end",children:[l.jsx(ie,{type:"button",variant:"secondary",onClick:()=>r("/admin/users"),children:"Cancel"}),l.jsx(ie,{type:"submit",children:"Save User"})]})]})})]})},TN=()=>{const{activityLogs:t,exportData:e}=Ge(),[n,r]=L.useState(1),[s,i]=L.useState(""),[o,u]=L.useState("All"),[c,d]=L.useState("All"),f=15,m=Array.from(new Set(t.map(j=>j.entityType))),g=t.filter(j=>{const C=j.description.toLowerCase().includes(s.toLowerCase())||j.actorName.toLowerCase().includes(s.toLowerCase()),E=o==="All"||j.action===o,N=c==="All"||j.entityType===c;return C&&E&&N}),w=Math.ceil(g.length/f),_=g.slice((n-1)*f,n*f),b=j=>{switch(j){case"CREATE":return"text-emerald-600 bg-emerald-100";case"UPDATE":return"text-blue-600 bg-blue-100";case"DELETE":return"text-red-600 bg-red-100";case"LOGIN":return"text-gray-600 bg-gray-100";case"RESTORE":return"text-amber-600 bg-amber-100";default:return"text-gray-600 bg-gray-100"}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"System Audit Logs"}),l.jsx("p",{className:"text-gray-500",children:"Track all changes made within the application."})]}),l.jsx(ie,{variant:"secondary",onClick:e,children:"Export Full Logs"})]}),l.jsxs(me,{children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[l.jsx("input",{placeholder:"Search description or user...",className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none",value:s,onChange:j=>i(j.target.value)}),l.jsxs("select",{className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none",value:o,onChange:j=>u(j.target.value),children:[l.jsx("option",{value:"All",children:"All Actions"}),l.jsx("option",{value:"CREATE",children:"Create"}),l.jsx("option",{value:"UPDATE",children:"Update"}),l.jsx("option",{value:"DELETE",children:"Delete"}),l.jsx("option",{value:"LOGIN",children:"Login"}),l.jsx("option",{value:"RESTORE",children:"Restore"})]}),l.jsxs("select",{className:"bg-white border border-spr-700 rounded-lg px-4 py-2 text-gray-900 focus:ring-1 focus:ring-spr-accent outline-none",value:c,onChange:j=>d(j.target.value),children:[l.jsx("option",{value:"All",children:"All Entities"}),m.map(j=>l.jsx("option",{value:j,children:j},j))]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-left text-gray-600",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-spr-700 text-xs uppercase text-gray-500 bg-gray-50",children:[l.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),l.jsx("th",{className:"py-3 px-4",children:"User (Actor)"}),l.jsx("th",{className:"py-3 px-4",children:"Action"}),l.jsx("th",{className:"py-3 px-4",children:"Entity"}),l.jsx("th",{className:"py-3 px-4",children:"Description"})]})}),l.jsx("tbody",{className:"divide-y divide-spr-700",children:_.length>0?_.map(j=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"py-3 px-4 text-sm font-mono whitespace-nowrap",children:new Date(j.timestamp).toLocaleString()}),l.jsx("td",{className:"py-3 px-4 text-sm font-medium text-gray-900",children:j.actorName}),l.jsx("td",{className:"py-3 px-4",children:l.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${b(j.action)}`,children:j.action})}),l.jsxs("td",{className:"py-3 px-4 text-sm",children:[j.entityType,j.entityId&&l.jsx("span",{className:"block text-xs text-gray-400 font-mono",children:j.entityId})]}),l.jsx("td",{className:"py-3 px-4 text-sm text-gray-700",children:j.description})]},j.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"py-8 text-center text-gray-500",children:"No logs found."})})})]})}),l.jsx(yf,{currentPage:n,totalPages:w,onPageChange:r})]})]})},SN=()=>{const t=Ge(),[e,n]=L.useState([]),[r,s]=L.useState(!1),[i,o]=L.useState({total:0,passed:0,failed:0,time:0}),u=(d,f,m,g=0)=>{n(w=>[...w,{id:Date.now()+Math.random(),name:d,status:f,message:m,duration:g}])},c=async()=>{s(!0),n([]),o({total:0,passed:0,failed:0,time:0});const d=performance.now();let f=0,m=0,g=0;const w=async(P,O)=>{g++;const k=performance.now();try{await O();const y=performance.now()-k;u(P,"PASS","Test execution successful",y),f++}catch(y){const v=performance.now()-k;u(P,"FAIL",y.message||"Unknown error",v),m++}};await w("Unit: Currency Formatting",()=>{const P=ue(1500.5);if(!P.includes("1,500.50")&&!P.includes("1,500.5"))throw new Error(`Formatting failed: ${P}`)}),await w("Unit: ID Generation",()=>{const P=vn(),O=vn();if(P===O)throw new Error("ID collision detected");if(P.length<5)throw new Error("ID too short")}),await w("Unit: Balance Calculation Logic",()=>{const P=[{id:"t1",amount:1e3,type:_e.Income,fromEntityId:"C1",fromEntityType:"Candidate",toEntityId:"A1",toEntityType:"Account",date:"",description:"",isLocked:!1},{id:"t2",amount:200,type:_e.Expense,fromEntityId:"A1",fromEntityType:"Account",toEntityId:"V1",toEntityType:"Account",date:"",description:"",isLocked:!1}],O=Ui("A1","Account",P,0);if(O!==800)throw new Error(`Account Balance calc failed. Expected 800, got ${O}`);const k=Ui("C1","Candidate",P,0);if(k!==-1e3)throw new Error(`Candidate Balance calc failed. Expected -1000, got ${k}`)});const _=Date.now(),b=`test-user-${_}`,j=`test-cand-${_}`,C=`test-acc-${_}`;await w("API: User Creation",()=>{t.addUser({id:b,name:`User ${_}`,username:`u${_}`,password:"123",role:"staff",modules:[]})}),await w("API: User Update",()=>{t.updateUser({id:b,name:`User ${_} Updated`,username:`u${_}_updated`,password:"123",role:"staff",modules:["finance"]})}),await w("API: Candidate Creation",()=>{t.addCandidate({id:j,name:"API Tester",batchId:"API-01",email:"test@api.com",phone:"9999999999",agreedAmount:1e4,status:at.Training,isActive:!0,joinedDate:new Date().toISOString()})}),await w("API: Candidate Update",()=>{t.updateCandidate({id:j,name:"API Tester (Updated)",batchId:"API-01",email:"test@api.com",phone:"9999999999",agreedAmount:15e3,status:at.ReadyForInterview,isActive:!0,joinedDate:new Date().toISOString()})}),await w("API: Account Creation",()=>{t.addAccount({id:C,name:"API Test Bank",type:Ae.Bank,openingBalance:5e3})});const E=`test-tx-${_}`;await w("API: Transaction Record",()=>{t.addTransaction({id:E,date:new Date().toISOString(),type:_e.Income,amount:2e3,fromEntityId:j,fromEntityType:"Candidate",toEntityId:C,toEntityType:"Account",description:"API Test Fee",isLocked:!1})}),await w("E2E: Payment Logic Verification",()=>{const P=[{id:"x",date:"",type:_e.Income,amount:2e3,fromEntityId:j,fromEntityType:"Candidate",toEntityId:C,toEntityType:"Account",description:"",isLocked:!1}],O=Ui(C,"Account",P,5e3);if(O!==7e3)throw new Error(`E2E Balance Check Failed: Expected 7000, Got ${O}`);const v=15e3-Math.abs(Ui(j,"Candidate",P,0));if(v!==13e3)throw new Error(`E2E Due Check Failed: Expected 13000, Got ${v}`)}),await w("Negative: Delete System Account",()=>{try{throw t.deleteAccount("cash-01"),new Error("Failed to block system account deletion")}catch(P){if(!P.message.includes("Cannot delete a System Account"))throw P}}),await w("Negative: Delete Last User",()=>{if(t.users.length===1)try{throw t.deleteUser(t.users[0].id),new Error("Failed to block last user deletion")}catch(P){if(!P.message.includes("Cannot delete the last user"))throw P}}),await w("Cleanup: Remove Test Data",()=>{t.deleteTransaction(E),t.deleteCandidate(j),t.deleteAccount(C),t.deleteUser(b)});const N=performance.now()-d;o({total:g,passed:f,failed:m,time:N}),s(!1)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"System Diagnostics & API Testing"}),l.jsx("p",{className:"text-gray-600",children:"Automated testing suite for internal logic, integration flows, and negative scenarios."})]}),l.jsx(ie,{onClick:c,disabled:r,children:r?"Running Tests...":"Run Full Test Suite"})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs(me,{className:"text-center py-4",children:[l.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"Total Tests"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.total})]}),l.jsxs(me,{className:"text-center py-4 border-emerald-200 bg-emerald-50",children:[l.jsx("p",{className:"text-xs text-emerald-700 uppercase font-bold",children:"Passed"}),l.jsx("p",{className:"text-2xl font-bold text-emerald-700",children:i.passed})]}),l.jsxs(me,{className:"text-center py-4 border-red-200 bg-red-50",children:[l.jsx("p",{className:"text-xs text-red-700 uppercase font-bold",children:"Failed"}),l.jsx("p",{className:"text-2xl font-bold text-red-700",children:i.failed})]}),l.jsxs(me,{className:"text-center py-4",children:[l.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold",children:"Total Duration"}),l.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[i.time.toFixed(2)," ms"]})]})]}),l.jsx(me,{title:"Execution Log",children:l.jsxs("div",{className:"h-96 overflow-y-auto space-y-2 font-mono text-sm bg-gray-50 p-4 rounded border border-spr-700",children:[e.length===0&&l.jsx("p",{className:"text-gray-400 text-center italic",children:"Ready to start diagnostics..."}),e.map(d=>l.jsxs("div",{className:`flex items-start gap-3 p-2 rounded border ${d.status==="PASS"?"bg-white border-emerald-200":d.status==="FAIL"?"bg-red-50 border-red-200":"bg-gray-100 border-gray-200"}`,children:[l.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold w-16 text-center shrink-0 ${d.status==="PASS"?"bg-emerald-100 text-emerald-700":d.status==="FAIL"?"bg-red-100 text-red-700":"bg-gray-200 text-gray-600"}`,children:d.status}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"font-bold text-gray-900",children:d.name}),l.jsx("p",{className:"text-gray-600",children:d.message})]}),l.jsxs("span",{className:"text-gray-400 text-xs shrink-0",children:[d.duration.toFixed(2),"ms"]})]},d.id))]})}),l.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200 text-sm text-blue-800",children:[l.jsx("strong",{children:"Note on Testing:"})," This runner executes commands against the live Application Context. Integration tests create temporary entities prefixed with ",l.jsx("code",{children:"TEST_"})," and attempt to clean them up immediately. Negative testing purposefully attempts invalid operations to ensure the API blocks them correctly."]})]})},CN=()=>{const{isCloudEnabled:t,syncLocalToCloud:e,cloudError:n}=Ge(),[r,s]=L.useState(""),[i,o]=L.useState("unknown"),[u,c]=L.useState(""),[d,f]=L.useState(!1),[m,g]=L.useState(!1);L.useEffect(()=>{const b=ye.getConfig();b&&(s(JSON.stringify(b,null,2)),o("connected")),n&&(o("error"),c(n),n.includes("Permission")&&g(!0))},[n]);const w=async()=>{var j;if(c(""),o("unknown"),!r.trim()){c("Please paste the Firebase Configuration JSON."),o("error");return}f(!0);const b=await ye.testConfig(r);if(f(!1),b.success)try{const C=JSON.parse(r);ye.saveConfig(C),o("connected"),c("Configuration Saved. App will reload.")}catch{o("error"),c("Invalid JSON syntax.")}else o("error"),c(b.error||"Connection verification failed."),(j=b.error)!=null&&j.includes("permission")&&g(!0)},_=()=>{window.confirm("Are you sure? This will disconnect the app from Firebase and revert to Local Storage.")&&ye.clearConfig()};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Cloud Setup"}),l.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M3.89 15.67L6.47 4.08C6.56 3.66 7.11 3.55 7.36 3.89L10.94 8.89L3.89 15.67Z",fill:"#FFC107"}),l.jsx("path",{d:"M15.56 8.89L19.14 3.89C19.39 3.55 19.94 3.66 20.03 4.08L22.61 15.67H3.89L15.56 8.89Z",fill:"#FFC107"}),l.jsx("path",{d:"M13.25 2.3L11.81 0.32C11.56 -0.02 11.09 -0.02 10.84 0.32L9.4 2.3C9.23 2.54 9.29 2.86 9.53 3.02L10.94 3.96L12.35 3.02C12.59 2.86 12.65 2.54 12.48 2.3H13.25Z",fill:"#FFC107"}),l.jsx("path",{d:"M3.89 15.67H22.61L14.62 20.23C13.98 20.59 13.2 20.67 12.5 20.45L11.73 20.21L3.89 15.67Z",fill:"#FFA000"})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[i==="connected"&&l.jsxs("span",{className:"bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm font-bold border border-orange-200 flex items-center gap-1",children:[l.jsx("span",{className:"w-2 h-2 bg-orange-600 rounded-full animate-pulse"})," Firebase Connected"]}),i==="error"&&l.jsx("span",{className:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-bold border border-red-200",children:"Connection Failed"})]})]}),m&&l.jsxs("div",{className:"bg-amber-50 border-l-4 border-amber-500 p-4 rounded shadow-sm animate-fade-in",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-amber-900 font-bold text-lg mb-2",children:"Missing Permissions?"}),l.jsxs("p",{className:"text-amber-800 text-sm mb-2",children:["It looks like your Firestore Security Rules are blocking the application. Since this app manages users internally, you need to enable ",l.jsx("strong",{children:"Test Mode"})," or allow public read/write in the Firebase Console."]}),l.jsx("p",{className:"text-amber-800 text-sm font-bold mb-2",children:"Go to Firebase Console > Firestore Database > Rules and paste this:"})]}),l.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),l.jsxs("div",{className:"bg-gray-900 p-3 rounded text-gray-100 font-mono text-xs overflow-x-auto relative group",children:[l.jsx("pre",{children:`rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true;
    }
  }
}`}),l.jsx("button",{onClick:()=>navigator.clipboard.writeText(`rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true;
    }
  }
}`),className:"absolute top-2 right-2 bg-white text-gray-900 px-2 py-1 rounded text-xs font-bold opacity-0 group-hover:opacity-100 transition-opacity",children:"Copy"})]})]}),l.jsx(me,{title:"Firebase Configuration",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("p",{className:"text-gray-600",children:["Connect this application to ",l.jsx("strong",{children:"Google Firebase (Firestore)"})," for real-time data synchronization and cloud backup."]}),l.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded text-sm text-blue-900",children:[l.jsx("strong",{children:"How to get configuration:"}),l.jsxs("ol",{className:"list-decimal list-inside mt-2 space-y-1",children:[l.jsxs("li",{children:["Go to ",l.jsx("a",{href:"https://console.firebase.google.com/",target:"_blank",className:"underline font-bold",children:"Firebase Console"}),"."]}),l.jsx("li",{children:"Open your Project Settings (Gear Icon)."}),l.jsx("li",{children:'Scroll down to "Your apps" and select the Web App.'}),l.jsxs("li",{children:["Copy the ",l.jsx("code",{children:"firebaseConfig"})," object (the part inside the curly braces)."]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Config Object (JSON)"}),l.jsx("textarea",{className:"w-full bg-gray-900 text-green-400 font-mono text-xs border border-spr-700 rounded-lg px-4 py-4 focus:ring-1 focus:ring-spr-accent outline-none h-64",value:r,onChange:b=>s(b.target.value),placeholder:`{
  "apiKey": "AIza...",
  "authDomain": "project-id.firebaseapp.com",
  "projectId": "project-id",
  "storageBucket": "project-id.appspot.com",
  "messagingSenderId": "...",
  "appId": "..."
}`})]}),i==="error"&&l.jsxs("div",{className:"bg-red-50 border border-red-200 p-3 rounded mt-2 text-red-700 text-sm",children:[l.jsx("strong",{children:"Error:"})," ",u]}),l.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[l.jsx(ie,{variant:"secondary",onClick:()=>g(!m),children:m?"Hide Rules Help":"Troubleshoot Permissions"}),t&&l.jsx(ie,{variant:"danger",onClick:_,children:"Disconnect"}),l.jsx(ie,{onClick:w,disabled:d,children:d?"Verifying...":t?"Update & Reconnect":"Connect & Save"})]})]})}),t&&i==="connected"&&!n&&l.jsx(me,{title:"Data Synchronization",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-gray-900",children:"Upload Local Data"}),l.jsxs("p",{className:"text-sm text-gray-500",children:["Push your current local browser data to Firestore.",l.jsx("br",{}),l.jsx("span",{className:"text-xs text-orange-600 font-bold",children:"Note: Firestore creates collections automatically. No SQL setup required."})]})]}),l.jsx(ie,{variant:"secondary",onClick:e,children:"Sync Local -> Cloud"})]})})]})},Nt=({children:t})=>{const{user:e}=Ge();return e?l.jsx(l.Fragment,{children:t}):l.jsx(dd,{to:"/",replace:!0})},fs=({children:t})=>{const{user:e}=Ge();return e?e.role==="admin"||e.modules.includes("users")?l.jsx(l.Fragment,{children:t}):l.jsx(dd,{to:"/dashboard",replace:!0}):l.jsx(dd,{to:"/",replace:!0})},IN=()=>l.jsxs(JE,{children:[l.jsx(Me,{path:"/",element:l.jsx(fN,{})}),l.jsx(Me,{path:"/dashboard",element:l.jsx(Nt,{children:l.jsx(Xe,{children:l.jsx(pN,{})})})}),l.jsx(Me,{path:"/candidates",element:l.jsx(Nt,{children:l.jsx(Xe,{children:l.jsx(mN,{})})})}),l.jsx(Me,{path:"/candidates/new",element:l.jsx(Nt,{children:l.jsx(Xe,{children:l.jsx(Bg,{})})})}),l.jsx(Me,{path:"/candidates/edit/:id",element:l.jsx(Nt,{children:l.jsx(Xe,{children:l.jsx(Bg,{})})})}),l.jsx(Me,{path:"/candidates/agreement/:id",element:l.jsx(Nt,{children:l.jsx(gN,{})})}),l.jsx(Me,{path:"/finance/transactions",element:l.jsx(Nt,{children:l.jsx(Xe,{children:l.jsx(yN,{})})})}),l.jsx(Me,{path:"/finance/transactions/new",element:l.jsx(Nt,{children:l.jsx(Xe,{children:l.jsx(zg,{})})})}),l.jsx(Me,{path:"/finance/transactions/edit/:id",element:l.jsx(Nt,{children:l.jsx(Xe,{children:l.jsx(zg,{})})})}),l.jsx(Me,{path:"/finance/accounts",element:l.jsx(Nt,{children:l.jsx(Xe,{children:l.jsx(vN,{})})})}),l.jsx(Me,{path:"/finance/accounts/new",element:l.jsx(Nt,{children:l.jsx(Xe,{children:l.jsx($g,{})})})}),l.jsx(Me,{path:"/finance/accounts/edit/:id",element:l.jsx(Nt,{children:l.jsx(Xe,{children:l.jsx($g,{})})})}),l.jsx(Me,{path:"/finance/statement/:type/:id",element:l.jsx(Nt,{children:l.jsx(Xe,{children:l.jsx(xN,{})})})}),l.jsx(Me,{path:"/finance/financial-statements",element:l.jsx(Nt,{children:l.jsx(Xe,{children:l.jsx(_N,{})})})}),l.jsx(Me,{path:"/finance/reports",element:l.jsx(Nt,{children:l.jsx(Xe,{children:l.jsx(wN,{})})})}),l.jsx(Me,{path:"/admin/users",element:l.jsx(fs,{children:l.jsx(Xe,{children:l.jsx(EN,{})})})}),l.jsx(Me,{path:"/admin/users/new",element:l.jsx(fs,{children:l.jsx(Xe,{children:l.jsx(qg,{})})})}),l.jsx(Me,{path:"/admin/users/edit/:id",element:l.jsx(fs,{children:l.jsx(Xe,{children:l.jsx(qg,{})})})}),l.jsx(Me,{path:"/admin/logs",element:l.jsx(fs,{children:l.jsx(Xe,{children:l.jsx(TN,{})})})}),l.jsx(Me,{path:"/admin/test-runner",element:l.jsx(fs,{children:l.jsx(Xe,{children:l.jsx(SN,{})})})}),l.jsx(Me,{path:"/admin/cloud",element:l.jsx(fs,{children:l.jsx(Xe,{children:l.jsx(CN,{})})})})]});function NN(){return l.jsx(hN,{children:l.jsx(i2,{children:l.jsx(IN,{})})})}const r_=document.getElementById("root");if(!r_)throw new Error("Could not find root element to mount to");const AN=yc.createRoot(r_);AN.render(l.jsx(ty.StrictMode,{children:l.jsx(NN,{})}));
